<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="专注于web和内网攻防研究,安全开发,安全运维,架构安全,热衷于高质量实用干货分享,提供全方位网络安全培训,更多请扫码关注自己博客下方的微信公众号,同时也期待更多志同道合的兄弟能一起并肩作战">
    

    <!--Author-->
    
        <meta name="author" content="klion">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="klion&#39;s blog"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="专注于web和内网攻防研究,安全开发,安全运维,架构安全,热衷于高质量实用干货分享,提供全方位网络安全培训,更多请扫码关注自己博客下方的微信公众号,同时也期待更多志同道合的兄弟能一起并肩作战" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="klion&#39;s blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>klion&#39;s blog</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about">
                    about me
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact">
                    blogs
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa " aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">klion's blog</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/12/23/keepalived-nginx/">
                keepalived + nginx 初步实现高可用
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-12-23</span>
            
            
            
                <span class="category">
                    <a href="/categories/keepalived-高可用/">keepalived 高可用</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 关于 keepalived<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">早期是专为LVS设计的,主要用来监控LVS集群中各个节点状态</div><div class="line">内部基于VRRP协议实现,即`虚拟路由冗余协议`,从名字不难看出,协议本身是用于保证实现路由节点高可用的</div></pre></td></tr></table></figure></p>
<p>0x02 所谓的 VRRP 协议<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">简单来讲,即将N台提供相同功能的路由器组成一个路由器组,在这个组里有一个master和多个<span class="keyword">backup</span></div><div class="line">一般情况下<span class="keyword">master</span>是由选举算法产生的,另外需要注意的是,只有在 <span class="keyword">master</span> 上才有一个用于对外提供服务的虚拟ip</div><div class="line">其它的<span class="keyword">backup</span>都是没有的,当<span class="keyword">master</span>在对外提供服务时,其它的<span class="keyword">backup</span>又在干什么呢</div><div class="line">很简单,当<span class="keyword">master</span>在对外提供服务时,它同时也在不停的向所有的<span class="keyword">backup</span>发送VRRP状态信息 <span class="string">`说白点儿就是心跳包`</span></div><div class="line">告诉所有<span class="keyword">backup</span>们,说,<span class="string">'我还没累死,你们先歇着,等我挂了,你们再上'</span>,然后,所有的<span class="keyword">backup</span>就会一直在那儿闲着接受这样的状态信息</div><div class="line">当某一时刻,<span class="keyword">backup</span>突然没再接到这样的状态回应时,就说明<span class="keyword">master</span>已经光荣牺牲了</div><div class="line">所有的<span class="keyword">backup</span>会再重新用选举算法,把优先级最高的<span class="keyword">backup</span>升级为<span class="keyword">master</span>继续对外提供服务,以此保证了服务的持续可用性</div></pre></td></tr></table></figure></p>
<p>0x03 借助 keepalived 在web上的高可用实现<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">首先,在所有需要进行高可用的web节点机器上部署好keepalived,并在节点中设置一个master,其它的则全部设为<span class="keyword">backup</span></div><div class="line">一旦<span class="keyword">backup</span>接收不到来自<span class="keyword">master</span>的心跳数据,即认为<span class="keyword">master</span>已挂掉,<span class="keyword">backup</span>随即就会接管<span class="keyword">master</span>的所有资源数据</div><div class="line">当<span class="keyword">master</span>状态恢复时,<span class="keyword">backup</span>会把所有的资源数据再移交给<span class="keyword">master</span>处理,此,即为最简单的web高可用实现</div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/12/23/keepalived-nginx/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/12/21/nginx-static-dynamic/">
                利用 `nginx反向代理` 实现的动静分离
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-12-21</span>
            
            
            
                <span class="category">
                    <a href="/categories/动静分离/">动静分离</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 关于动静分离<br><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">主要用于一些较大型的站点架构,这样做一定程度上可以有效减轻后端节点压力</div><div class="line">也就是说,有时候你在前端<span class="built_in">url</span>中看到的一个目录,其后端对应的很可能就是一个集群</div><div class="line">另外,这样会使网站更加静态化,利于缓存,能显著提高网站的访问速度</div><div class="line">最后,可实现前后端的有效解耦,但这样无疑会加大开发的繁琐程度,前后端只能通过各种接口进行通信</div></pre></td></tr></table></figure></p>
<p>0x02 此次演示环境<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">NginxHttp</span>	<span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.49</span>	对应域名: <span class="selector-tag">reverse</span><span class="selector-class">.org</span>		<span class="selector-tag">nginx</span>反向代理服务器</div><div class="line"><span class="selector-tag">OldLamp</span>		<span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.45</span>	对应域名: <span class="selector-tag">www</span><span class="selector-class">.bwapp</span><span class="selector-class">.cc</span>		动态服务器</div><div class="line"><span class="selector-tag">OldLnmp</span>		<span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.42</span>	对应域名: <span class="selector-tag">test</span><span class="selector-class">.bwapp</span><span class="selector-class">.org</span> 	静态服务器</div></pre></td></tr></table></figure></p>
<p>0x03 统一所有机器的host解析,因为等会儿要直接用域名的方式往后抛,如下<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># vi /etc/hosts</div><div class="line">  <span class="number">192.168</span><span class="number">.3</span><span class="number">.42</span>	test.bwapp.org bwapp.org</div><div class="line">  <span class="number">192.168</span><span class="number">.3</span><span class="number">.45</span>	bwapp.cc www.bwapp.cc</div><div class="line">  <span class="number">192.168</span><span class="number">.3</span><span class="number">.75</span>  lvs.org</div><div class="line">  <span class="number">192.168</span><span class="number">.3</span><span class="number">.49</span>	reverse.org</div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/12/21/nginx-static-dynamic/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/12/20/ldap-sec/">
                初探 LDAP 安全 [ 一 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-12-20</span>
            
            
            
                <span class="category">
                    <a href="/categories/LDAP安全/">LDAP安全</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 关于 ldap 的一些简单科普<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">`ldap` 基于tcp/ip的轻量级目录访问协议,属于X.<span class="number">500</span>目录协议族的一个简化版本</div><div class="line">你可以暂时把它粗暴的理解成 `一种特殊类型的数据库` ,通常,这种数据库文件后缀都为`.ldif`,并使用特殊的节点查询语句来获取相应数据</div><div class="line">实际生产环境中,主要还是用它来做各种查询比较多,既是查询,也就意味着肯定会有大量的读操作</div><div class="line">虽然,ldap也支持一些简单的更新功能,即写,但一般都不会用,因为它在写方面的效率并不高</div><div class="line">如果真的是写比较多,直接用各种关系型数据库代替就好了,实在没必要用ldap,毕竟,术业有专攻</div><div class="line">另外,ldap 跨平台,功能简洁,易管理,配置,读性能也不错,亦可分布式部署`不知道是不是可以把它的分布式理解成windows域的目录树,目录林概念`,</div><div class="line">用的最多的可能就是进行`集中身份验证`,最后,我们还需要知道的是,默认情况下,ldap的所有数据都是直接以明文传输的,好在它支持ssl</div></pre></td></tr></table></figure></p>
<p>0x02 其它的一些常用目录服务工具<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">X</span><span class="selector-class">.500</span> 		过于庞大臃肿</div><div class="line"><span class="selector-tag">ldap</span>  		轻量且配置简单</div><div class="line"><span class="selector-tag">windows</span>活动目录  有平台限制</div><div class="line"><span class="selector-tag">NIS</span>		个人暂时还没接触过</div></pre></td></tr></table></figure></p>
<p>0x03 了解ldap内部数据的大致存储方式<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">和常规关系型数据库不同的是,ldap并非按照常规的库,表,字段方式来存储数据</div><div class="line">而是按照一种特殊的倒树状结构层级来组织管理数据,此处的树指的就是目录信息树,即`DIT`</div><div class="line">所谓的目录信息树其实相当于专门用来进行读操作的数据库</div><div class="line">在DIT内部则由N个条目`entry`所组成,就相当于我们常规数据库表中的每条具体的记录</div><div class="line">而条目的内容则是由具有唯一标识名`DN`的属性[Attribute]及属性对应的值[value]所组成的这么一个集合</div><div class="line">条目为ldap中最基础的操作单位,通常对ldap的增删改查都是以条目为基本单元进行的</div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/12/20/ldap-sec/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/12/16/tomcat-sec/">
                Tomcat 安全部署实战指南
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-12-16</span>
            
            
            
                <span class="category">
                    <a href="/categories/Tomcat-安全部署实战指南/">Tomcat 安全部署实战指南</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 关于Tomcat,更多详情大家可直接参考百科说明<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">https:</span>//<span class="built_in">zh</span>.wikipedia<span class="meta">.org</span>/wiki/Apache_Tomcat</div></pre></td></tr></table></figure></p>
<p>此次演示环境<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CentOS7 x86_64 	<span class="built_in">ip</span>: <span class="number">192.168</span><span class="meta">.3</span><span class="meta">.64</span></div><div class="line">Apache Tomcat/<span class="number">8.5</span><span class="meta">.24</span> 	建议大家使用较新版的稳定版本</div></pre></td></tr></table></figure></p>
<p>0x02 首先,在正式部署Tomcat之前,需要先来准备好jdk环境,因为毕竟底层还是在靠java来处理,所以必须要先得有java的运行环境才行,其实,在实际生产环境中,也可以单独使用<code>jre</code>,不过个人觉得这和安全的关系并不大,试想,如果你手里都已经拿到了一个可以运行java的环境了,我在本地用对应版本的jdk编译好了再丢上运行也是一样,防不住啥,太泛泛<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> tar xf jdk-8u151-linux-x64.tar.gz</span></div><div class="line"><span class="meta">#</span><span class="bash"> mv jdk1.8.0_151/ /usr/<span class="built_in">local</span>/</span></div><div class="line"><span class="meta">#</span><span class="bash"> ln -s /usr/<span class="built_in">local</span>/jdk1.8.0_151/ /usr/<span class="built_in">local</span>/jdk</span></div><div class="line"><span class="meta">#</span><span class="bash"> tar xf apache-tomcat-8.5.24.tar.gz</span></div><div class="line"><span class="meta">#</span><span class="bash"> mv apache-tomcat-8.5.24 /usr/<span class="built_in">local</span>/</span></div><div class="line"><span class="meta">#</span><span class="bash"> ln -s /usr/<span class="built_in">local</span>/apache-tomcat-8.5.24/ /usr/<span class="built_in">local</span>/tomcat</span></div><div class="line"><span class="meta">#</span><span class="bash"> ll /usr/<span class="built_in">local</span>/</span></div><div class="line"><span class="meta">#</span><span class="bash"> vi /etc/profile</span></div><div class="line">  export JAVA_HOME=/usr/local/jdk/ </div><div class="line">  export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH </div><div class="line">  export CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar</div><div class="line">  export TOMCAT_HOME=/usr/local/tomcat</div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> /etc/profile</span></div><div class="line"><span class="meta">#</span><span class="bash"> java -version</span></div><div class="line"><span class="meta">#</span><span class="bash"> javac</span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/12/16/tomcat-sec/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/12/12/samba-sec/">
                跨平台快速文件共享 Samba
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-12-12</span>
            
            
            
                <span class="category">
                    <a href="/categories/Samba/">Samba</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 关于smaba<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">主要用于实现不同系统平台间的文件共享,配置非常简单,轻量,适合用在常规办公内网环境中</div><div class="line">linux <span class="tag">&lt;<span class="name">==</span>&gt;</span> windows <span class="tag">&lt;<span class="name">==</span>&gt;</span> unix</div></pre></td></tr></table></figure></p>
<p>此次演示环境<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CentOS6<span class="meta">.9</span> x86_64	<span class="built_in">ip</span>:<span class="number">192.168</span><span class="meta">.3</span><span class="meta">.55</span> samba服务器</div><div class="line">CentOS6<span class="meta">.9</span> x86_64	<span class="built_in">ip</span>:<span class="number">192.168</span><span class="meta">.3</span><span class="meta">.57</span> 用来模拟smb客户端进行访问</div></pre></td></tr></table></figure></p>
<p>0x02 samba服务默认所监听的端口<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">137/udp,138/udp nmb 进程提供netbios解析,以满足基于 CIFS 协议的共享访问环境</div><div class="line">138/tcp,445/tcp<span class="built_in"> smb </span>进程主要为客户端提供文件共享,打印机服务以及用户权限验证</div></pre></td></tr></table></figure></p>
<p>0x03 使用samba客户端工具 <code>smbclient</code>,其实有些类似于ftp的客户端工具,也是一种交互式的访问</p>
<p><code>在linux下使用smbclient访问windows中的共享目录</code><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> smbclient -L 192.168.3.23 -U administrator</span></div><div class="line"><span class="meta">#</span><span class="bash"> smbclient //192.168.3.23/linux_dir -U dcadmin</span></div><div class="line"><span class="meta">#</span><span class="bash"> mount -t cifs //192.168.3.23/linux_dir /mnt/windows/ -o username=dcadmin 注意,此处要使用cifs协议进行挂载</span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/12/12/samba-sec/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/12/11/Dns-tips/">
                DNS 深度理解 [ 一 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-12-11</span>
            
            
            
                <span class="category">
                    <a href="/categories/DNS-深度理解/">DNS 深度理解</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 首先,我们先来简单回顾下<code>DNS的基本解析流程</code>, 比较简单,如下<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">-<span class="ruby">&gt; 以客户端浏览器访问 www.rootkit.org 域名为例,首先,它会最先去检查浏览器缓存,如果有,就直接响应</span></div><div class="line">  -<span class="ruby">&gt; 而后,操作系统会去检查自己的host文件,如果从中没找到对应关系,会再到系统dns缓存中查,如果缓存中有,就直接返回该域名所对应的ip</span></div><div class="line">    -<span class="ruby">&gt; 如果缓存中没有,则会向我们事先设置好的dns服务器 [ 一般有两个, 主 &amp; 备 ] 去请求,即所谓的<span class="string">`递归查询`</span> ,dns服务器首先会到自身解析数据库中去查</span></div><div class="line">      -<span class="ruby">&gt; 如果dns服务器在自己的解析库中也没找到,它就会自动帮我们向根发送询问请求</span></div><div class="line">	-<span class="ruby">&gt; 此时,根看到要请求的是org的后缀,就会把org所在的ns服务器告诉我们的dns</span></div><div class="line">	  -<span class="ruby">&gt; 然后,我们的dns服务器就会去请求org所在的ns服务器</span></div><div class="line">	    -<span class="ruby">&gt; 当请求到达org ns服务器时,org一看域名是在rootkit这个域下的,就会把rootkit所在的ns服务器再告诉我们的dns服务器</span></div><div class="line">	       -<span class="ruby">&gt; 再然后,我们的dns服务器就会去请求rootkit这个域的ns服务器</span></div><div class="line">		 -<span class="ruby">&gt; rootkit这个域的ns服务器一看是要访问www就直接找到了www对应的A记录的ip,并把它丢给我们的dns,上面逐个询问的过程,即 <span class="string">`迭代查询`</span></span></div><div class="line">		   -<span class="ruby">&gt; 最后,我们的dns再把最终解析到的这个ip丢给我们的客户端,然后客户端就直接拿着去访问了,如下,访问google.com时的简易流程图</span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/12/11/Dns-tips/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/12/10/svn-config-sec/">
                不再让 `泄露` 拖你的后腿 [ subversion篇 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-12-10</span>
            
            
            
                <span class="category">
                    <a href="/categories/svn/">svn</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 关于 svn<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">同属C/S架构,对于svn服务端来讲,任何一个文件,在任何时刻的变化,都会被svn详细记录,并自动备份修改之前的结果,方便后续回滚</div><div class="line">其实,底层也是靠一个独立的`文件系统 FSFS`在维护,更多内部工作细节,大家可以直接去参考百科说明,此处废话不多讲,我们真奔主题...</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>演示环境,注,此处为独立部署svn服务器,并非配合web服务一起使用<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">CentOS6</span><span class="selector-class">.9_x86_64</span> <span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.59</span></div><div class="line"><span class="selector-tag">win7cn</span>		 <span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.70</span></div></pre></td></tr></table></figure></p>
<p>0x02 作为一名入侵者,从<code>svn</code>中你都能发掘到什么宝藏<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">可能最容易拿到的就是数据库的各种连接账号密码,前提是,目标数据库允许外连,这样你才能更优雅的脱裤或者想办法构造上传webshell</div><div class="line">一些邮箱账号密码,如果目标有自己的vpn或者owa之类的入口还是很值得尝试的</div><div class="line">直接的后端代码,除了能局部审下代码之外,在注释里面也许还能看到一些关于开发人员的敏感信息</div><div class="line">其它的各种敏感配置信息,非常多,这里就不一一细说了</div><div class="line">注意,有些信息,确实不能让我们一刀毙敌,但高效的渗透往往是对各类敏感信息的相互配合及深度利用,这非常重要</div><div class="line">...</div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/12/10/svn-config-sec/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/12/09/vsftp-secfig/">
                简述 FTP 入侵与防御 [ vsftpd ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-12-09</span>
            
            
            
                <span class="category">
                    <a href="/categories/vsftp/">vsftp</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 首先,我们先来简单思考下,当你面对一台 ftp 时,到底能做些什么<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">挖<span class="number">0</span><span class="built_in">day</span>,抱歉,并不在今天的讨论范畴 ^_^</div><div class="line">允许匿名可写,直接上传webshell,一般极小的个人站才有可能,ftp目录即网站目录</div><div class="line">允许匿名下载,造成的敏感文件信息泄露</div><div class="line">爆破,亦可造成敏感配置泄露</div><div class="line">嗅探,搜集各种明文账号密码,然后再拿着这些账号密码,去撞目标的其它入口,或以此进行进一步的内网渗透</div><div class="line">提权,linux平台下基本不可能</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>0x02 相对主流的一些ftp工具<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">vsftpd</span></span> proftpd filezilla ...</div></pre></td></tr></table></figure></p>
<p>0x03 深入理解ftp的主动与被动工作模式</p>
<p><code>命令连接</code><br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">在客户端向ftp服务端发起连接请求时,客户端会随机选择本地的某个tcp端口与ftp服务端的<span class="number">21</span>端口进行连接</div><div class="line">这中间会进行一系列的身份验证过程,待验证通过后,客户端与ftp服务端即会成功建立 `命令连接`</div><div class="line">所谓的 `命令传输连接` 也就是说,仅仅只会用这个连接来传输命令本身</div></pre></td></tr></table></figure></p>
<p><code>主动模式</code><br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">在 `命令连接` 建立成功后,客户端可能还需要进行一系列的数据传输动作,如,上传,下载文件...</div><div class="line">此时,客户端会先在本地另启一个端口监听等待连接,并利用先前与ftp客户端建立好的`命令连接`通道,告诉ftp服务端客户端所监听的端口</div><div class="line">而后,ftp服务端会利用自身的<span class="number">20</span>端口和刚才ftp客户端所告知的端口进行数据连接,随后就开始利用此连接来进行各类数据传输</div><div class="line">注意,此时`数据连接`在建立的过程中,是ftp服务端的<span class="number">20</span>端口主动连接FTP客户端的随机端口的,也就是我们所说的`主动模式`</div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/12/09/vsftp-secfig/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/11/26/apache-sec/">
                如何将你的 apache 把控的'密不透风'
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-11-26</span>
            
            
            
                <span class="category">
                    <a href="/categories/apachesec/">apachesec</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 为防止配置或端口冲突,在装之前,你需要先仔细检查当前系统有没有装apache,如果有<code>先把apache服务停掉,然后卸载apache</code>,等会儿用源码重新编译安装<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> rpm -qa httpd</span></div><div class="line"><span class="meta">#</span><span class="bash"> rpm -e --nodeps * 强制卸载apache</span></div></pre></td></tr></table></figure></p>
<p>演示环境<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">CentOS6</span><span class="selector-class">.8</span> <span class="selector-tag">x86_64</span>    最小化,带基础库安装 <span class="selector-tag">eth0</span> : 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.45</span> <span class="selector-tag">eth1</span> : 192<span class="selector-class">.168</span><span class="selector-class">.4</span><span class="selector-class">.16</span> <span class="selector-tag">eth2</span> : 192<span class="selector-class">.168</span><span class="selector-class">.5</span><span class="selector-class">.16</span></div><div class="line"><span class="selector-tag">httpd-2</span><span class="selector-class">.2</span><span class="selector-class">.34</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> <span class="selector-tag">apache</span>官方提供的源码包</div></pre></td></tr></table></figure></p>
<p>0x02 下载apache源码包,这里暂时选择2.2.x系列的最新版,不建议再用比这个还老的版本了,漏洞比较多<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> wget http://apache.website-solution.net/httpd/httpd-2.2.34.tar.gz</span></div><div class="line"><span class="meta">#</span><span class="bash"> tar xf httpd-2.2.34.tar.gz &amp;&amp; <span class="built_in">cd</span> httpd-2.2.34</span></div></pre></td></tr></table></figure></p>
<p>0x03 直接到源码中去<code>改掉apache的详细版本信息</code>,跟部署nginx一样,尽可能地扰乱入侵者的判断,这里就把它模拟成IIS 7.5,实际系统应为win server 2008r2<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># vi <span class="meta-keyword">include</span>/ap_release.h</span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/11/26/apache-sec/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/11/23/phpsec/">
                php-fpm.conf & php.ini 安全优化实践
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-11-23</span>
            
            
            
                <span class="category">
                    <a href="/categories/phpsec/">phpsec</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 关于 php<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">其历史相对已经比较久远了,这里也就不废话了,属弱类型中一种解释型语言</div><div class="line">除了web开发以及写些简单的exp,暂未发现其它牛逼用途,暂以中小型web站点开发为主</div><div class="line">另外,低版本的php自身漏洞就比较多,建议,从现在开始就在新项目中使用php <span class="number">5.6</span><span class="selector-class">.x</span> 往后的版本</div><div class="line">好在官方维护的一直比较勤奋,主次版本都迭代的比较快,最新版已经到<span class="number">7.2</span>.<span class="number">0</span></div><div class="line">哼哼……是,<span class="string">'最好的语言'</span>... :)</div></pre></td></tr></table></figure></p>
<p>0x02 此次演示环境<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">CentOS6</span><span class="selector-class">.8</span> <span class="selector-tag">x86_64</span>   最小化,带基础库安装 	<span class="selector-tag">eth0</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.42</span> <span class="selector-tag">eth1</span>: 192<span class="selector-class">.168</span><span class="selector-class">.4</span><span class="selector-class">.14</span>  <span class="selector-tag">eth2</span>: 192<span class="selector-class">.168</span><span class="selector-class">.5</span><span class="selector-class">.14</span></div><div class="line"><span class="selector-tag">php-5</span><span class="selector-class">.6</span><span class="selector-class">.32</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span>  官方提供的源码包</div></pre></td></tr></table></figure></p>
<p>0x03 下载 <code>php-5.6.32.tar.gz</code>,并安装好php所需的各种依赖库<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> yum install epel-release -y</span></div><div class="line"><span class="meta">#</span><span class="bash"> yum install -y zlib-devel libxml2-devel freetype-devel </span></div><div class="line"><span class="meta">#</span><span class="bash"> yum install -y libjpeg-devel  libpng-devel gd-devel curl-devel libxslt-devel</span></div><div class="line"><span class="meta">#</span><span class="bash"> yum install openssl openssl-devel libmcrypt libmcrypt-devel mcrypt mhash mhash-devel -y</span></div><div class="line"><span class="meta">#</span><span class="bash"> tar xf libiconv-1.15.tar.gz</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> libiconv-1.15</span></div><div class="line"><span class="meta">#</span><span class="bash"> ./configure --prefix=/usr/<span class="built_in">local</span>/libiconv-1.15 &amp;&amp; make &amp;&amp; make install</span></div><div class="line"><span class="meta">#</span><span class="bash"> ln -s /usr/<span class="built_in">local</span>/libiconv-1.15/ /usr/<span class="built_in">local</span>/libiconv</span></div><div class="line"><span class="meta">#</span><span class="bash"> ll /usr/<span class="built_in">local</span>/libiconv/</span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/11/23/phpsec/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/11/22/mysqlconfigsec/">
                给自己一个更安全的 mysql
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-11-22</span>
            
            
            
                <span class="category">
                    <a href="/categories/mysqlsec/">mysqlsec</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 在进行真正的 mysql 部署之前,我们不妨先来大致了解下,在实际入侵过程中,仅仅利用mysql,我们到底能干些什么,了解了这些最基本的点之后,我们再进行针对性防御:<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">普通用户权限下的 <span class="string">'增删改查'</span>,即 常规sql注入,俗称<span class="string">'脱裤'</span></div><div class="line">普通用户<span class="keyword">file</span>权限下的 <span class="string">'文件读写'</span>,可尝试读取各类敏感配置,如各类账号或者尝试直接往站点目录中写webshell</div><div class="line">root用户权限下的 <span class="string">'读写文件'</span> , <span class="string">'系统命令执行'</span>... 可读写是因为root本身就有<span class="keyword">file</span>权限,另外,如果直接以root身份运行mysql服务,亦可实现<span class="string">'提权'</span>的效果</div><div class="line">针对 <span class="string">'数据库连接'</span> 的<span class="string">'DDOS'</span>,单用户大批量数据库连接可能会导致mysql无法再提供服务</div></pre></td></tr></table></figure></p>
<p>0x02 演示环境:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">CentOS6</span><span class="selector-class">.8</span> <span class="selector-tag">x86_64</span> 最小化,只带基础库安装  <span class="selector-tag">eth0</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.42</span> <span class="selector-tag">eth1</span>: 192<span class="selector-class">.168</span><span class="selector-class">.4</span><span class="selector-class">.14</span>  <span class="selector-tag">eth2</span>: 192<span class="selector-class">.168</span><span class="selector-class">.5</span><span class="selector-class">.14</span></div><div class="line"><span class="selector-tag">mysql-5</span><span class="selector-class">.6</span><span class="selector-class">.27-linux-glibc2</span><span class="selector-class">.5-x86_64</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span>  此次<span class="selector-tag">mysql</span>就不再手工编译了,时间比较长,直接用<span class="selector-tag">mysql</span>官方提供好的二进制包来做演示</div></pre></td></tr></table></figure></p>
<p>0x03 下载,解压 mysql-5.6.27-linux-glibc2.5-x86_64.tar.gz<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> tar xf mysql-5.6.27-linux-glibc2.5-x86_64.tar.gz</span></div><div class="line"><span class="meta">#</span><span class="bash"> mv mysql-5.6.27-linux-glibc2.5-x86_64 /usr/<span class="built_in">local</span>/</span></div><div class="line"><span class="meta">#</span><span class="bash"> ln -s /usr/<span class="built_in">local</span>/mysql-5.6.27-linux-glibc2.5-x86_64/ /usr/<span class="built_in">local</span>/mysql</span></div><div class="line"><span class="meta">#</span><span class="bash"> ls -l /usr/<span class="built_in">local</span>/mysql/</span></div></pre></td></tr></table></figure></p>
<p>0x04 开始初始化mysql</p>
<p>务必以一个伪用户身份来运行mysql服务,防止别人利用mysql进行提权,后面还会再细说,另外,web服务和数据库服务严禁用同一个系统用户,这样做主要是为了防止入侵者直接通过sql语句往网站目录中写webshell<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> useradd -s /sbin/nologin -M mysql</span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/11/22/mysqlconfigsec/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/11/20/nginx-sec/">
                从 0 开始构建一个 "固若金汤" 的nginx
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-11-20</span>
            
            
            
                <span class="category">
                    <a href="/categories/nginxsec/">nginxsec</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 关于 nginx<br><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">配置灵活,简单,运行时占用系统资源较少,功能模块繁多,可扩展性极强,基于 <span class="keyword">C</span> ,整个工具大小<span class="number">1</span>M左右</div><div class="line">支持高并发,仅限于全部为纯静态文件的情况下,因为最终还要取决于后端 [ 脚本和数据库 ] 的实际处理速度</div><div class="line">默认 nginx 会自动选择最佳的网络<span class="keyword">I</span>/<span class="keyword">O</span>模型,和nginx不同的是,apache默认就会使用select模型,效率较低</div><div class="line">上面这些话的意思也就是说,你的<span class="keyword">C</span>要牛逼到一定的程度,不然,想做深度二次开发基本是扯淡,真心挺佩服毛子的</div><div class="line">更多说明,请直接参考官方文档...</div></pre></td></tr></table></figure></p>
<p>0x02 正确理解 linux 对文件,目录,<code>[ 读 写 执行 ]</code> 权限的真正含义,这东西不能靠干说,因为根本理解不扎实,大家可以自己在系统中创建两个普通用户,不停地切换目录文件权限,以深入仔细体会,后面网站目录权限设置要用到这些基础,如果连这些都搞不清,想灵活应用就难了,耐心点,等透彻理解之后,你就会发现真TM简单 </p>
<p>目录 <code>读[r / 4]</code> <code>写[w / 2]</code> <code>执行[x / 1]</code><br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">读:   <span class="keyword">ls</span> , dir <span class="string">...</span> 			表示可查看该目录下的文件列表</div><div class="line">写:   rm , mv, cp, mkdir ,touch <span class="string">...</span>	表示可在该目录下创建,删除,修改文件或者子目录,不过在这之前,一定要先有执行权限,不然进都进不去,又怎么写呢</div><div class="line">执行: <span class="keyword">cd</span>  <span class="string">...</span>				表示可进入该目录</div></pre></td></tr></table></figure></p>
<p>文件 <code>读[r / 4]</code> <code>写[w / 2]</code> <code>执行[x / 1]</code><br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">读:	cat , tac , more , less ,head , tail <span class="string">...</span> 表示可查看该文件中的内容</div><div class="line">写:	vi , nano , <span class="keyword">echo</span> <span class="string">...</span>			 只表示可对文件中的 内容 进行增删改,删除文件还要取决于当前用户对该文件所在目录是否有写权限</div><div class="line">执行:	可执行文件,shell脚本<span class="string">...</span>			 在linux中任何文件都可以有执行权限,但只有可执行文件和脚本才能真正执行</div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/11/20/nginx-sec/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/11/18/lsyncd/">
                lsyncd + rsync 实时同步海量小文件
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-11-18</span>
            
            
            
                <span class="category">
                    <a href="/categories/lsyncd/">lsyncd</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br>0x01 关于lsyncd<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">inotify</span>的优秀替代品,基于<span class="selector-tag">lua</span>,不过,它也依然使用 <span class="selector-tag">linux</span> 2<span class="selector-class">.6</span><span class="selector-class">.13</span>以后内核的<span class="selector-tag">inotify</span>触发机制</div><div class="line">配置简单灵活,在同步海量小文件时,性能表现优异,废话不多讲,咱们直奔主题</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>环境准备:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">RsyncServer</span>	<span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.5</span><span class="selector-class">.4</span></div><div class="line"><span class="selector-tag">RsyncClient26</span> 	<span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.5</span><span class="selector-class">.7</span></div></pre></td></tr></table></figure></p>
<p>0x02 在需要进行实时同步的 rsync 客户端机器上<code>[ 这里是RsyncClient26 ]</code>编译安装lsyncd,如下<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> yum install lua lua-devel asciidoc cmake -y</span></div><div class="line"><span class="meta">#</span><span class="bash"> wget https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/lsyncd/lsyncd-2.1.5.tar.gz</span></div><div class="line"><span class="meta">#</span><span class="bash"> tar xf lsyncd-2.1.5.tar.gz</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> lsyncd-2.1.5/</span></div><div class="line"><span class="meta">#</span><span class="bash"> ./configure --prefix=/usr/<span class="built_in">local</span>/lsyncd-2.1.5 &amp;&amp; make &amp;&amp; make install</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> $? &amp;&amp; <span class="built_in">cd</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> ln -s /usr/<span class="built_in">local</span>/lsyncd-2.1.5/ /usr/<span class="built_in">local</span>/lsyncd/</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/lsyncd/bin/ &amp;&amp; ./lsyncd</span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/11/18/lsyncd/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/11/17/etherape/">
                纯图形化实时流量分析 [ etherape ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-11-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/etherape/">etherape</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>0x01 关于 etherape:<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">一款纯图形化的网络流量分析工具,既是图形界面,所以系统中务必要有各类图形库支持才行</div><div class="line">很多数时候,我们可能只是想简单的看看数据流向,了解总体数据流向或某单个网络节点状况,并不想关心数据包里面到底是什么东西</div><div class="line">此时,etherape 则无疑是个比较不错的选择,另外,它对各个协议的支持相对还算比较到位</div><div class="line">当然,缺点也是有的,毕竟是实时分析,如果流量瞬间激增,很容易把程序卡崩掉[不知道是有点儿溢出,还是io跟不上],也正常,毕竟只是个小工具肯定没商业工具那么完善</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>0x02 环境:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">kali</span> 			<span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.30</span></div><div class="line"><span class="selector-tag">centos6</span><span class="selector-class">.9_x64</span> 		<span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.16</span> <span class="selector-attr">[eth1]</span>  192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.19</span> <span class="selector-attr">[eth0]</span></div><div class="line"><span class="selector-tag">win2008R2cn</span>		<span class="selector-tag">ip</span>: 192<span class="selector-class">.178</span><span class="selector-class">.3</span><span class="selector-class">.23</span></div><div class="line"><span class="selector-tag">win7cn</span>			<span class="selector-tag">ip</span>: 192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.2</span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/11/17/etherape/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/11/15/hping3/">
                老旧但不乏经典的高级组包工具 [ hping3 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-11-15</span>
            
            
            
                <span class="category">
                    <a href="/categories/hping3/">hping3</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>前言:<br>&nbsp;&nbsp;&nbsp;&nbsp;一款经典的高级组包工具,虽然老旧,但不乏经典,你完全可以利用它任意组装专属的 tcp,udp,icmp 数据报文格式,废话不多说,咱们直奔主题…</p>
<p>0x01 实验环境:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">kali</span> 			<span class="selector-tag">ip</span><span class="selector-pseudo">:192.168.3.38</span></div><div class="line"><span class="selector-tag">CentOS6</span><span class="selector-class">.9</span> <span class="selector-attr">[MidLAMP]</span> 	<span class="selector-tag">ip</span><span class="selector-pseudo">:192.168.3.16</span><span class="selector-attr">[eth1]</span>  192<span class="selector-class">.168</span><span class="selector-class">.3</span><span class="selector-class">.19</span><span class="selector-attr">[eth0]</span>	在此机器上编译安装<span class="selector-tag">hping3</span></div></pre></td></tr></table></figure></p>
<p>0x02 编译安装 hping3:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> yum install libpcap-devel tcl-devel -y</span></div><div class="line"><span class="meta">#</span><span class="bash"> wget http://www.hping.org/hping3-20051105.tar.gz</span></div><div class="line"><span class="meta">#</span><span class="bash"> tar xf hping3-20051105.tar.gz</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> hping3-20051105</span></div><div class="line"><span class="meta">#</span><span class="bash"> vi bytesex.h</span></div><div class="line">  || defined(__x86_64__) \	为了防止后续编译出错,需要在第一个判断下添加此句,如下图所示,添加64位系统平台</div><div class="line"><span class="meta">#</span><span class="bash"> ln -s /usr/include/pcap-bpf.h /usr/include/net/bpf.h</span></div><div class="line"><span class="meta">#</span><span class="bash"> ./configure &amp;&amp; make &amp;&amp; make strip &amp;&amp; make install</span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2017/11/15/hping3/" class="read-more">Read More</a>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="disabled" href="/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/2/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">

<center>
<span>有偿提供各类全面靠谱的安全优化加固方案,入侵取证及全方位企业内部及个人网络安全培训...<font color="red"> &nbsp;&nbsp;klion@protonmail.com</span><br>
<br>
<br>
<font size="5" color="#00FF7F" style="margin-left=-10px;">关注公众号</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size="5" color="#00FF7F">随意捐助 [ 微信 ]</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size="5" color="#00FF7F">加入小密圈</font>
<br>
<br>
<img src="/img/small.jpg"  alt="klionsec" />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="/img/klion.png" with="262" height="254" alt="klionsec" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="/img/xiaomi.png" with="260" height="257">
<br><br>
<br><font color="yellow" size="4">
如果觉得内容还不错,也希望您能高抬贵手帮忙转发一下,让更多需要的人都能看到,本人不胜感激
</font><br><br>
<font color="#00FF7F" size="4">
相信您的支持和鼓励换来的将会是更高质量的不懈创作,本人将一直秉承博客初衷,坚持高质量原创实用干货分享</font>
<br><br><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">博客累计访问量 <span id="busuanzi_value_site_pv"></span> </span>
<span id="busuanzi_container_site_uv">
累计访客数 <span id="busuanzi_value_site_uv"></span> 
</span>
<span id="showDays"></span>
<script>
var birthDay = new Date("12/28/2014");
var now = new Date();
var duration = now.getTime() - birthDay.getTime(); 
var total= Math.floor(duration / (1000 * 60 * 60 * 24));
document.getElementById("showDays").innerHTML = " 其实,博客已默默独自坚挺了 "+total+" 天";
</script>
<br>
<br>
多年实战渗透经验积累[大中小型网络] + 娴熟的底层及脚本编写能力 + 熟练的协议分析能力 + 多个大中型安全架构实际设计部署经验 + 良好的逆向分析能力[一定的0day挖掘能力] = 合格安全架构师
<br>
<br>
<br>
<font size=6 color="white">唯一不变的,就是一直在变</font>
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klionsec">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/klionsec">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/klionsec">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="http://www.jianshu.com/u/2a4d8b1f03e0">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.zhihu.com/people/klionsec/activities">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:klion@protonmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    <strong><font size=4 color=#00FF7F> Blog by klionsec </font></strong>
                </div>
            </div>
        </div>
    </div>
<!--
<audio autoplay="autoplay" width="300" height="200">
	<source src="/img/Bandari - Childhood Memory.mp3" type="audio/mpeg" />
</audio>
-->
</footer>



<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>