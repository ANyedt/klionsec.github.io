<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="知道自己想要做什么,比怎么做更重要">
    

    <!--Author-->
    
        <meta name="author" content="klion">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="klion&#39;s blog"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="知道自己想要做什么,比怎么做更重要" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="klion&#39;s blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>page - klion&#39;s blog</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about">
                    about me
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact">
                    blogs
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">klion's blog</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2015/04/16/reaver-crack-pin-code/">
                利用reaver破解目标pin码
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2015-04-16</span>
            
            
            
                <span class="category">
                    <a href="/categories/wpa-wpa2-crack/">wpa/wpa2 crack</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br>1,说到pin码就不得不提wps,它是一种特殊的无线认证协议,当路由器开启wps功能后,会随机生成一个8位的pin码,通过暴力枚举这个pin码(共11000中可能),就可以达到破解目标wifi的目的,很不错的现象是,现在很多路由器默认就开启了wps功能<br><br><br>关于pin码爆破的具体原理简要分析,如下:<br>&nbsp;&nbsp;前4位为第一部分,第5-7位为第二部分,最后1位为第三部分<br>&nbsp;&nbsp;第一部分的验证跟第二部分没关联,最后1位的结果是根据第二部分计算得出的校验码<br>&nbsp;&nbsp;破解一开始是会先单独对第一部分进行pin码匹配,<br>&nbsp;&nbsp;也就是说先破解前4位pin码,而前4位也就是0000-9999共有10000个组合<br>&nbsp;&nbsp;当前4位pin码确定后再对第二部分进行pin码匹配,<br>&nbsp;&nbsp;再对5-7位进行破解,而5-7位是000-999,共有1000个组合<br>&nbsp;&nbsp;当前7位都确定后,最后1位也会自动得出,即破解完成<br>&nbsp;&nbsp;根据pin码破解的原理,可以看到只需要枚举11000种情况就会必然破解出pin码,<br>&nbsp;&nbsp;从而通过pin得到wifi密码,这么点儿组合对计算机来讲,破解出来是迟早的,不过实际很大程度上还要依赖于目标路由的网络状况和信号强弱<br>&nbsp;&nbsp;<img src="/img/pin.jpg" alt="pin码格式"><br></p>
<p>2,具体的pin码破解流程如下,首先,依然是先开启网卡的监听模式:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># airmon-ng start wlan0</span></div></pre></td></tr></table></figure></p>
<p><img src="/img/airmon.png" alt="开启网卡监听模式"><br></p>
<p>3,而后,开始扫描附近所有开启了wps的无线设备,locked状态为’No’的,都可以作为下手的目标<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># wash -i wlan0mon --ignore-fcs  这里有时会报fcs错误,加上该选项即可</span></div></pre></td></tr></table></figure></p>
<p><img src="/img/sec.png" alt="扫描附近开了wps的无线设备"><br></p>
<p>4,使用reaver工具爆破pin码,关于reaver 一些选项作用如下:<br>&nbsp;&nbsp;-i     监听后的网卡接口名称<br>&nbsp;&nbsp;-b  指定目标无线ap的mac地址<br>&nbsp;&nbsp;-a  自动检测目标AP最佳配置<br>&nbsp;&nbsp;-S  使用最小的DH key(提高破解速度)<br>&nbsp;&nbsp;-vv 显示详细的破解过程<br>&nbsp;&nbsp;-d  即delay每穷举一次的闲置时间预设为1秒<br>&nbsp;&nbsp;-t  即timeout每次穷举等待反馈的最长时间,即破解超时时长<br>&nbsp;&nbsp;-c  指定频道可以方便找到无线信号,如-c 1 指定1频道</p>
<p>根据无线信号强弱针对性的调整下命令:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># reaver -i wlan0mon -b MAC -a -S -vv -d0 -c 1  		信号非常好</span></div><div class="line"><span class="comment"># reaver -i wlan0mon -b MAC -a -S -vv -d2 -t 5 -c 1		信号普通</span></div><div class="line"><span class="comment"># reaver -i wlan0mon -b MAC -a -S -vv -d5 -c 1			信号一般</span></div><div class="line"><span class="comment"># reaver -i wlan0mon -b MAC -S -N -vv -c 4</span></div><div class="line"><span class="comment"># reaver -i wlan0mon -b DC:EE:06:96:B7:B8 -S -N -vv -c 6</span></div></pre></td></tr></table></figure></p>
<p><img src="/img/reaver_finsal.png" alt="开始爆破pin码"><br></p>
<p>最后,当reaver pin完之后会显示出目标的WPS PIN(正确的pin码)码和WPA PSK密码(正确的wifi密码)<br><br><br>5,假如目标的wpa psk密码被修改了,但wps功能却没有关,pin码也没有改,你还是可以直接用reaver再次获取目标wifi密码,如下:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># reaver -i mon0 -b mac -p pin码</span></div></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="一点小结"><a href="#一点小结" class="headerlink" title="一点小结:"></a>一点小结:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;其实,搞清楚具体的破解原理之后,你会发现其实也并没什么实际性的技术含量,只需要写程序组包跑就是了,可能就是验证的过程有点儿复杂需要多花些时间,但工具(reaver)现在别人都已经为我们写好了,我们所能做的,会用即可,仅此而已,另外,个人并也极不建议一开始破解无线的时候就用这个方法,因为它的速度,大家也可以看到了,影响的因素太多,导致了它非常的慢,尤其是对实地渗透来讲,我们可能根本没有那么长的时间等,所以,能用aircrack搞定的就直接用aircrack来搞定,实在搞不定,再考虑这个也不迟,仅仅是个人建议而已……!</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2015/04/15/auto-crack-wifi/">
                利用wifite脚本全自动获取握手包
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2015-04-15</span>
            
            
            
                <span class="category">
                    <a href="/categories/wpa-wpa2-crack/">wpa/wpa2 crack</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <h5 id="1-wifite-脚本仓库地址-Kali-NetHunter-中可能用的居多"><a href="#1-wifite-脚本仓库地址-Kali-NetHunter-中可能用的居多" class="headerlink" title="1, wifite 脚本仓库地址 [ Kali NetHunter 中可能用的居多 ]:"></a>1, wifite 脚本仓库地址 [ Kali NetHunter 中可能用的居多 ]:</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/derv82/</span>wifite</div></pre></td></tr></table></figure>
<h5 id="2-关于使用wifite脚本的好处-你可以不用再像aircrack那样繁琐的手工输入各种命令-而是把一切都交给代码变成一种完全傻瓜式的交互操作-其实-本质上还是在调用的各种外部工具来帮其实现-脚本本身基于py编写-关于更多更详细运作细节-请自行看代码-今天的目的主要是教大家怎么快速把它用起来-非常简单-简单到你基本不用懂任何技术就可以随意破解别人的无线密码"><a href="#2-关于使用wifite脚本的好处-你可以不用再像aircrack那样繁琐的手工输入各种命令-而是把一切都交给代码变成一种完全傻瓜式的交互操作-其实-本质上还是在调用的各种外部工具来帮其实现-脚本本身基于py编写-关于更多更详细运作细节-请自行看代码-今天的目的主要是教大家怎么快速把它用起来-非常简单-简单到你基本不用懂任何技术就可以随意破解别人的无线密码" class="headerlink" title="2, 关于使用wifite脚本的好处,你可以不用再像aircrack那样繁琐的手工输入各种命令,而是把一切都交给代码变成一种完全傻瓜式的交互操作,其实,本质上还是在调用的各种外部工具来帮其实现,脚本本身基于py编写,关于更多更详细运作细节,请自行看代码,今天的目的主要是教大家怎么快速把它用起来,非常简单,简单到你基本不用懂任何技术就可以随意破解别人的无线密码:"></a>2, 关于使用wifite脚本的好处,你可以不用再像aircrack那样繁琐的手工输入各种命令,而是把一切都交给代码变成一种完全傻瓜式的交互操作,其实,本质上还是在调用的各种外部工具来帮其实现,脚本本身基于py编写,关于更多更详细运作细节,请自行看代码,今天的目的主要是教大家怎么快速把它用起来,非常简单,简单到你基本不用懂任何技术就可以随意破解别人的无线密码:</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> wifite -h    查看wifite的所有帮助选项</span></div></pre></td></tr></table></figure>
<p>下面是破解<code>wpa/wpa2</code>相关的一些选项<br><img src="/img/wpa2.png" alt="破解wpa/wpa2的相关帮助"><br>下面是一些破解古老<code>wep(基本已淘汰,反正我是没见过)</code>的相关选项<br><img src="/img/wep.png" alt="破解wep的相关帮助"><br>关于<code>wps(一种新的认证协议,并非直接使用密码验证而是用pin码,更多内容,请自行谷歌)</code>的一些相关破解选项<br><img src="/img/pin.png" alt="破解wps的相关帮助"><br><br></p>
<h5 id="3-关于wifite脚本的具体使用过程-插入事先准备好的无线网卡-执行下面的命令"><a href="#3-关于wifite脚本的具体使用过程-插入事先准备好的无线网卡-执行下面的命令" class="headerlink" title="3,关于wifite脚本的具体使用过程,插入事先准备好的无线网卡,执行下面的命令:"></a>3,关于wifite脚本的具体使用过程,插入事先准备好的无线网卡,执行下面的命令:</h5><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#</span> <span class="comment">wifite</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">wpa</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">mac</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">wpadt</span> <span class="comment">20</span> <span class="literal">-</span><span class="comment">aircrack</span>  <span class="comment">这里暂以破解wpa2为例</span><span class="string">,</span><span class="comment">关于wep和wps的破解请自行尝试</span></div></pre></td></tr></table></figure>
<p><img src="/img/wifite.png" alt="运行wifite脚本"></p>
<p><code>ctrl+c</code> 即可停止扫描,选择你要破解的无线,几个栏目的意思分别是<br><code>无线编号,无线工作信道,加密类型,信号强弱(值越高信号越强),目标是否启用wps,有无客户端在线(s表示同时有多个客户端在线)</code><br><img src="/img/wfcrack.png" alt="选择要攻击的无线热点"></p>
<p>这里还是用我们自己的wifi来进行测试,选择1,至于之后的事情你就不用管了,它会自动帮你获取握手包文件并保存在当前路径下的hs目录中,如下:<br><img src="/img/crc.png" alt="自动获取握手包"><br><img src="/img/hs.png" alt="握手包位置"></p>
<p>最后,还是跟之前一样,直接处理下丢给hashcat或者aircrack都行,因为这里只是为了测试,所以就直接丢到aircrack中跑了,另外,有个需要注意的地方,如果你还是像之前那样直接用wpaclean处理,然后再丢给hashcat,破解速度会瞬间下降将近两万倍,其实,我也没搞懂这到底是为啥(懒得看代码,也没那个必要),所以,我个人还是推荐直接手工用aircrack相对比较靠谱,毕竟,越自动化的东西,往往对现实环境的适应力就越差,问题也就越多,不靠谱都是很正常的<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">aircrack-ng</span> <span class="selector-tag">--bssid</span> <span class="selector-tag">DC</span><span class="selector-pseudo">:EE</span><span class="selector-pseudo">:06</span><span class="selector-pseudo">:96</span><span class="selector-pseudo">:B7</span><span class="selector-pseudo">:B8</span>  <span class="selector-tag">-w</span> ../<span class="selector-tag">pass</span><span class="selector-class">.txt</span> <span class="selector-tag">klionsec_DC-EE-06-96-B7-B8</span><span class="selector-class">.cap</span></div></pre></td></tr></table></figure></p>
<p><img src="/img/ha.png" alt="握手包位置"><br></p>
<h4 id="一点小结"><a href="#一点小结" class="headerlink" title="一点小结:"></a>一点小结:</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;不可否认的是,脚本一定程度上确实很方便,但它同时显的很呆笨,它的每个操作并非都是我们想要的,对于渗透来讲,我们需要知道的往往是更细节的东西,自动化脚本对于还处在学习阶段的我们,并没什么实际的好处,因为它会严重阻碍你自己思考的习惯,总之,个人此脚本并不建议在实战中使用,除了破解时间的问题,实际测试的时候还有一些其它的小问题,还是那句话,建议直接手工aircrack,也许会更灵活点</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2015/04/14/aircrack-hascat/">
                aircrack & hashcat 非字典高速破解目标无线密码
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2015-04-14</span>
            
            
            
                <span class="category">
                    <a href="/categories/wpa-wpa2-crack/">wpa/wpa2 crack</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <h5 id="1-先把用于抓包的无线网卡挂到kali中去-正常情况下-网卡在成功载入系统以后-应该是如下的效果-在虚拟机设置中选择’可移动设备’把你的网卡连到虚拟机里"><a href="#1-先把用于抓包的无线网卡挂到kali中去-正常情况下-网卡在成功载入系统以后-应该是如下的效果-在虚拟机设置中选择’可移动设备’把你的网卡连到虚拟机里" class="headerlink" title="1, 先把用于抓包的无线网卡挂到kali中去,正常情况下,网卡在成功载入系统以后,应该是如下的效果,在虚拟机设置中选择’可移动设备’把你的网卡连到虚拟机里"></a>1, 先把用于抓包的无线网卡挂到kali中去,正常情况下,网卡在成功载入系统以后,应该是如下的效果,在虚拟机设置中选择’可移动设备’把你的网卡连到虚拟机里</h5><p><img src="/img/1.png" alt="&quot;将网卡载入kali&quot;"><br>看到系统已自动识别该网卡,并且能搜到附近的无线信号才算可以<br><img src="/img/2.png" alt="查看系统是否已经识别该网卡"><br><img src="/img/3.png" alt="看看能不能收到附近的无线信号"></p>
<h5 id="2-紧接着-来看下当前系统中是否已经识别出该无线网卡的驱动-假设当前系统内核中已经有了该种无线网卡的驱动-它就会直接显示出当前无线网卡所使用的芯片组-可以看到-我这里用的是RT2800的芯片组-网卡推荐大家直接去淘宝买-如果没有-则可能需要你自己去手工编译安装相应的无线网卡驱动-然后再更新下内核模块即可-在linux中编译安装驱动着实是一件比较麻烦的事情-建议买的时候就直接去买aircrack所支持的网卡型号-起码用的时候不至于这么费劲-要相信万能的淘宝-但这并不代表你只要把无线网卡驱动安装好就可以用了-需要搞清楚的是-你所使用的无线网卡芯片组必须要被aircrack所支持才可以-因为用无线网卡的最终目的是抓包"><a href="#2-紧接着-来看下当前系统中是否已经识别出该无线网卡的驱动-假设当前系统内核中已经有了该种无线网卡的驱动-它就会直接显示出当前无线网卡所使用的芯片组-可以看到-我这里用的是RT2800的芯片组-网卡推荐大家直接去淘宝买-如果没有-则可能需要你自己去手工编译安装相应的无线网卡驱动-然后再更新下内核模块即可-在linux中编译安装驱动着实是一件比较麻烦的事情-建议买的时候就直接去买aircrack所支持的网卡型号-起码用的时候不至于这么费劲-要相信万能的淘宝-但这并不代表你只要把无线网卡驱动安装好就可以用了-需要搞清楚的是-你所使用的无线网卡芯片组必须要被aircrack所支持才可以-因为用无线网卡的最终目的是抓包" class="headerlink" title="2, 紧接着,来看下当前系统中是否已经识别出该无线网卡的驱动,假设当前系统内核中已经有了该种无线网卡的驱动,它就会直接显示出当前无线网卡所使用的芯片组,可以看到,我这里用的是RT2800的芯片组(网卡推荐大家直接去淘宝买),如果没有,则可能需要你自己去手工编译安装相应的无线网卡驱动,然后再更新下内核模块即可(在linux中编译安装驱动着实是一件比较麻烦的事情,建议买的时候就直接去买aircrack所支持的网卡型号,起码用的时候不至于这么费劲,要相信万能的淘宝),但这并不代表你只要把无线网卡驱动安装好就可以用了,需要搞清楚的是,你所使用的无线网卡芯片组必须要被aircrack所支持才可以,因为用无线网卡的最终目的是抓包"></a>2, 紧接着,来看下当前系统中是否已经识别出该无线网卡的驱动,假设当前系统内核中已经有了该种无线网卡的驱动,它就会直接显示出当前无线网卡所使用的芯片组,可以看到,我这里用的是RT2800的芯片组(网卡推荐大家直接去淘宝买),如果没有,则可能需要你自己去手工编译安装相应的无线网卡驱动,然后再更新下内核模块即可(在linux中编译安装驱动着实是一件比较麻烦的事情,建议买的时候就直接去买aircrack所支持的网卡型号,起码用的时候不至于这么费劲,要相信万能的淘宝),但这并不代表你只要把无线网卡驱动安装好就可以用了,需要搞清楚的是,你所使用的无线网卡芯片组必须要被aircrack所支持才可以,因为用无线网卡的最终目的是抓包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> airmon-ng  查看当前系统中的所有可用的无线网卡接口</span></div></pre></td></tr></table></figure>
<p><img src="/img/4.png" alt="看看aircrack是否已经识别芯片组"><br></p>
<h5 id="3-关于aircrack所支持的网卡芯片组列表-请自行参考aircrack官方提供的说明"><a href="#3-关于aircrack所支持的网卡芯片组列表-请自行参考aircrack官方提供的说明" class="headerlink" title="3, 关于aircrack所支持的网卡芯片组列表,请自行参考aircrack官方提供的说明:"></a>3, 关于aircrack所支持的网卡芯片组列表,请自行参考aircrack官方提供的说明:</h5><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">https:</span>//www.aircrack-ng<span class="meta">.org</span>/doku.php?id=compatibility_drivers</div></pre></td></tr></table></figure>
<h5 id="4-为了保证aircrack套件在运行的时候不被其他进程所干扰-我们需要先执行以下命令"><a href="#4-为了保证aircrack套件在运行的时候不被其他进程所干扰-我们需要先执行以下命令" class="headerlink" title="4, 为了保证aircrack套件在运行的时候不被其他进程所干扰,我们需要先执行以下命令"></a>4, 为了保证aircrack套件在运行的时候不被其他进程所干扰,我们需要先执行以下命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> airmon-ng check <span class="built_in">kill</span></span></div></pre></td></tr></table></figure>
<p><img src="/img/5.png" alt="aircrack启动检查"></p>
<h5 id="5-可以看到-当前网卡默认还处在管理模式-这时我们需要手动将其变成监听模式-这样才能进行正常的抓包"><a href="#5-可以看到-当前网卡默认还处在管理模式-这时我们需要手动将其变成监听模式-这样才能进行正常的抓包" class="headerlink" title="5, 可以看到,当前网卡默认还处在管理模式,这时我们需要手动将其变成监听模式,这样才能进行正常的抓包"></a>5, 可以看到,当前网卡默认还处在管理模式,这时我们需要手动将其变成监听模式,这样才能进行正常的抓包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> iwconfig  使用此命令可查看无线网卡的当前工作模式</span></div></pre></td></tr></table></figure>
<p><img src="/img/6.png" alt="查看网卡工作模式"><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> airmon-ng start wlan0   把网卡改为监听模式</span></div></pre></td></tr></table></figure></p>
<p><img src="/img/7.png" alt="将网卡切换为监听模式"><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> iwconfig  再次查看无线网卡工作模式是否真的已经改过来了</span></div></pre></td></tr></table></figure></p>
<p><img src="/img/45.png" alt="看看网卡工作模式是否已经切换成功"></p>
<h5 id="6-另外-你的无线网卡在启动监听模式以后-网卡接口名称就变成了wlan0mon-以后只要是在aircrack套件中需要指定网卡接口名称的-都要用这个名字-在老版本的aircrack中默认名称是mon0-而新版本则统一变成了wlan0mon-恩-一切准备就绪之后-我们开始尝试扫描附近的无线接入点-找个有客户端在线的再单独监听-一定要注意-”必须要有客户端在线”-否则是抓不到包的-这也是整个无线破解最核心的地方"><a href="#6-另外-你的无线网卡在启动监听模式以后-网卡接口名称就变成了wlan0mon-以后只要是在aircrack套件中需要指定网卡接口名称的-都要用这个名字-在老版本的aircrack中默认名称是mon0-而新版本则统一变成了wlan0mon-恩-一切准备就绪之后-我们开始尝试扫描附近的无线接入点-找个有客户端在线的再单独监听-一定要注意-”必须要有客户端在线”-否则是抓不到包的-这也是整个无线破解最核心的地方" class="headerlink" title="6, 另外,你的无线网卡在启动监听模式以后,网卡接口名称就变成了wlan0mon,以后只要是在aircrack套件中需要指定网卡接口名称的,都要用这个名字,在老版本的aircrack中默认名称是mon0,而新版本则统一变成了wlan0mon,恩,一切准备就绪之后,我们开始尝试扫描附近的无线接入点,找个有客户端在线的再单独监听,一定要注意,”必须要有客户端在线”,否则是抓不到包的,这也是整个无线破解最核心的地方"></a>6, 另外,你的无线网卡在启动监听模式以后,网卡接口名称就变成了wlan0mon,以后只要是在aircrack套件中需要指定网卡接口名称的,都要用这个名字,在老版本的aircrack中默认名称是mon0,而新版本则统一变成了wlan0mon,恩,一切准备就绪之后,我们开始尝试扫描附近的无线接入点,找个有客户端在线的再单独监听,一定要注意,”必须要有客户端在线”,否则是抓不到包的,这也是整个无线破解最核心的地方</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> airodump-ng wlan0mon 开始尝试扫描附近的无线信号,这里就用我们自己的wifi来进行测试,用于测试的wifi的mac和热点名称如下(klionsec)</span></div></pre></td></tr></table></figure>
<p><img src="/img/8.png" alt="扫描附近的无线信号"></p>
<h5 id="7-通过上面的扫描结果-我们选定了名称为”klionsec”的wpa2无线热点作为我们的攻击目标-这里我们需要先记录下目标无线的工作信道以及对应的mac-后面单独监听时需要用到这些信息-而后单独监听目标无线热点-注意这里在监听目标无线的过程中不要断开-直到整个抓包过程完成为止-接下来要做的事情就是等待客户端上线-然后进行抓包-例如-下面就表示有一个客户端在线-其实-抓握手包的原理就是先把这个在线的用户给蹬掉线-然后再截获它的握手包-而这个包里就有我们想要的无线密码"><a href="#7-通过上面的扫描结果-我们选定了名称为”klionsec”的wpa2无线热点作为我们的攻击目标-这里我们需要先记录下目标无线的工作信道以及对应的mac-后面单独监听时需要用到这些信息-而后单独监听目标无线热点-注意这里在监听目标无线的过程中不要断开-直到整个抓包过程完成为止-接下来要做的事情就是等待客户端上线-然后进行抓包-例如-下面就表示有一个客户端在线-其实-抓握手包的原理就是先把这个在线的用户给蹬掉线-然后再截获它的握手包-而这个包里就有我们想要的无线密码" class="headerlink" title="7, 通过上面的扫描结果,我们选定了名称为”klionsec”的wpa2无线热点作为我们的攻击目标,这里我们需要先记录下目标无线的工作信道以及对应的mac,(后面单独监听时需要用到这些信息),而后单独监听目标无线热点,注意这里在监听目标无线的过程中不要断开,直到整个抓包过程完成为止,接下来要做的事情就是等待客户端上线,然后进行抓包,例如,下面就表示有一个客户端在线,其实,抓握手包的原理就是先把这个在线的用户给蹬掉线,然后再截获它的握手包,而这个包里就有我们想要的无线密码"></a>7, 通过上面的扫描结果,我们选定了名称为”klionsec”的wpa2无线热点作为我们的攻击目标,这里我们需要先记录下目标无线的工作信道以及对应的mac,(后面单独监听时需要用到这些信息),而后单独监听目标无线热点,注意这里在监听目标无线的过程中不要断开,直到整个抓包过程完成为止,接下来要做的事情就是等待客户端上线,然后进行抓包,例如,下面就表示有一个客户端在线,其实,抓握手包的原理就是先把这个在线的用户给蹬掉线,然后再截获它的握手包,而这个包里就有我们想要的无线密码</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">airodump-ng</span> <span class="selector-tag">--bssid</span> <span class="selector-tag">DC</span><span class="selector-pseudo">:EE</span><span class="selector-pseudo">:06</span><span class="selector-pseudo">:96</span><span class="selector-pseudo">:B7</span><span class="selector-pseudo">:B8</span> <span class="selector-tag">-c</span> 6 <span class="selector-tag">-w</span> <span class="selector-tag">sec</span> <span class="selector-tag">wlan0mon</span> 监听目标无线,并把截获到的数据写到指定文件中</div></pre></td></tr></table></figure>
<p><img src="/img/9.png" alt="单独监听目标无线"></p>
<h5 id="8-发现客户端在线稳定后-就可以向目标发射’ddos’流量了-直到我们在监听的终端下看到有握手包出现为止-如果第一轮包发完成后-并没看到握手包-别着急-先等个几十秒-或者隔个五六秒再发一次即可-正常情况下-基本一次就能搞定"><a href="#8-发现客户端在线稳定后-就可以向目标发射’ddos’流量了-直到我们在监听的终端下看到有握手包出现为止-如果第一轮包发完成后-并没看到握手包-别着急-先等个几十秒-或者隔个五六秒再发一次即可-正常情况下-基本一次就能搞定" class="headerlink" title="8, 发现客户端在线稳定后,就可以向目标发射’ddos’流量了,直到我们在监听的终端下看到有握手包出现为止,如果第一轮包发完成后,并没看到握手包,别着急,先等个几十秒,或者隔个五六秒再发一次即可,正常情况下,基本一次就能搞定"></a>8, 发现客户端在线稳定后,就可以向目标发射’ddos’流量了,直到我们在监听的终端下看到有握手包出现为止,如果第一轮包发完成后,并没看到握手包,别着急,先等个几十秒,或者隔个五六秒再发一次即可,正常情况下,基本一次就能搞定</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">aireplay-ng</span> <span class="selector-tag">--deauth</span> 15 <span class="selector-tag">-a</span> <span class="selector-tag">DC</span><span class="selector-pseudo">:EE</span><span class="selector-pseudo">:06</span><span class="selector-pseudo">:96</span><span class="selector-pseudo">:B7</span><span class="selector-pseudo">:B8</span> <span class="selector-tag">wlan0mon</span></div></pre></td></tr></table></figure>
<p><img src="/img/10.png" alt="开始发动ddos攻击"></p>
<p>可以看到,这时握手包已被正常抓获,监听自然也就可以断开了,注意观察终端的右上角,那个带有<code>handshake</code>标志的就是握手包的意思<br><img src="/img/11.png" alt="成功获取握手包"></p>
<h5 id="9-在我们抓获握手包以后-接下来的事情就非常简单了-你可以直接用aircrack加载弱口令字典进行爆破-当然-个人是十分不建议用字典-效率-实用性-太低-过于浪费时间-推荐大家直接把包处理一下丢给hashcat去跑就行了-两种方法具体操作如下"><a href="#9-在我们抓获握手包以后-接下来的事情就非常简单了-你可以直接用aircrack加载弱口令字典进行爆破-当然-个人是十分不建议用字典-效率-实用性-太低-过于浪费时间-推荐大家直接把包处理一下丢给hashcat去跑就行了-两种方法具体操作如下" class="headerlink" title="9, 在我们抓获握手包以后,接下来的事情就非常简单了,你可以直接用aircrack加载弱口令字典进行爆破,当然,个人是十分不建议用字典(效率,实用性,太低,过于浪费时间),推荐大家直接把包处理一下丢给hashcat去跑就行了,两种方法具体操作如下:"></a>9, 在我们抓获握手包以后,接下来的事情就非常简单了,你可以直接用aircrack加载弱口令字典进行爆破,当然,个人是十分不建议用字典(效率,实用性,太低,过于浪费时间),推荐大家直接把包处理一下丢给hashcat去跑就行了,两种方法具体操作如下:</h5><p>(1)第一种,利用aircrack加载字典进行爆破,反正我自己很少用,基本没用,先不说速度如何,关键还是看你的字典是否靠谱,实际测试中,个人并不建议用,因为根本没有靠谱性可言<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">aircrack-ng</span> <span class="selector-tag">--bssid</span> <span class="selector-tag">DC</span><span class="selector-pseudo">:EE</span><span class="selector-pseudo">:06</span><span class="selector-pseudo">:96</span><span class="selector-pseudo">:B7</span><span class="selector-pseudo">:B8</span> <span class="selector-tag">-w</span> <span class="selector-tag">pass</span><span class="selector-class">.txt</span> <span class="selector-tag">sec-01</span><span class="selector-class">.cap</span>   会有三个文件,但最终的密码在<span class="selector-tag">cap</span>文件</div></pre></td></tr></table></figure></p>
<p><img src="/img/12.png" alt="破解握手包中的无线密码"></p>
<p>(2)第二种,直接利用hashcat跑hash,不过需要事先稍微整理下数据包<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">wpaclean</span> <span class="selector-tag">wpapass</span><span class="selector-class">.cap</span> <span class="selector-tag">sec-01</span><span class="selector-class">.cap</span>  	  可以看到这里已经成功识别出了目标无线</div></pre></td></tr></table></figure></p>
<p><img src="/img/13.png" alt="提取数据包中的hash"><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> aircrack-ng wpapass.cap -J wpahash  把数据包转换成hashcat能认识的<span class="built_in">hash</span>类型</span></div></pre></td></tr></table></figure></p>
<p><img src="/img/15.png" alt="转换成hashcat认识的hash格式"><br><figure class="highlight apache"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># hashcat -m 2500 -a 3 wpahash.hccap ?u?l?l?l?l?d?d?d  因为我事先已经知道密码,所以直接这样给掩码会跑的更快一些</span></div></pre></td></tr></table></figure></p>
<p>下面是hashcat的破解结果,可以看到,像这种密码,对于hashcat来讲,几乎是瞬间就被秒出来了,因为事先忘记了把wifi改的简单点(<code>汗……</code>),所以这里不得不拿之前的一个测试案例来说明了,因为这次用于测试的wifi密码比较复杂,要是硬破,估计明年也破不出来,所以没必要在这里浪费时间,重要的是把方法告诉大家就好,测试结果并不是最重要的,能把要说明的问题说清楚即可<br><img src="/img/hash.png" alt="破解结果"><br></p>
<h5 id="10-至此-无线密码破解的经典步骤就算完成了-纵观全文-其实-并没多少技术含量在里面-跟着我的文档一步步的来-抓个包-跑个密码基本还是没什么问题的-其实-如果真的特别想关注底层的细节-不妨自己通过wireshark手工完成这一过程-可以明确告诉大家的是-这样是绝对可行的-请自行尝试"><a href="#10-至此-无线密码破解的经典步骤就算完成了-纵观全文-其实-并没多少技术含量在里面-跟着我的文档一步步的来-抓个包-跑个密码基本还是没什么问题的-其实-如果真的特别想关注底层的细节-不妨自己通过wireshark手工完成这一过程-可以明确告诉大家的是-这样是绝对可行的-请自行尝试" class="headerlink" title="10, 至此,无线密码破解的经典步骤就算完成了,纵观全文,其实,并没多少技术含量在里面,跟着我的文档一步步的来,抓个包,跑个密码基本还是没什么问题的,其实,如果真的特别想关注底层的细节,不妨自己通过wireshark手工完成这一过程,可以明确告诉大家的是,这样是绝对可行的,请自行尝试"></a>10, 至此,无线密码破解的经典步骤就算完成了,纵观全文,其实,并没多少技术含量在里面,跟着我的文档一步步的来,抓个包,跑个密码基本还是没什么问题的,其实,如果真的特别想关注底层的细节,不妨自己通过wireshark手工完成这一过程,可以明确告诉大家的是,这样是绝对可行的,请自行尝试</h5><p><br><br>一点小结:<br>&nbsp;&nbsp;&nbsp;&nbsp;在破解无线密码的问题上,大家大可不用太过纠结,破密码的最终原因和目的,也是希望能通过这种方式来在目标上开个口子,仅此而已,如果真的是哪天运气爆棚,直接捅到目标的办公网,自然是求之不得,因为毕竟是在实地,可能留给我们的时间也不会太多,更会有诸多不便,想短时间内把整个内网摸透,可能也来不及,但想办法先在目标内网留个shell稳住入口,回去接着慢慢搞,还是可行的,一般对于从外部打进去非常难的情况下,这也许也是一种切实可行的渗透手段,祝大家好运吧,不过,最后,还是有句话不得不提醒大家,访问未授权的系统本身就是违法的,望大家洁身自好……!</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/22/email-collector/">
                web渗透第一步之信息搜集  [ 搜集目标邮箱 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-22</span>
            
            
            
                <span class="category">
                    <a href="/categories/email-collect/">email collect</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br></p>
<h5 id="theharvester-主要用来从各种搜索引擎上抓取目标的邮箱-子域以及ip反查-虚拟主机-可自行更换其代码中的各种搜索api"><a href="#theharvester-主要用来从各种搜索引擎上抓取目标的邮箱-子域以及ip反查-虚拟主机-可自行更换其代码中的各种搜索api" class="headerlink" title="theharvester 主要用来从各种搜索引擎上抓取目标的邮箱,子域以及ip反查(虚拟主机),可自行更换其代码中的各种搜索api"></a>theharvester 主要用来从各种搜索引擎上抓取目标的邮箱,子域以及ip反查(虚拟主机),可自行更换其代码中的各种搜索api</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">theharvester</span> <span class="selector-tag">-d</span> <span class="selector-tag">polyu</span><span class="selector-class">.edu</span><span class="selector-class">.hk</span> <span class="selector-tag">-l</span> 1000 <span class="selector-tag">-b</span> <span class="selector-tag">all</span> &gt;&gt; <span class="selector-tag">res</span><span class="selector-class">.txt</span>   <span class="selector-tag">-f</span> 选项貌似不太好使,只能重定向了</div></pre></td></tr></table></figure>
<p><img src="/img/theharvester email.png" alt=""><br></p>
<h5 id="Maltego-一款老牌的纯图形化信息搜集工具-里面也提供了邮箱搜集功能-把结果导出为csv即可-使用非常简单-就不多啰嗦了-当然-作为一款老牌的专业信息搜集工具-它现在所支持的功能远远不止于此-后续有时间我们再单独细说"><a href="#Maltego-一款老牌的纯图形化信息搜集工具-里面也提供了邮箱搜集功能-把结果导出为csv即可-使用非常简单-就不多啰嗦了-当然-作为一款老牌的专业信息搜集工具-它现在所支持的功能远远不止于此-后续有时间我们再单独细说" class="headerlink" title="Maltego 一款老牌的纯图形化信息搜集工具,里面也提供了邮箱搜集功能,把结果导出为csv即可,使用非常简单,就不多啰嗦了,当然,作为一款老牌的专业信息搜集工具,它现在所支持的功能远远不止于此,后续有时间我们再单独细说"></a>Maltego 一款老牌的纯图形化信息搜集工具,里面也提供了邮箱搜集功能,把结果导出为csv即可,使用非常简单,就不多啰嗦了,当然,作为一款老牌的专业信息搜集工具,它现在所支持的功能远远不止于此,后续有时间我们再单独细说</h5><p><img src="/img/ltego email.png" alt=""><br></p>
<h5 id="在msf中同样也提供了一个比较粗糙的邮件搜集模块-search-email-collector-搜集范围确实很有限-暂时只能从谷歌-可能还不太好使-雅虎-bing上去爬"><a href="#在msf中同样也提供了一个比较粗糙的邮件搜集模块-search-email-collector-搜集范围确实很有限-暂时只能从谷歌-可能还不太好使-雅虎-bing上去爬" class="headerlink" title="在msf中同样也提供了一个比较粗糙的邮件搜集模块[search_email_collector][搜集范围确实很有限,暂时只能从谷歌(可能还不太好使),雅虎,bing上去爬]"></a>在msf中同样也提供了一个比较粗糙的邮件搜集模块[search_email_collector][搜集范围确实很有限,暂时只能从谷歌(可能还不太好使),雅虎,bing上去爬]</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">msf &gt; use auxiliary/gather/search_email_collector </div><div class="line">msf auxiliary(search_email_collector) &gt; show options </div><div class="line">Module options (auxiliary/gather/search_email_collector):</div><div class="line">   Name           Current Setting  Required  Description</div><div class="line">   ----           ---------------  --------  -----------</div><div class="line">   DOMAIN                          <span class="literal">yes</span>       The domain name <span class="keyword">to</span> locate email addresses <span class="keyword">for</span></div><div class="line">   OUTFILE                         <span class="literal">no</span>        A filename <span class="keyword">to</span> store the generated email list</div><div class="line">   SEARCH_BING    <span class="literal">true</span>             <span class="literal">yes</span>       <span class="builtin-name">Enable</span> Bing as a backend search engine</div><div class="line">   SEARCH_GOOGLE  <span class="literal">true</span>             <span class="literal">yes</span>       <span class="builtin-name">Enable</span> Google as a backend search engine</div><div class="line">   SEARCH_YAHOO   <span class="literal">true</span>             <span class="literal">yes</span>       <span class="builtin-name">Enable</span> Yahoo! as a backend search engine</div><div class="line"></div><div class="line">msf auxiliary(search_email_collector) &gt; <span class="builtin-name">set</span> domain polyu.edu.hk</div><div class="line">msf auxiliary(search_email_collector) &gt; run</div></pre></td></tr></table></figure>
<p><img src="/img/msf collector email.png" alt=""><br></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/20/port-hacking/">
                web渗透第一步之信息搜集  [ 端口渗透 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-20</span>
            
            
            
                <span class="category">
                    <a href="/categories/port-hacking/">port hacking</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br>1,个人认为最靠谱的端口扫描工具,非telnet莫属,没有之一,如果你只是想快速地探测目标的某几个端口是否开放,直接telnet一下,无疑是极好的也根本犯不着用什么专业端口扫描工具去抱着扫,这样做可以有效避免因为某些工具动静儿太大,所造成的一些不必要的麻烦,如,触发对方防护报警,简单使用实例,如下:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># telnet cciv.cityu.edu.hk 443</span></div><div class="line"><span class="comment"># telnet cciv.cityu.edu.hk 3389</span></div></pre></td></tr></table></figure></p>
<p><br><br>2,除了用telnet对某单个机器进行快速的端口探测之外,如果我们想短时间内对多个目标批量进行端口扫描,又该怎么办呢,这里就来简单介绍下两款自己常用的公网端口扫描工具,masscan和zmap,同是基于无状态的的端口扫描,顺便科普下什么是无状态,简单来说,普通的端口扫描工具,在发出请求包以后还有一个等待数据回应的过程,然后根据回应的数据包头标志(不同系统平台的协议栈对每种标志的数据包响应状态是不一样的)以此来判断某个端口或者服务是是否开放,是什么操作系统等等……但这样做,无疑会很大程度上拖慢扫描速度,所以,后来大牛们就搞出了无状态扫描,这就意味着,当请求包发送以后就被不再管了,也不再等待回应,所有的验证都放在数据包本身,这可能也是它快的主要原因,另外此类工具为了减少触发目标ids的几率,都采用了一种分组扫描算法,让扫描的ip随机分布[尽可能规避目标防护],而不是密麻集中在某个点……好了,简单科普就先到这里,过深的东西,也不是我目前的能力所能企及的,关键我们能把工具用起来就行,接着就来介绍下两款工具的一些常规用法,实际渗透中,个人更推荐masscan…原因我这里不多嘴了,自行慢慢体会吧<br><br><br>3,masscan [扫描速度取决于你的实际带宽,默认只扫描tcp端口,但也可扫udp]:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">https:</span>/<span class="regexp">/github.com/robertdavidgraham</span><span class="regexp">/masscan</span></div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">masscan 常用选项:</div><div class="line"></div><div class="line">-p 	指定要扫描的端口,多个端口用逗号隔开</div><div class="line">--rate  	指定发包速率</div><div class="line">--open-only 	仅仅显示开放的端口 </div><div class="line">--banners 	获取banners</div><div class="line">-c      使用自定义的扫描配置文件</div><div class="line">--ping  扫之前是否要ping下</div><div class="line">-oL     把扫描结果保存到指定文件中</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">masscan 配置文件格式,如下:</div><div class="line"><span class="comment">#klion masscan     	# '#'表注释</span></div><div class="line">rate =<span class="number">1000.00</span>       	<span class="comment"># 指定发包速率,根据自己的实际带宽计算</span></div><div class="line">output-format=list 	<span class="comment"># 指定扫描结果保存的文件格式</span></div><div class="line">output-status=open 	<span class="comment"># 只保存开放的端口信息</span></div><div class="line">output-filename=<span class="regexp">/root/</span>Desktop/port_hacking.txt 	<span class="comment"># 指定要把扫描的结果文件保存到哪里</span></div><div class="line">ports=<span class="number">80</span>,<span class="number">443</span>,<span class="number">8080</span>,<span class="symbol">U:</span><span class="number">53</span>  <span class="comment"># 指定要扫描的端口,默认tcp,当然,你也可以指定UDP的端口,U即udp </span></div><div class="line">range=<span class="number">203.174</span>.<span class="number">48.0</span>/<span class="number">24</span>   <span class="comment"># 指定要扫描的ip端,可以连续多个,记得逗号隔开就好了</span></div><div class="line">ping=<span class="literal">false</span>              <span class="comment"># 扫描的时候要不要先ping下,true表示真,即ping</span></div><div class="line">banners=<span class="literal">true</span>		<span class="comment"># 获取banner</span></div><div class="line">excludefile=<span class="regexp">/etc/zmap</span><span class="regexp">/blacklist.conf	# 指定不扫描的ip端,可以把不想扫描的一些ip加到这个文件中,如:内网ip段是不需要扫的</span></div></pre></td></tr></table></figure>
<p><img src="/img/masscan config.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">masscan 实例用法[支持同时进行tcp及udp扫描]:</div><div class="line"><span class="comment"># masscan --rate=1000 -p21,22,23,25,U:69,110,143,U:161,80,81,82,83,88,443,445,512,513,514,1433,1521,2082,2083,2181,2601,2604,3128,3690,4848,8088,8086,8081,8080,3306,5432,3389,5984,6379,7001,7002,8069,9200,9300,11211,10000,27017,27018,50000,50070,50030 --banners 202.181.132.0/24 103.15.135.0/24 203.174.48.0/24 203.124.10.0/24 202.65.218.0/24 202.181.196.0/24 -oL port_hacking.txt</span></div></pre></td></tr></table></figure>
<p><img src="/img/masscan manual.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># masscan -c masscan.conf  直接加载自定义配置进行扫描</span></div></pre></td></tr></table></figure>
<p><img src="/img/masscan config res.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">筛选特定服务特征:</div><div class="line"><span class="comment"># cat port_hacking.txt | grep "ProFTPD"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "vsFTPd"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "FileZilla Server"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "Microsoft FTP Service"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "Pure-FTPd"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "OpenSSH"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "Remote Management Console"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "User Access Verification"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "Welcome to the server management"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "imap"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "smtp"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "pop"</span></div><div class="line"><span class="comment"># cat port_hacking.txt | grep "snmp"</span></div></pre></td></tr></table></figure>
<p><img src="/img/masscan manual ftp.png" alt=""><br></p>
<p>4,zmap [扫描速度取决于你对的实际带宽,不过,在实际测试中准确率要比masscan稍差,同样的目标,masscan能扫出来,zmap却扫不出来]:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">官方站点: <span class="symbol">https:</span>/<span class="regexp">/zmap.io</span></div></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">zmap常用选项:</div><div class="line">[注意:如果你要手工指定选项,就必须先把zmap.conf文件中的所有选项都注释掉,不然会出错,原因暂未知,貌似它默认应该会先读取这个文件,一般我都是直接注释掉,不用它默认的配置文件,而直接手工指定选项]:</div><div class="line">-p  指定要扫描的端口</div><div class="line">-b  指定扫描ip黑名单,如,内网ip,我们是不需要扫的</div><div class="line">-o  保存扫描结果到指定的文件中</div><div class="line">-w  可以把要扫描的ip段事先都放在一个文件中,进行批量扫描,注意格式,一行对应一个段[ip]</div><div class="line">-r  指定扫描发包速率</div><div class="line">-B  指定你的实际带宽,比如你带宽10M,实际指定4-6M即可</div><div class="line">-C  也可以直接加载自定义配置文件进行扫描</div><div class="line">-s  在扫描完成后进行简单汇总</div><div class="line">--probe-module=icmp_echoscan   	icmp模式扫描</div><div class="line">--probe-module=udp   		udp模式扫描</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">zmap配置文件选项说明:</div><div class="line"></div><div class="line">interface <span class="string">"eth0"</span>   		<span class="comment"># 指定用于扫描的网卡接口</span></div><div class="line">probe-<span class="class"><span class="keyword">module</span> <span class="title">tcp_synscan</span>	<span class="comment"># 扫描模式,默认是是tcp的syn</span></span></div><div class="line">target-port <span class="number">3389</span>	<span class="comment"># 要扫描的端口</span></div><div class="line">rate <span class="number">100</span>		<span class="comment"># 设置发包速率</span></div><div class="line">bandwidth <span class="number">1</span>M		<span class="comment"># 设置带宽</span></div><div class="line">blacklist-file <span class="string">"/etc/zmap/blacklist.conf"</span>	<span class="comment"># 指定ip黑名单</span></div><div class="line">output-file <span class="string">"/root/Desktop/port_res.txt"</span>	<span class="comment"># 指定扫描结果的存放位置</span></div></pre></td></tr></table></figure>
<p><img src="/img/zmap config.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">zmap 常规用法[支持tcp,udp,icmp模式扫描,最好不要挂vpn扫,即使加上--vpn貌似也不太好使]:</div><div class="line"><span class="comment"># zmap -B 1M  -p [21,22,23,25,110,143,80,81,82,83,88,443,445,512,513,514,1433,1521,2082,2083,2181,2601,2604,3128,3690,4848,8088,8086,8081,8080,3306,5432,3389,5984,6379,7001,7002,8069,9200,9300,11211,10000,27017,27018,50000,50070,50030] -b /etc/zmap/blacklist.conf -r 1000 202.181.132.0/24 -o Desktop/port_res.txt</span></div></pre></td></tr></table></figure>
<p><img src="/img/zmap mausal.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># zmap -C /etc/zmap/zmap.conf 202.181.132.0/24  加载自定配置文件进行扫描</span></div></pre></td></tr></table></figure>
<p><img src="/img/zmap config res.png" alt=""><br></p>
<p>5,在用上面两款工具时,有些地方还是需要注意下:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">实际使用中,最好先根据你的实际带宽估算下最合适的发包速率,因为你的带宽和发包的速率会直接影响扫描结果的准确性</div><div class="line">像这类的工具一般对带宽和速率的控制要求比较高,还有,在扫描之前它会预先提示你要扫描多少台机器,机器的多少也是根据你所给的掩码自动算出来的</div><div class="line">扫完以后,先随便telnet几个ip的端口,看看准确度如何,务必不要过度的依赖这些工具扫出来的结果</div><div class="line">不单单是针对这两款工具,对所有工具都是如此,理解作者的实际编写思路比使用工具本身更重要</div><div class="line">即使你暂时还写不出来很优秀的代码,但总有一天你会写出来的,嘿嘿……</div><div class="line">假如以后你想在这方面继续深入,这些都是很优秀的学习样板,所以过硬的编码能力在任何时候都跑不掉,贵在坚持嘛</div></pre></td></tr></table></figure></p>
<p><br><br>6,最后再来看下老旧的 nmap,作为一款家喻户晓的探测工具,想必大家对它早已经非常熟悉[一直为人诟病的是老版本速度非常慢,可能是发包然后等待验证的过程比较复杂吧,不过,新版本确实已经改进不少],一般在linux目标机器中稍微懂一些的运维都会把这个预先装上,这样一来也极大的方便了我们:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># nmap -v 192.168.3.240  扫描某单个目标[目标可以是域名,ip后者ip端]</span></div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># nmap -iL ip.txt  	同时扫描多个目标,把目标的ip事先放在一个文件中,每行对应一个ip</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># nmap -Pn 192.168.3.240  	扫描前不要ping</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># nmap -sV -v 192.168.3.240  探测远程主机的详细的服务列表[可能会耗时较长]</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># nmap -O -v 192.168.3.240   探测远程操作系统版本类型</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">扫描自己指定的端口,默认如果不指定端口,它会自动扫描<span class="number">1000</span>个高危端口</div><div class="line"><span class="comment"># nmap -p 80,81,82,83,84,1433  192.168.3.189</span></div><div class="line"><span class="comment"># nmap -p U:53,111,137,T:21-25,80,139,8080 192.168.3.189</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">全面扫描目标主机的所有信息,包括操作系统,端口,服务,相当于-O -sV 的综合选项……</div><div class="line"><span class="comment"># nmap -A  -v 192.168.3.240</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">快速扫描整个C段,速度级别从<span class="number">0</span>到<span class="number">5</span>,默认用的icmp请求,极易被防火墙阻拦</div><div class="line"><span class="comment"># nmap -T5 -v 192.168.3.240</span></div><div class="line"><span class="comment"># nmap -T5 -v 192.168.3.0/24</span></div><div class="line"><span class="comment"># nmap -T5 --open 192.168.3.0/24</span></div><div class="line"><span class="comment"># nmap -v  192.168.3.1-10</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># nmap --packet-trace  192.168.3.0/24  观察扫描时的详细发包过程</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># nmap -sU 192.168.3.240  所谓隐蔽的UDP扫描,其实并不隐蔽</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">几种常用的扫描方式,tcp的syn和ack扫描另外还有connect(推荐用这个)</div><div class="line"><span class="comment"># nmap -sT 192.168.3.240  个人推荐的扫描方式</span></div><div class="line"><span class="comment"># nmap -sS 192.168.3.240</span></div><div class="line"><span class="comment"># nmap -sA 192.168.3.240</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">内网arp扫描,探测内网存活主机还是非常不错的,可轻易bypass掉各种应用层防火墙,个人比较推荐的选项 -sn 禁用端口扫描</div><div class="line"><span class="comment"># nmap -sn -PR 192.168.3.0/24</span></div></pre></td></tr></table></figure>
<p>至于其它的选项就不一一细说了,实战中,根据目标实际情况做下相应的调整即可,下面我们就来看下常用的一些nmap扫描脚本[这也可能是nmap最具实战价值的地方]:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">dns漏洞扫描脚本:</div><div class="line">dns-check-zone.nse	检查传送</div><div class="line">dns-brute.nse   	子域爆破</div><div class="line">traceroute-geolocation.nse	获取域名的地理位置</div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ftp漏洞扫描脚本:</div><div class="line">ftp-anon.nseftp			允许匿名登录</div><div class="line">ftp-proftpd-backdoor.nse	proftp后门</div><div class="line">ftp-vsftpd-backdoor.nse		vsftp后门</div><div class="line">ftp-vuln-cve201<span class="number">0</span>-<span class="number">4221</span>.nseProFTPD <span class="number">1.3</span>.x 	多个模块目录遍历和缓冲区溢出漏洞</div><div class="line">tftp-enum.nse			扫描tftp</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">中间件漏洞扫描脚本:</div><div class="line">hostmap-bfk.nse 	扫同服站点</div><div class="line">http-iis-short-name-brute.nse 	短文件扫描</div><div class="line">http-iis-webdav-vuln.nse  </div><div class="line">http-put.nse</div><div class="line">http-shellshock.nse</div><div class="line">http-svn-enum.nse</div><div class="line">http-vuln-cve2015-<span class="number">1427</span>.nse</div><div class="line">http-vuln-cve2015-<span class="number">1635</span>.nse</div><div class="line">http-rfi-spider.nse </div><div class="line">http-php-version.nse</div><div class="line">iax2-version.nse</div><div class="line">rdp-vuln-ms12-<span class="number">020</span>.nse</div><div class="line">redis-info.nse</div><div class="line">samba-vuln-cve-<span class="number">2012</span>-<span class="number">1182</span>.nse</div><div class="line">smb-vuln-ms08-<span class="number">067</span>.nse</div><div class="line">smb-vuln-ms17-<span class="number">010</span>.nse</div><div class="line">vnc-info.nse</div><div class="line">http-robots.txt.nse</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">开源web程序探测脚本:</div><div class="line">http-wordpress-brute.nse</div><div class="line">http-joomla-brute.nse</div><div class="line">http-drupal-enum.nse</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">类数据库扫描及爆破脚本:</div><div class="line">ms-sql-info.nse</div><div class="line">ms-sql-brute.nse</div><div class="line">mongodb-brute.nse</div><div class="line">mysql-enum.nse</div><div class="line">mysql-empty-password.nse</div><div class="line">pgsql-brute.nse</div><div class="line">oracle-brute.nse</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">内网相关扫描模块:</div><div class="line">smb-os-discovery.nse</div><div class="line">smb-psexec.nse</div><div class="line">smb-system-info.nse</div><div class="line">smb-brute.nse</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">简单的邮箱爆破:</div><div class="line">smtp-brute.nse</div><div class="line">imap-brute.nse</div><div class="line">pop3-brute.nse</div></pre></td></tr></table></figure>
<p>7,如何快速对目标网站的一些基本情况做出判断,如,对方用的什么web服务器,后端脚本是什么,数据库什么型号版本,系统平台是什么等……,下面就来简单熟悉一些常见的web架构:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">asp  + access + iis6.<span class="number">0</span> + <span class="number">2003</span></div><div class="line">aspx + mssql2005/mssql2008 + iis7.<span class="number">0</span> + <span class="number">2008</span></div><div class="line">php[<span class="number">5.2</span>,<span class="number">5.4</span>,<span class="number">5.6</span>]  + mysql[<span class="number">5.1</span>,<span class="number">5.5</span>]/postgresql + apache[<span class="number">2.2</span>,<span class="number">2.4</span>] + linux/windows</div><div class="line">php + mysql + ngnix + linux</div><div class="line">jsp  + oracle + tomcat + linux/windows</div><div class="line">java + mssql  + tomcat + linux/windows</div><div class="line">……</div></pre></td></tr></table></figure></p>
<p>利用httprint 识别web目标服务器指纹[其实很鸡肋的一个小工具,一般看下响应头就有了]:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># httprint -h 144.214.20.118 -s ./Desktop/signature.txt</span></div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">web服务器指纹字典下载地址:</div><div class="line"><span class="symbol">http:</span>/<span class="regexp">/www.net-square.com/signature</span>.txt</div></pre></td></tr></table></figure>
<p>常用的几个相对比较实用的firefox插件,自己在配置渗透环境的时候最好预先装上:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">hackbar</div><div class="line">tamper data</div><div class="line">live http headers</div><div class="line">firebug</div><div class="line">downthemall</div></pre></td></tr></table></figure></p>
<p>使用whatweb[探测到的信息相对比较全面],返回的结果中大致包括以下内容:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">请求返回的状态码</div><div class="line">web服务器版本</div><div class="line">ip所在国家</div><div class="line">操作系统详细的版本信息</div><div class="line">脚本语言版本信息</div><div class="line">域名解析到的ip</div><div class="line">截取并显示网站标题</div><div class="line">等等……</div></pre></td></tr></table></figure></p>
<p>如何快速判断目标使用的系统平台:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>,在url中尝试变化大小写,进行请求,观察页面响应,windows默认对大小写不敏感,linux则严格区分大小写,所以返回的页面肯定是不一样的</div><div class="line"><span class="number">2</span>,观察各种报错信息,看看里面有没有泄露服务器的相关信息</div><div class="line"><span class="number">3</span>,等等……</div></pre></td></tr></table></figure></p>
<p>8,一些常见端口的渗透用途汇总:</p>
<table>
<thead>
<tr>
<th>端口号</th>
<th style="text-align:center">端口服务/协议简要说明</th>
<th style="text-align:center">关于端口可能的一些渗透用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>tcp 20,21</td>
<td style="text-align:center">ftp 的默认数据和命令传输端口</td>
<td style="text-align:center">可能允许匿名上传下载,爆破,嗅探,提权,远程溢出(proftpd 1.3.5),后门(vsftp 2.3.4)</td>
</tr>
<tr>
<td>tcp 22</td>
<td style="text-align:center">ssh[数据ssl加密传输]</td>
<td style="text-align:center">爆破,28个退格漏洞(grub2漏洞),ssh隧道及内网代理转发,一般用于linux远程管理</td>
</tr>
<tr>
<td>tcp 23</td>
<td style="text-align:center">telnet[明文传输]</td>
<td style="text-align:center">爆破,嗅探,一般常用于路由登陆,可尝试弱口令,也许会有意想不到的收获</td>
</tr>
<tr>
<td>tcp 25</td>
<td style="text-align:center">smtp[简单邮件传输协议,linux可能会默认开启]</td>
<td style="text-align:center">邮件伪造,vrfy/expn 查询邮件用户信息,可使用smtp-user-enum工具来自动跑</td>
</tr>
<tr>
<td>tcp/udp 53</td>
<td style="text-align:center">dns[域名解析]</td>
<td style="text-align:center">检查区域传送,可dns劫持,缓存投毒,欺骗以及dns隧道</td>
</tr>
<tr>
<td>tcp/udp 69</td>
<td style="text-align:center">tftp[简单文件传输协议,无认证]</td>
<td style="text-align:center">直接尝试下载服务器的各种配置文件,例如:/etc/passwd等……</td>
</tr>
<tr>
<td>tcp 80-89/443/8080-8089</td>
<td style="text-align:center">web[各种常用的web服务端口]</td>
<td style="text-align:center">web top10,vpn,owa,各类java控制台弱口令,oa,struts2,iis5,6.x写利用,短文件等等……</td>
</tr>
<tr>
<td>tcp 110</td>
<td style="text-align:center">pop3[邮局协议]</td>
<td style="text-align:center">可尝试爆破,嗅探</td>
</tr>
<tr>
<td>tcp 137/139/445</td>
<td style="text-align:center">samba[smb实现windows和linux间文件共享]</td>
<td style="text-align:center">可尝试爆破,远程执行(ms17-010),嗅探等……</td>
</tr>
<tr>
<td>tcp 143</td>
<td style="text-align:center">imap</td>
<td style="text-align:center">可尝试爆破</td>
</tr>
<tr>
<td>udp 161</td>
<td style="text-align:center">snmp</td>
<td style="text-align:center">默认community为public,信息搜集</td>
</tr>
<tr>
<td>tcp 389</td>
<td style="text-align:center">ldap[轻量级目录访问协议]</td>
<td style="text-align:center">ldap注入,弱口令,未授权访问</td>
</tr>
<tr>
<td>tcp 512/513/514</td>
<td style="text-align:center">linux rexec</td>
<td style="text-align:center">rlogin登陆</td>
</tr>
<tr>
<td>tcp 873</td>
<td style="text-align:center">rsync服务</td>
<td style="text-align:center">未授权访问</td>
</tr>
<tr>
<td>tcp 1352</td>
<td style="text-align:center">lotus</td>
<td style="text-align:center">弱口令,信息泄漏,源代码,爆破</td>
</tr>
<tr>
<td>tcp 1433</td>
<td style="text-align:center">mssql数据库</td>
<td style="text-align:center">注入,提权,sa弱口令,爆破</td>
</tr>
<tr>
<td>tcp 1521</td>
<td style="text-align:center">oracle数据库</td>
<td style="text-align:center">tns爆破,注入</td>
</tr>
<tr>
<td>tcp 1025,111,2049</td>
<td style="text-align:center">nfs</td>
<td style="text-align:center">未授权访问</td>
</tr>
<tr>
<td>tcp 2082,2083</td>
<td style="text-align:center">cpanel主机管理登录</td>
<td style="text-align:center">弱口令</td>
</tr>
<tr>
<td>tcp 2181</td>
<td style="text-align:center">zookeeper</td>
<td style="text-align:center">未授权访问</td>
</tr>
<tr>
<td>tcp 2601,2604</td>
<td style="text-align:center">zebra路由</td>
<td style="text-align:center">默认密码zerbra</td>
</tr>
<tr>
<td>tcp 3128</td>
<td style="text-align:center">squid默认端口</td>
<td style="text-align:center">弱口令</td>
</tr>
<tr>
<td>tcp 3312/3311</td>
<td style="text-align:center">kangle主机管理登录</td>
<td style="text-align:center">弱口令</td>
</tr>
<tr>
<td>tcp 3306</td>
<td style="text-align:center">mysql数据库</td>
<td style="text-align:center">注入,提权,爆破</td>
</tr>
<tr>
<td>tcp 3389</td>
<td style="text-align:center">windows rdp远程桌面</td>
<td style="text-align:center">shift后门,爆破,ms12-020[远程蓝屏]</td>
</tr>
<tr>
<td>tcp 4848</td>
<td style="text-align:center">glassfish控制台</td>
<td style="text-align:center">弱口令</td>
</tr>
<tr>
<td>tcp 4899</td>
<td style="text-align:center">radmin远程桌面管理工具</td>
<td style="text-align:center">提权</td>
</tr>
<tr>
<td>tcp 5000</td>
<td style="text-align:center">sybase/DB2数据库</td>
<td style="text-align:center">爆破,注入</td>
</tr>
<tr>
<td>tcp 5432</td>
<td style="text-align:center">postgresql数据库</td>
<td style="text-align:center">爆破,注入,弱口令</td>
</tr>
<tr>
<td>tcp 5632</td>
<td style="text-align:center">pcanywhere远程桌面管理工具</td>
<td style="text-align:center">提权,代码执行</td>
</tr>
<tr>
<td>tcp 5900/5901/5902</td>
<td style="text-align:center">vnc远程桌面管理工具</td>
<td style="text-align:center">弱口令</td>
</tr>
<tr>
<td>tcp 5984</td>
<td style="text-align:center">CouchDB</td>
<td style="text-align:center">未授权</td>
</tr>
<tr>
<td>tcp 6379</td>
<td style="text-align:center">redis未授权</td>
<td style="text-align:center">爆破弱口令,未授权访问</td>
</tr>
<tr>
<td>tcp 7001,7002</td>
<td style="text-align:center">weblogic控制台</td>
<td style="text-align:center">java反序列化/弱口令</td>
</tr>
<tr>
<td>tcp 7778</td>
<td style="text-align:center">kloxo</td>
<td style="text-align:center">主机面板登录</td>
</tr>
<tr>
<td>tcp 8069</td>
<td style="text-align:center">zabbix</td>
<td style="text-align:center">远程命令执行</td>
</tr>
<tr>
<td>tcp 8080-8089</td>
<td style="text-align:center">Jenkins,jboss</td>
<td style="text-align:center">控制台弱口令</td>
</tr>
<tr>
<td>tcp 9080-9081/9090</td>
<td style="text-align:center">websphere控制台</td>
<td style="text-align:center">java反序列化/弱口令</td>
</tr>
<tr>
<td>tcp 9200,9300</td>
<td style="text-align:center">elasticsearch</td>
<td style="text-align:center">命令执行</td>
</tr>
<tr>
<td>tcp 11211</td>
<td style="text-align:center">memcacache</td>
<td style="text-align:center">未授权访问</td>
</tr>
<tr>
<td>tcp 27017/27018</td>
<td style="text-align:center">mongodb</td>
<td style="text-align:center">爆破,未授权访问</td>
</tr>
<tr>
<td>tcp 3690</td>
<td style="text-align:center">svn服务</td>
<td style="text-align:center">svn泄露,未授权访问</td>
</tr>
<tr>
<td>tcp 50000</td>
<td style="text-align:center">SAP</td>
<td style="text-align:center">命令执行</td>
</tr>
<tr>
<td>tcp 50070,50030</td>
<td style="text-align:center">hadoop</td>
<td style="text-align:center">默认端口未授权访问</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>8,说了这么多,想必大家应该很清楚这些端口具体该怎么利用了</p>
<p>9,最后,在介绍个小脚本,whatportis 专门用来查询某个端口的具体作用</p>
<p>10,如果你有兴趣,想对某个国家网段进行大规模扫描也可以把它写成这样,当然,我这里是随便写的,你要想实际用,可能还要好好把它完善一下<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></div><div class="line">while read LINE</div><div class="line">do</div><div class="line">   masscan -p 21 --rate=100 $LINE | tee -a 21.txt</div><div class="line">done &lt; hk_ip.txt</div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># tail -f 21.txt</span></div><div class="line"><span class="comment"># awk &#123;'print $6'&#125; 21.txt &gt;&gt; result.txt</span></div><div class="line"><span class="comment"># nmap -p 21 -iL result.txt  -oN ftp_anonymous.txt  -v --script ftp-anon.nse</span></div></pre></td></tr></table></figure>
<p><br></p>
<h5 id="一点小结"><a href="#一点小结" class="headerlink" title="一点小结:"></a>一点小结:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;关于端口渗透,如果不是你自己写工具的情况下,其实本身并没多少技术含量,工具总体使用上还是比较简单的[对于无状态扫描的具体内部实现还是比较复杂的,至今为止,我自己也有很多东西都没整明白],这个东西怎么说呢,很多是运气和经验的成分在里面,可能还要外加一个高质量的字典,另外,再多说一句,在没有十足的把握的情况下,直接在公网爆破是不太靠谱的,实际测试中,对一些稍有防护的目标,爆破的成率还是蛮低的[虽然低,但往往非常有效,走投无路不妨尝试],当然啦,对于端口,爆破只是一个很小的方面,比如,当我们发现某个工具或者系统服务存在远程溢出或者代码执行[肯定不仅限于此类的可远程利用的漏洞],就可以通过这种方式大规模的批量实施端口入侵,这也许才是它真正的价值所在,可能还有很多其它的小工具,脚本这里都没提到,不过那些都不太重要,对于公网扫描,有这些,足矣,至于那些,后期到内网中我们再具体说不迟,祝大家好运!<br><br></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/18/inside-method/">
                web渗透第一步之信息搜集  [ 找目标内网入口 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-18</span>
            
            
            
                <span class="category">
                    <a href="/categories/dirscan-tools/">dirscan tools</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br></p>
<h5 id="为什么要找内网入口"><a href="#为什么要找内网入口" class="headerlink" title="为什么要找内网入口:"></a>为什么要找内网入口:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;我们渗透的最终目的大多数都是目标内网,有些核心敏感数据(比如,个人机上的一些数据),我们从边界机器是拿不到的,所以,只能深入内部,当然,这里所指的内部文件数据,并不仅限于数据库,邮件这类数据,可能由于各种各样的需求,我们还需要某些个人的数据或者组织的各种业务数据,技术的各种数据等等,一般情况下,渗透web的目的,很大程度上也是希望能从web边界直接进入到目标内部(内网),对于apt来讲,价值比较高的东西基本也全部在内部,不得不承认的是,有时候公开信息调研确实也能找到部分敏感信息,但那个含金量和时效性就远远不如内网中的了,至于如何深入到目标内部,很大程度上也取决于,我们能不能尽可能多的找到目标可能的内网入口</p>
<h5 id="1-第一种-通过vpn进入目标内网-一般都会提供一个web端的443端口表单验证"><a href="#1-第一种-通过vpn进入目标内网-一般都会提供一个web端的443端口表单验证" class="headerlink" title="1,第一种,通过vpn进入目标内网[一般都会提供一个web端的443端口表单验证]:"></a>1,第一种,通过vpn进入目标内网[一般都会提供一个web端的443端口表单验证]:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;vpn,想必大家都已经非常熟悉了,在前面也已经详细说明过它的用途,除了能帮我们翻墙当跳板之外,对于一些大型目标组织或是跨国公司,他们大部分都会选择利用vpn的方式来协作办公,通过vpn在公网上开辟一条专有通道,以方便公司内部的各种业务处理,但有个前提,你要想进入这条通道,必须有正确的vpn账号密码和vpn服务器地址,登陆成功后,才能处在目标的内网中,重点也就在这里,怎么搞到目标的vpn账号密码呢,嘿嘿……方法比较多,例如,发信钓鱼,搜集目标泄露过的各种配置文件,社工撞库……</p>
<h5 id="2-利用各类邮件程序自身的漏洞尝试从web边界进入目标内网-下面就简单介绍一种常见的web邮件程序-这里为什么一定要是邮件程序呢-不同于普通的web网站-普通的web服务器有时候即使拿到shell-但有可能机器并不在内网或者该机器上根本没有内网网卡-但邮件服务器一般都被会用来处理内部实际业务-从个人经验来看-web邮件程序的机器-绝大部分都在内网"><a href="#2-利用各类邮件程序自身的漏洞尝试从web边界进入目标内网-下面就简单介绍一种常见的web邮件程序-这里为什么一定要是邮件程序呢-不同于普通的web网站-普通的web服务器有时候即使拿到shell-但有可能机器并不在内网或者该机器上根本没有内网网卡-但邮件服务器一般都被会用来处理内部实际业务-从个人经验来看-web邮件程序的机器-绝大部分都在内网" class="headerlink" title="2,利用各类邮件程序自身的漏洞尝试从web边界进入目标内网,下面就简单介绍一种常见的web邮件程序,[这里为什么一定要是邮件程序呢,不同于普通的web网站,普通的web服务器有时候即使拿到shell,但有可能机器并不在内网或者该机器上根本没有内网网卡,但邮件服务器一般都被会用来处理内部实际业务,从个人经验来看,web邮件程序的机器,绝大部分都在内网]:"></a>2,利用各类邮件程序自身的漏洞尝试从web边界进入目标内网,下面就简单介绍一种常见的web邮件程序,[这里为什么一定要是邮件程序呢,不同于普通的web网站,普通的web服务器有时候即使拿到shell,但有可能机器并不在内网或者该机器上根本没有内网网卡,但邮件服务器一般都被会用来处理内部实际业务,从个人经验来看,web邮件程序的机器,绝大部分都在内网]:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;owa 微软自家的exchange服务,企业为了便于统一协作管理,一般都会直接把exchange服务部署在域内,邮箱名称和邮箱密码大部分也直接是域内的系统账号密码,可以直接拿来登陆域内系统,当然,vpn也是可以尝试的,关键还是看目标具体是怎么部署的了,至于,如何搞到目标的owa的账号密码,嘿嘿……后面再总结吧,包括命令行邮件导出成pst文件,如果目标部署的有exchange server 一般直接访问下/owa/auth即可看到,服务被部署好以后管理员没有特殊情况基本就不怎么会关注/owa/auth目录下的文件了,所以当你拿到权限后,在这儿放个webshell,还是很靠谱的,一般都是web的443端口,另外,对于owa本身几乎是没什么漏洞的</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">owa的一般入口如下:</div><div class="line"><span class="symbol">https:</span>/<span class="regexp">/remote.bmtjfa.com.au/owa</span><span class="regexp">/auth/logon</span>.aspx机器在域内的情况</div><div class="line"><span class="symbol">https:</span>/<span class="regexp">/mail.advancedptsm.com/owa</span><span class="regexp">/auth/logon</span>.aspx机器不在域内的情况</div><div class="line"></div><div class="line">如果没有删的话,可以访问下面的路径爆出服务器信息:</div><div class="line"><span class="symbol">https:</span>/<span class="regexp">/mail.xxx.com/owa</span><span class="regexp">/auth/test</span>.aspx</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Mirapoint邮件系统:</div><div class="line">ShellShock漏洞,漏洞地址如下:</div><div class="line"><span class="symbol">http:</span>/<span class="regexp">/xxxx.com/cgi</span>-bin/search.cgi</div><div class="line"><span class="symbol">http:</span>/<span class="regexp">/xxxx.com/cgi</span>-bin/madmin.cgi</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">KerioConnect 邮件系统:</div><div class="line">一般后台只能内网访问,入口如下:</div><div class="line"><span class="symbol">https:</span>/<span class="regexp">/mail.xxx.com:4040/admin</span><span class="regexp">/login/</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Zimbra 邮件系统: </div><div class="line">本地包含,入口:</div><div class="line"><span class="symbol">https:</span>/<span class="regexp">/webmail.xxx.com:7071/zimbra</span>Admin/</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">查看zimbra版本:</div><div class="line"><span class="symbol">https:</span>/<span class="regexp">/webmail.xxx.com/help</span><span class="regexp">/zh_CN/standard</span><span class="regexp">/version.htm</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Atmail 邮件系统: </div><div class="line">敏感信息泄露问题[数据库账号密码]:</div><div class="line"><span class="symbol">http:</span>/<span class="regexp">/www.xxx.com/config</span><span class="regexp">/dbconfig.ini</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Lotus Domino <span class="symbol">Webmail:</span></div><div class="line">越权访问,<span class="symbol">inurl:</span>.nsf/WebHelp/!OpenPage</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">TurboMail邮件系统: </div><div class="line">默认配置不当可进入任意邮箱,默认有四个root域账号,一个管理员,三个普通用户</div><div class="line">由于设置缺陷,导致普通用户可以查看任意用户的密码</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">U-<span class="symbol">mail:</span></div><div class="line">sql注入,可写shell</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">WinMail:</span></div><div class="line">非授权访问/权限绕过</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ExtMail :</div><div class="line">老版本注入</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SquirrelMail</div></pre></td></tr></table></figure>
<h5 id="3-找目标的oa系统或者图书馆之类的网站以及各种边界网络设备的web管理端-一般像这些东西跟内网的联系比较大"><a href="#3-找目标的oa系统或者图书馆之类的网站以及各种边界网络设备的web管理端-一般像这些东西跟内网的联系比较大" class="headerlink" title="3,找目标的oa系统或者图书馆之类的网站以及各种边界网络设备的web管理端[一般像这些东西跟内网的联系比较大]:"></a>3,找目标的oa系统或者图书馆之类的网站以及各种边界网络设备的web管理端[一般像这些东西跟内网的联系比较大]:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;oa本来就是为了方便员工远程办公,处理公司各种业务用的,但,这也给我们提供了通往目标内部的入口至于,为什么非要选则图书馆,目的很显然,既然是图书馆,你肯定会想到内部的什么图书管理系统,实际经验也证明,大多数图书馆的站,都会处在内网中找各种网络设备的web管理端,主要是想登进去以后,看看有没有可以上传shell的地方,也许可以利用得到</p>
<h5 id="4-在你能力足够的情况下-直接搞路由也是可以的-比如-cisco-端口镜像-抓包分析-说实话自己对路由并不是非常擅长"><a href="#4-在你能力足够的情况下-直接搞路由也是可以的-比如-cisco-端口镜像-抓包分析-说实话自己对路由并不是非常擅长" class="headerlink" title="4,在你能力足够的情况下,直接搞路由也是可以的[比如,cisco,端口镜像,抓包分析,说实话自己对路由并不是非常擅长]:"></a>4,在你能力足够的情况下,直接搞路由也是可以的[比如,cisco,端口镜像,抓包分析,说实话自己对路由并不是非常擅长]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">路由作为一种边界设备,搞它的意义就不用再多说了吧</div></pre></td></tr></table></figure>
<h5 id="5-暴露在边界的目标打印机-智能点儿的打印机都会自带一些web服务-通常是java"><a href="#5-暴露在边界的目标打印机-智能点儿的打印机都会自带一些web服务-通常是java" class="headerlink" title="5,暴露在边界的目标打印机,智能点儿的打印机都会自带一些web服务[通常是java]:"></a>5,暴露在边界的目标打印机,智能点儿的打印机都会自带一些web服务[通常是java]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">打印机,就更不用说了,典型的内部设备,一般是先找到配置管理界面,部署war包</div></pre></td></tr></table></figure>
<h5 id="6-如果实在外部搞不定-条件允许的情况下-尝试实地渗透也是可以的-比如-通过无线进入目标内部"><a href="#6-如果实在外部搞不定-条件允许的情况下-尝试实地渗透也是可以的-比如-通过无线进入目标内部" class="headerlink" title="6,如果实在外部搞不定,条件允许的情况下,尝试实地渗透也是可以的,比如,通过无线进入目标内部"></a>6,如果实在外部搞不定,条件允许的情况下,尝试实地渗透也是可以的,比如,通过无线进入目标内部</h5><p>这也算是一种相对比较高效的渗透方式,老外非常干这个,但前提是,你可能需要很多次的蹲点,才能确认目标,实地渗透对你的心里素质要求可能会更高一些,另外,现场的环境和有限的时间也多多少少会影响到你<br><br></p>
<h5 id="一些小结"><a href="#一些小结" class="headerlink" title="一些小结:"></a>一些小结:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;时间原因,暂时就想到这些,都是一些平时的经验加上一点自己的想法,其实,就整个信息搜集来讲,对你的社工能力其实是个不小的考验,我自己在这方面确实是弱项,后续会慢慢加强<br><br></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/17/info-getshell/">
                在信息搜集阶段快速getshell的一些方式
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/info-getshell/">info getshell</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">strus2 系列命令执行漏洞	</div><div class="line">proftp1.<span class="number">3.5</span> 远程执行</div><div class="line">各类后门[nmap script]</div><div class="line">各类弱口令</div><div class="line">各类未授权访问</div><div class="line">iis5.<span class="number">0</span>/<span class="number">6.0</span> webdav 远程执行及写方法利用</div><div class="line">bash远程执行</div><div class="line">心脏滴血</div><div class="line">万能密码汇总</div><div class="line">ms17-<span class="number">010</span></div><div class="line">……</div></pre></td></tr></table></figure></p>
<p><br></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/16/dirscan-tools/">
                熟练使用各类敏感目录文件枚举工具
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-16</span>
            
            
            
                <span class="category">
                    <a href="/categories/dirscan-tools/">dirscan tools</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br></p>
<h5 id="wwwscan-常用选项-实际测试速度还可以-编码-应该是cmd默认的编码问题吧-貌似还有些问题-另外有些误报"><a href="#wwwscan-常用选项-实际测试速度还可以-编码-应该是cmd默认的编码问题吧-貌似还有些问题-另外有些误报" class="headerlink" title="wwwscan 常用选项,实际测试速度还可以,编码[应该是cmd默认的编码问题吧]貌似还有些问题,另外有些误报:"></a>wwwscan 常用选项,实际测试速度还可以,编码[应该是cmd默认的编码问题吧]貌似还有些问题,另外有些误报:</h5><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-<span class="ruby">p 	指定目标web端口,因为有些web服务并非工作在默认的<span class="number">80</span>或者<span class="number">8080</span>上,需要手工指定目标的web服务端口</span></div><div class="line">-<span class="ruby">m 	指定扫描的最大线程,不要太大,实际中<span class="number">15</span>到<span class="number">20</span>就差不多了</span></div><div class="line">-<span class="ruby">t 	指定请求的超时时间</span></div><div class="line">-<span class="ruby">-ssl 	扫描https站点务必加上此选项</span></div><div class="line">-<span class="ruby">r 	设置网站根目录,比如从哪个目录下开始扫,因为有些目标网站首页可能是<span class="symbol">http:</span>/<span class="regexp">/www.xxx.com/tuoal</span><span class="regexp">/这种形式的[并非在根目录下,而是在某个子目录下],那么在实际扫描中就要加上-r /tuoal</span></span></div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">wwwscan</span><span class="selector-class">.exe</span> <span class="selector-tag">cems09</span><span class="selector-class">.ce</span><span class="selector-class">.ust</span><span class="selector-class">.hk</span> <span class="selector-tag">-m</span> 10 <span class="selector-tag">-t</span> 20 <span class="selector-tag">-p</span> 80  扫<span class="selector-tag">iis</span></div></pre></td></tr></table></figure>
<p><img src="/img/wwwscan iis.png" alt=""><br></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">wwwscan</span><span class="selector-class">.exe</span> <span class="selector-tag">www</span><span class="selector-class">.rainbowsystem</span><span class="selector-class">.com</span><span class="selector-class">.hk</span> <span class="selector-tag">-m</span> 10 <span class="selector-tag">-t</span> 20 <span class="selector-tag">-p</span> 80  扫<span class="selector-tag">apache</span></div></pre></td></tr></table></figure>
<p><img src="/img/wwwscan apache.png" alt=""><br></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># wwwscan.exe <span class="number">203.72</span><span class="number">.29</span><span class="number">.166</span> -m <span class="number">10</span> -t <span class="number">20</span> -p <span class="number">80</span>  直接指定目标ip扫也是可以的</div></pre></td></tr></table></figure>
<p><img src="/img/wwwscan iis7.png" alt=""><br></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">wwwscan</span><span class="selector-class">.exe</span> <span class="selector-tag">www</span><span class="selector-class">.iis</span><span class="selector-class">.sinica</span><span class="selector-class">.edu</span><span class="selector-class">.tw</span>  <span class="selector-tag">-m</span> 20 <span class="selector-tag">-t</span> 10 <span class="selector-tag">--ssl</span> 	扫描<span class="selector-tag">https</span></div></pre></td></tr></table></figure>
<p><img src="/img/wwwscan ssl.png" alt=""><br></p>
<h5 id="DirBuster-一款基于java编写的爬行及目录扫描工具-既是java程序-jre是必须的-纯图形化界面-极易上手"><a href="#DirBuster-一款基于java编写的爬行及目录扫描工具-既是java程序-jre是必须的-纯图形化界面-极易上手" class="headerlink" title="DirBuster 一款基于java编写的爬行及目录扫描工具,既是java程序,jre是必须的,纯图形化界面,极易上手:"></a>DirBuster 一款基于java编写的爬行及目录扫描工具,既是java程序,jre是必须的,纯图形化界面,极易上手:</h5><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">不过,在使用之前,我们还需要先稍微设置下,改下默认的user-agent和扫描请求的超时时间,把软件的自动更新也关掉,任何工具都是如此,把更新关掉,对你肯定是有好处的</div><div class="line">打开程序主界面,贴上目标域名,扫描时的请求方法让它自动即可,设置好线程推荐<span class="number">20</span>-<span class="number">25</span>之间,太大了容易把网站扫死,选好字典文件,使用url fuzzing方式进行扫描</div><div class="line">进行fuzzing设置的时候,需要注意下,比如你扫的目标是 http://www.xxx.com/la/ 这种形式的, 那你在url <span class="keyword">to</span>  fuzz里面就要写成/la/&#123;dir&#125;,意思也就是说&#123;dir&#125;是一个变量,用它来替换字典中的每一行,在&#123;dir&#125;的前后可以随意拼接你想要的后缀或者目录,比如:/admin/&#123;dir&#125;.php就表示扫描admin目录下的所有php文件</div></pre></td></tr></table></figure>
<p><img src="/img/dirbuster.png" alt=""><br><img src="/img/dirbuster res.png" alt=""><br></p>
<h5 id="dirb-另一款简易目录扫描工具-后面可以连续跟上多个目录字典-它会先扫目录-目录扫完以后-才挨个遍历已扫到的目录下的文件和目录-根据执行过程看-应该是一层层递归的-速度一般"><a href="#dirb-另一款简易目录扫描工具-后面可以连续跟上多个目录字典-它会先扫目录-目录扫完以后-才挨个遍历已扫到的目录下的文件和目录-根据执行过程看-应该是一层层递归的-速度一般" class="headerlink" title="dirb 另一款简易目录扫描工具,后面可以连续跟上多个目录字典,它会先扫目录,目录扫完以后,才挨个遍历已扫到的目录下的文件和目录,根据执行过程看,应该是一层层递归的,速度一般:"></a>dirb 另一款简易目录扫描工具,后面可以连续跟上多个目录字典,它会先扫目录,目录扫完以后,才挨个遍历已扫到的目录下的文件和目录,根据执行过程看,应该是一层层递归的,速度一般:</h5><figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># dirb http:<span class="comment">//eng.nptu.edu.tw wordlists\common.txt</span></span></div></pre></td></tr></table></figure>
<p><img src="/img/dirb.png" alt=""><br></p>
<h5 id="iis-shortname-scanner-基于java-1-7编译-最好也用jdk1-7版本运行-短文件漏洞扫描-漏洞存在的情况下-扫描速度还是非常快的-对于扫windows服务器目录推荐优先使用它"><a href="#iis-shortname-scanner-基于java-1-7编译-最好也用jdk1-7版本运行-短文件漏洞扫描-漏洞存在的情况下-扫描速度还是非常快的-对于扫windows服务器目录推荐优先使用它" class="headerlink" title="iis_shortname_scanner 基于java 1.7编译,最好也用jdk1.7版本运行,短文件漏洞扫描,漏洞存在的情况下,扫描速度还是非常快的,对于扫windows服务器目录推荐优先使用它:"></a>iis_shortname_scanner 基于java 1.7编译,最好也用jdk1.7版本运行,短文件漏洞扫描,漏洞存在的情况下,扫描速度还是非常快的,对于扫windows服务器目录推荐优先使用它:</h5><figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># java -jar iis_shortname_scanner.jar 2 10 http:<span class="comment">//www.target.hk/   前面的数字表示显示扫描过程中的信息的详细程度,后面的数字表示线程,还是那句话不宜太高</span></span></div></pre></td></tr></table></figure>
<p><img src="/img/iis short.png" alt=""><br></p>
<h5 id="burpsuite"><a href="#burpsuite" class="headerlink" title="burpsuite:"></a>burpsuite:</h5><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">同是基于java的工具,用它跑目录其实也是可以的,只不过字典不能太大,<span class="number">1</span>w就非常吃力了,建议直接跑一些命中率比较高的精简目录,纯图形化工具,使用也比较简单就不多说了,关于此工具的更多用途,在之前已经详细说明过,这里就不再啰嗦了,把状态码和数据长度排序下就可以看到扫描结果了</div></pre></td></tr></table></figure>
<h5 id="其它各种py目录扫描小脚本-这里就不一一介绍了-github上-这种东西多如牛毛-后期遇到好的-再补充"><a href="#其它各种py目录扫描小脚本-这里就不一一介绍了-github上-这种东西多如牛毛-后期遇到好的-再补充" class="headerlink" title="其它各种py目录扫描小脚本,这里就不一一介绍了,github上,这种东西多如牛毛,后期遇到好的,再补充"></a>其它各种py目录扫描小脚本,这里就不一一介绍了,github上,这种东西多如牛毛,后期遇到好的,再补充</h5><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">cscan</span> 谷歌小插件</div><div class="line">各类py脚本,非常多,这里就不一一说了</div></pre></td></tr></table></figure>
<h5 id="另外还有一些在线的工具站-不妨也可以利用下-虽然不报太大希望-但惊喜总会在不经意间出现的"><a href="#另外还有一些在线的工具站-不妨也可以利用下-虽然不报太大希望-但惊喜总会在不经意间出现的" class="headerlink" title="另外还有一些在线的工具站,不妨也可以利用下,虽然不报太大希望,但惊喜总会在不经意间出现的:"></a>另外还有一些在线的工具站,不妨也可以利用下,虽然不报太大希望,但惊喜总会在不经意间出现的:</h5><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">https://pentest-tools.com</div><div class="line">https://hackertarget.com/</div></pre></td></tr></table></figure>
<p><br></p>
<h5 id="一点小结"><a href="#一点小结" class="headerlink" title="一点小结:"></a>一点小结:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;对于这类工具的实现过程基本都是大同小异,在目标域名后面拼接字典中的路径,然后逐个请求(多线程),观察响应状态码和返回的数据长度变化,head方法因为不返回详细主体,响应速度会相对比较快,不过,对于head这种敏感方法,稍微有点儿经验的管理员都会把它禁用掉,另外还需要注意的是,这样的扫描会在对方的web日志中留下大量的请求记录,如果你的字典过大,可能会直接导致对方web日志文件大小短时间内剧增而触发报警……所以,适量即可,还有最重要的一点,网站目录字典一定要自己精心制作,搜集各种特征目录文件确实是个体力活,这里的特征目录其实就是各种敏感目录文件,关于敏感文件有哪些,在前面的章节中已经详细汇总过,不清楚的地方请直接查看相关说明……,没啥技术含量,总之,非常期待能和大家一起交流学习进步……<br><br></p>

        </div>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="" href="/page/8/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/10/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">

<center>如果有朋友需要优质vps,可以去老薛买,异常稳定,本人已自用多年,使用下面的优惠码,会有 <font color="red">25% </font>折扣哦...</center><br>
<a href="http://www.laoxuehost.com/vps/" target="_blank" > 购买老薛vps </a> &nbsp;&nbsp;&nbsp;&nbsp; 优惠码: <font color="red">nuddle123</font><br>
<br>
<a href="/img/laoxue.png" target="_blank">优惠码具体使用方法</a><br>
<br>
<span>另,有偿提供各类服务搭建,配置加固[lamp,lnmp,vpn...],服务器代维及 <font color="red"> 渗透培训 </font>  &nbsp;&nbsp;QQ 742116745</span>

    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klionsec">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:klionsec@gmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    <h2>blog by klion</h2>
                </div>
            </div>
        </div>
    </div>
		<audio autoplay="autoplay">
		<source src="/img/Jon YoungSoon.mp3" type="audio/mpeg" />
		</audio>
<!--<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=0 height=0 src="//music.163.com/outchain/player?type=2&id=368836&auto=1&height=66"></iframe>
-->
</footer>


<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>