<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="知道自己想要做什么,比怎么做更重要">
    

    <!--Author-->
    
        <meta name="author" content="klion">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="klion&#39;s blog"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="知道自己想要做什么,比怎么做更重要" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="klion&#39;s blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>page - klion&#39;s blog</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about">
                    about me
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact">
                    blogs
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">klion's blog</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/16/dirscan-tools/">
                熟练使用各类敏感目录文件枚举工具
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-16</span>
            
            
            
                <span class="category">
                    <a href="/categories/dirscan-tools/">dirscan tools</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br>wwwscan 常用选项,实际测试速度还可以,编码[应该是cmd默认的编码问题吧]貌似还有些问题,另外,有些误报,显的有些呆板:<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-<span class="ruby">p 	指定目标web端口,因为有些web服务并非工作在默认的<span class="number">80</span>或者<span class="number">8080</span>上,需要手工指定目标的web服务端口</span></div><div class="line">-<span class="ruby">m 	指定扫描的最大线程,不要太大,实际中<span class="number">15</span>到<span class="number">20</span>就差不多了</span></div><div class="line">-<span class="ruby">t 	指定请求的超时时间</span></div><div class="line">-<span class="ruby">-ssl 	扫描https站点务必加上此选项</span></div><div class="line">-<span class="ruby">r 	设置网站根目录,比如从哪个目录下开始扫,因为有些目标网站首页可能是<span class="symbol">http:</span>/<span class="regexp">/www.xxx.com/tuoal</span><span class="regexp">/这种形式的[并非在根目录下,而是在某个子目录下],那么在实际扫描中就要加上-r /tuoal</span></span></div></pre></td></tr></table></figure></p>
        </div>
        <a href="/2014/12/16/dirscan-tools/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/16/dirscan/">
                快速搜集目标的各类web管理入口,敏感目录,文件及错误配置
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-16</span>
            
            
            
                <span class="category">
                    <a href="/categories/dirscan/">dirscan</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br>1,自己找网站后台的一些办法[这里所指的找后台主要都是针对一些非开源的web程序,对于开源程序,直接把代码down下来看看目录结构,不就什么都有了,何苦要找呢]:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">首先,看看目标网站页面中,有没有给我们提供后台入口,很多脑残的政府和学校站一般都会这么干,直接把后台入口留在前端页面上</div><div class="line">尝试访问目标的robots.txt文件,如果有的话,看看里面有没有后台或者上传点之类的敏感目录,至于robots.txt文件本身的作用,大家自行谷歌,这里就不多做解释了</div><div class="line">习惯性的盲打一些常见的后台目录名,例如<span class="symbol">:/admin/</span> /manage/ <span class="regexp">/cms/</span> /system/ <span class="regexp">/administrator/</span> /wp-login.php /control/等,试着大小写变换下……</div><div class="line">使用各类基于字典的目录爆破及爬行工具,例如<span class="symbol">:dirb</span>,wwwscan,cansina,uniscan,破壳以及其它的各种py脚本,非常多,现在也有很多在线的目录爆破工具站,其实,这类的工具没什么太多的技术含量,实际效果还得取决于你的字典质量和目标的防护程度,抛开防护先不说,起码网站敏感目录文件字典要精心准备是必须的</div><div class="line"><span class="string">"cscan"</span>谷歌浏览器小插件,速度快,误报极高,具体原理,本人暂时还没弄明白,不过可以尝试下,自己用的比较少,记得有一次实在没办法就尝试了一下,结果真的就跑出来了,可能是运气吧</div><div class="line">对于大型站点,可利用之前提到的google hacking,这里就不细说了,请仔细看前面的说明</div><div class="line">用各种wvs爬,也许也能爬出来一些,关于这类web漏洞扫描器的具体使用,后面会有详细说明,这里就先不细说了,例如: awvs,appscan,netsparker……</div><div class="line">如果是windows的话,不妨尝试下短文件漏洞扫描工具,鸡肋的是,它只能扫出前<span class="number">6</span>个字节(<span class="number">6</span>个英文字符),也就是说你只能看一部分猜一部分,好处在于前<span class="number">6</span>个字节起码是绝对正确的</div><div class="line">配合网站的域名或者业务社工,比如<span class="symbol">:</span>商城站一般我们会想到什么呢,shop?,有的后台目录也可能是依据域名的各种变形,多尝试……</div><div class="line">尝试各种万能密码,虽然很low,但很直接,存在万能密码问题的程序毕竟也不在少数,如<span class="symbol">:phpmyadmin</span> <span class="number">2.11</span>.<span class="number">3</span>-<span class="number">2.11</span>.<span class="number">4</span> 等……</div><div class="line">如果实在找不到,就想想办法直接问管理员吧,至于套不套的出来,就要看你自己的本事了,嘿嘿……</div></pre></td></tr></table></figure></p>
<p>2,除了一些常规的网站后台入口,我们也可以尝试各种java web入口,尤其是针对各种java控制台的,当然,前提是目标要有,基本一旦进去,shell权限都非常大:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tomcat[默认端口<span class="number">8080</span> 需要用户名密码,还是那句话多尝试些弱口令,进去以后上传war马]</div><div class="line">jboss [默认端口<span class="number">8080</span>无需任何验证,进去以后上传war马]</div><div class="line">weblogic [默认端口<span class="number">7001</span>,实际很多是在<span class="number">8080</span>上,进去以后上传war马]</div><div class="line">Websphere[默认端口<span class="number">9043</span>,实际很多是在<span class="number">8080</span>上,进去以后上传war马]</div><div class="line">webmin[web版的服务器管理工具,默认端口<span class="number">10000</span>,可以把它当做图形版的ssh管理工具]</div><div class="line">……</div></pre></td></tr></table></figure></p>
<p>3,查找各种敏感文件目录,这里所说的网站敏感文件及目录一般包括如下:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">网站源码备份文件,数据库备份文件,一般命名都是wwwroot.zip,wwwroot.sql什么的以及其它的各种网站备份文件,建议直接用自己的字典跑</div><div class="line">目标服务器的各种探针类文件,例如<span class="symbol">:phpinfo</span>.php,test.asp,info.aspx……</div><div class="line">目标网站的物理路径,注意物理路径和网站路径的区别,网站路径都是以www为根目录,而物理路径则是指系统某个分区下的具体路径 例如<span class="symbol">:c</span><span class="symbol">:</span>\windows\system32  /usr/local/lib</div><div class="line">管理后台目录,上传目录,如: 各类上传点,各类编辑器的上传点</div><div class="line">网站数据库连接配置类文件</div><div class="line">各类数据库的web管理入口,例如<span class="symbol">:phpmyadmin</span>,adminer……之流</div><div class="line">目标网站后台脚本源码泄露及各种各样的网站报错信息</div><div class="line">svn 文件泄露</div><div class="line">各种第三方程序的核心配置文件,里面可能会有用户密码……例如<span class="symbol">:cisco</span> vpn,ser-u……</div><div class="line">目标内部的各种账号密码信息,并不仅限于邮箱,vpn,ftp……</div><div class="line">web服务器配置错误所导致的目录遍历</div><div class="line">别人的webshell,目录扫描工具对这个的扫描似乎不太靠谱,因为有些shell隐藏的比较深,所以建议直接用google爬各种webshell特征</div><div class="line">……</div></pre></td></tr></table></figure></p>
<p>4,还有一些内部的OA系统入口也并不在一些常规的web端口,又该怎么办呢,其实,很多情况下,你可以习惯性的尝试访问以下目标的81,82,83,86,88,8081,8082,8088这样的web端口,说不定会有惊喜呢:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">在目标防火墙没有开启的情况下,可以用一些之前介绍过的公网端口扫描工具,进行全端口扫描,然后根据扫到的结果,看着可能是web端口的,尝试在浏览器中逐个访问</div><div class="line">如果目标开起了防火墙[waf],除了谷歌,或者直接在目标网站上找找,基本也就没谁了,扫可能是不太现实的,嘿嘿……这些问题就留给大家一起讨论吧</div><div class="line">……</div></pre></td></tr></table></figure></p>
<p>5,搜集目标的各种元数据<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foca [工具除了挖据各种元数据之外,包括目标子域识别,服务器错误配置,web高危扫描……功能还是非常好用的,尤其是针对大中型站点]</div></pre></td></tr></table></figure></p>
<p><br><br>小结:<br>&nbsp;&nbsp;&nbsp;&nbsp;对于后台的查找,基本也就这么多了,如果实在找不到,不妨换换别的思路,web只是我们渗透过程中的其中一个入手点,却不是唯一的入手点,别太死板就行,更多姿势,也期待跟大家一起交流学习</p>
<p><br></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/15/shodan-hacking/">
                熟练利用shodan hacking 辅助我们快速渗透 [ 通常针对大中型目标 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-15</span>
            
            
            
                <span class="category">
                    <a href="/categories/shodan-hacking/">shodan hacking</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br></p>
<h5 id="shodan-入门-在渗透一些特定的网络设备时还是非常好使的-俗称”工控设备渗透”"><a href="#shodan-入门-在渗透一些特定的网络设备时还是非常好使的-俗称”工控设备渗透”" class="headerlink" title="shodan 入门[在渗透一些特定的网络设备时还是非常好使的,俗称”工控设备渗透”]:"></a>shodan 入门[在渗透一些特定的网络设备时还是非常好使的,俗称”工控设备渗透”]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">不像谷歌,bing那样只是单单是基于web爬行,shodan则是基于全网旗标搜索,我们主要可以用它来撞撞各种网络设备的默认密码默认只能看到<span class="number">50</span>个结果,可能需要付点费才能看到的更多,同样它提供查询api,非常方便写脚本]</div></pre></td></tr></table></figure>
<h5 id="官方站点-注册个账号是必须的"><a href="#官方站点-注册个账号是必须的" class="headerlink" title="官方站点[注册个账号是必须的]:"></a>官方站点[注册个账号是必须的]:</h5><p><a href="https://www.shodan.io/" target="_blank" rel="external">https://www.shodan.io/</a>  </p>
<h5 id="shodan-内置的几个简单过滤器"><a href="#shodan-内置的几个简单过滤器" class="headerlink" title="shodan         内置的几个简单过滤器:"></a>shodan         内置的几个简单过滤器:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">city:</span>   	城市,貌似只支持英文</div><div class="line"><span class="symbol">country:</span>  	国别,比如<span class="symbol">:cn</span>,us,jp,tw,br,ph,vn,hk</div><div class="line"><span class="symbol">hostname:</span> 	主机名[域名如果是子域还需要在前面加个.]</div><div class="line"><span class="symbol">net:</span>      	网络地址范围,可以是单个ip或者cidr格式</div><div class="line">os :   		操作系统 centOS,win32,red hat,suse 等等</div><div class="line"><span class="symbol">port:</span>  		根据端口,HTTP (<span class="number">80</span>),FTP (<span class="number">21</span>),SSH (<span class="number">22</span>),SNMP (<span class="number">161</span>),SIP (<span class="number">5060</span>)等等</div><div class="line"><span class="symbol">product:</span>  	具体的产品名称</div></pre></td></tr></table></figure>
<h5 id="下面是一些简单的搜索实例"><a href="#下面是一些简单的搜索实例" class="headerlink" title="下面是一些简单的搜索实例:"></a>下面是一些简单的搜索实例:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">搜集某个城市的特定设备标识[自己可以实现多收集一些常见的软件和设备标识]:</div><div class="line">Microsoft-IIS/<span class="number">5.0</span> <span class="symbol">city:</span><span class="string">"TOKYO"</span>   可以逐个尝试是否能put</div><div class="line">Microsoft-IIS/<span class="number">6.0</span> <span class="symbol">city:</span><span class="string">"Seoul"</span></div><div class="line">Microsoft-IIS/<span class="number">7.5</span> <span class="symbol">city:</span><span class="string">"Hong Kong"</span></div><div class="line">apache <span class="symbol">city:</span><span class="string">"Nagoya"</span></div><div class="line">Apache/<span class="number">2.2</span>.<span class="number">27</span> <span class="symbol">city:</span><span class="string">"Nagoya"</span></div><div class="line">Tomcat <span class="symbol">city:</span><span class="string">"Seoul"</span></div><div class="line">cisco <span class="symbol">city:</span><span class="string">"Osaka"</span></div><div class="line">tplink <span class="symbol">city:</span><span class="string">"nanjing"</span></div></pre></td></tr></table></figure>
<p><img src="/img/shodan webserver.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">搜索特定版本操作系统及特定端口:</div><div class="line"><span class="symbol">os:</span><span class="string">"linux"</span> <span class="symbol">net:</span><span class="string">"72.34.62.0/24"</span></div><div class="line"><span class="symbol">os:</span><span class="string">"windows"</span> <span class="symbol">net:</span><span class="string">"195.40.91.0/24"</span></div><div class="line">Apache <span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">port:</span><span class="string">"8080"</span>  <span class="symbol">product:</span><span class="string">"Apache Tomcat/Coyote JSP engine"</span></div><div class="line">Apache <span class="symbol">city:</span><span class="string">"Seoul"</span> <span class="symbol">port:</span><span class="string">"8080"</span></div><div class="line"><span class="symbol">hostname:</span><span class="string">".polyu.edu.hk"</span> <span class="symbol">os:</span><span class="string">"windows"</span></div></pre></td></tr></table></figure>
<p><img src="/img/shodan apache.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">搜索指定国家地域的特定类型软件(还是那句话,多搜集一些软件标识):</div><div class="line"><span class="symbol">product:</span><span class="string">"tomcat"</span>  <span class="symbol">net:</span><span class="string">"158.132.18.0/24"</span></div><div class="line"><span class="symbol">product:</span><span class="string">"apache"</span>  <span class="symbol">net:</span><span class="string">"158.132.18.0/24"</span></div><div class="line"><span class="symbol">product:</span><span class="string">"iis"</span>     <span class="symbol">net:</span><span class="string">"158.132.18.0/24"</span></div><div class="line"><span class="symbol">port:</span><span class="string">"8080"</span> jboss <span class="symbol">country:</span>CN</div></pre></td></tr></table></figure>
<p><img src="/img/shodan webserver iis.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">扫描指定网段的所有数据库服务器:</div><div class="line"><span class="symbol">product:</span><span class="string">"Mysql"</span>  <span class="symbol">net:</span><span class="string">"140.117.13.0/24"</span> <span class="symbol">port:</span><span class="string">"3306"</span></div><div class="line"><span class="symbol">port:</span><span class="string">"1433"</span> <span class="symbol">net:</span><span class="string">"78.131.197.0/24"</span></div><div class="line"><span class="symbol">port:</span><span class="string">"5432"</span> <span class="symbol">net:</span><span class="string">"77.55.149.0/24"</span></div><div class="line"><span class="symbol">port:</span><span class="string">"1521"</span> <span class="symbol">net:</span><span class="string">"78.143.192.0/12"</span></div><div class="line"><span class="symbol">port:</span><span class="string">"1521"</span> <span class="symbol">city:</span><span class="string">"Osaka"</span></div></pre></td></tr></table></figure>
<p><img src="/img/shodan webserver mssql.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">搜索远程管理终端:</div><div class="line"><span class="symbol">os:</span><span class="string">"windows"</span> <span class="symbol">port:</span><span class="string">"3389"</span> <span class="symbol">net:</span><span class="string">"107.160.1.0/24"</span></div><div class="line"><span class="symbol">os:</span><span class="string">"linux"</span> <span class="symbol">port:</span><span class="string">"22"</span> <span class="symbol">net:</span><span class="string">"107.160.1.0/24"</span></div><div class="line"><span class="symbol">os:</span><span class="string">"linux"</span> <span class="symbol">port:</span><span class="string">"23"</span> <span class="symbol">net:</span><span class="string">"107.160.1.0/24"</span></div><div class="line"><span class="symbol">os:</span><span class="string">"linux"</span> <span class="symbol">port:</span><span class="string">"23"</span> <span class="symbol">net:</span><span class="string">"87.124.0.0/15"</span></div></pre></td></tr></table></figure>
<p><img src="/img/shodan webserver 3389.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">搜路由<span class="symbol">:</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">搜索<span class="symbol">ftp:</span></div><div class="line"><span class="symbol">port:</span><span class="string">"21"</span> <span class="symbol">net:</span><span class="string">"107.160.1.0/24"</span></div><div class="line"><span class="symbol">port:</span><span class="string">"69"</span> <span class="symbol">net:</span><span class="string">"218.242.16.0/24"</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">在某个城市中搜索指定的端口,操作系统及设备:</div><div class="line"><span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">port:</span><span class="string">"69"</span></div><div class="line"><span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">port:</span><span class="string">"3389"</span></div><div class="line"><span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">port:</span><span class="string">"22"</span></div><div class="line"><span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">port:</span><span class="string">"23"</span></div><div class="line"><span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">port:</span><span class="string">"3306"</span></div><div class="line"><span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">port:</span><span class="string">"110"</span></div><div class="line"><span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">os:</span><span class="string">"windows"</span></div><div class="line"><span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">product:</span><span class="string">"cisco"</span></div><div class="line"><span class="symbol">city:</span><span class="string">"Hong Kong"</span> <span class="symbol">port:</span><span class="string">"8080"</span></div></pre></td></tr></table></figure>
<p><img src="/img/shodan webserver hong kong 3389.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">按照国家进行搜索指定的设备,端口,服务器:</div><div class="line"><span class="symbol">port:</span><span class="string">"23"</span> <span class="symbol">country:</span>CN</div><div class="line"><span class="symbol">port:</span><span class="string">"1433"</span> <span class="symbol">country:</span>CN</div><div class="line"><span class="symbol">port:</span><span class="string">"3389"</span> <span class="symbol">country:</span>CN</div><div class="line">tplink <span class="symbol">country:</span>CN</div><div class="line">huawei <span class="symbol">country:</span>CN</div><div class="line">netcam  <span class="symbol">country:</span>CN</div><div class="line"><span class="symbol">country:</span>CN <span class="symbol">net:</span><span class="string">"115.225.113.0/24"</span> <span class="symbol">port:</span><span class="string">"22"</span></div><div class="line"><span class="symbol">country:</span>CN router</div><div class="line">admin login  <span class="symbol">country:</span>HK</div><div class="line">hacked by <span class="symbol">country:</span>HK</div></pre></td></tr></table></figure>
<p><img src="/img/shodan webserver netcam.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">搜缺省密码:</div><div class="line"><span class="string">"default password"</span> <span class="symbol">city:</span><span class="string">"Hong Kong"</span></div><div class="line"><span class="symbol">country:</span>CN <span class="string">"default password"</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">搜exp[其实,就是把exploit上的东西扒下来]:</div><div class="line"><span class="symbol">https:</span>/<span class="regexp">/exploits.shodan.io/welcome</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">搜索各类漏洞摄像头:</div><div class="line">netcam <span class="symbol">net:</span><span class="string">"187.189.82.0/24"</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">批量搜集一些开源程序,尝试0day批量利用<span class="symbol">:</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">针对某个端口,批量搜集感染了某种数据标志的木马<span class="symbol">:</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">批量搜集一些经典漏洞,比如<span class="symbol">:iis</span> put,心脏滴血,bash远程执行,等等……<span class="symbol">:</span></div></pre></td></tr></table></figure>
<h5 id="下面是一些常见的默认用户名密码-可以撞撞运气"><a href="#下面是一些常见的默认用户名密码-可以撞撞运气" class="headerlink" title="下面是一些常见的默认用户名密码,可以撞撞运气:"></a>下面是一些常见的默认用户名密码,可以撞撞运气:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">ACTi:</span> admin/<span class="number">123456</span> <span class="keyword">or</span> Admin/<span class="number">123456</span></div><div class="line">Axis (traditional): root/pass,</div><div class="line">Axis (new): requires password creation during first login</div><div class="line"><span class="symbol">Cisco:</span> No default password, requires creation during first login</div><div class="line"><span class="symbol">Grandstream:</span> admin/admin</div><div class="line"><span class="symbol">IQinVision:</span> root/system</div><div class="line"><span class="symbol">Mobotix:</span> admin/meinsm</div><div class="line"><span class="symbol">Panasonic:</span> admin/<span class="number">12345</span></div><div class="line">Samsung <span class="symbol">Electronics:</span> root/root <span class="keyword">or</span> admin/<span class="number">4321</span></div><div class="line">Samsung Techwin (old): admin/<span class="number">1111111</span></div><div class="line">Samsung Techwin (new): admin/<span class="number">4321</span></div><div class="line"><span class="symbol">Sony:</span> admin/admin</div><div class="line"><span class="symbol">TRENDnet:</span> admin/admin</div><div class="line"><span class="symbol">Toshiba:</span> root/ikwd</div><div class="line"><span class="symbol">Vivotek:</span> root/&lt;blank&gt;</div><div class="line"><span class="symbol">WebcamXP:</span> admin/ &lt;blank&gt;</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shodan 差不多就这些了,建议大家如果真的想用好可以付点费写脚本,国内利用此api实现的工具还是蛮多的,这里就一一细说了,总之来讲,批量抓鸡效果还是非常不错的,从上面我们也看到利用的核心还是各种特征质量,因为它直接决定了你的命中率</div></pre></td></tr></table></figure>
<h5 id="另外-再介绍两个小工具站-使用非常简单-纯图形化的-这里就不细说了"><a href="#另外-再介绍两个小工具站-使用非常简单-纯图形化的-这里就不细说了" class="headerlink" title="另外,再介绍两个小工具站,使用非常简单,纯图形化的,这里就不细说了:"></a>另外,再介绍两个小工具站,使用非常简单,纯图形化的,这里就不细说了:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">https:</span>/<span class="regexp">/www.punkspider.org/</span>   在线web漏洞扫描</div><div class="line"><span class="symbol">http:</span>/<span class="regexp">/ics.zoomeye.org/</span>       基于shodan实现</div></pre></td></tr></table></figure>
<h5 id="最后再提下bing-目前已经费掉了-很多人的C段旁站工具想必都是基于此api写的-下面是常见使用方法"><a href="#最后再提下bing-目前已经费掉了-很多人的C段旁站工具想必都是基于此api写的-下面是常见使用方法" class="headerlink" title="最后再提下bing(目前已经费掉了,很多人的C段旁站工具想必都是基于此api写的),下面是常见使用方法:"></a>最后再提下bing(目前已经费掉了,很多人的C段旁站工具想必都是基于此api写的),下面是常见使用方法:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">ip:</span>ip地址    就会把这个ip所对应的所有域名都列出来</div></pre></td></tr></table></figure>
<h5 id="基于此api的各种C段旁站工具编写原理"><a href="#基于此api的各种C段旁站工具编写原理" class="headerlink" title="基于此api的各种C段旁站工具编写原理:"></a>基于此api的各种C段旁站工具编写原理:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">编写其实也很简单,就是把bing搜索的结果截取一下,然后输出的好看一点,不过,你需要事先去bing申请一下搜索用的api,去微软的开发者中心申请一个即可,如果旁站能想通,那么C段也只不过是把<span class="number">254</span>台机器的在线的ip轮训一遍而已</div></pre></td></tr></table></figure>
<p><br></p>
<h5 id="一点小结"><a href="#一点小结" class="headerlink" title="一点小结:"></a>一点小结:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;关于google和shodan的用法,大概就介绍到这里了,使用都比较简单,基本就是几个过滤器来回的组装,随意的根据自己的实际需求拼装特征,说道底,还是看大家的想象力和对现有信息特征的敏感度,大家也看到了,如果完全手工的话,确实挺累的,为什么不写成自动化的脚本来帮我们完成呢,当然,这类的工具也有很多现成的,不过并不是按照咱们的想法来的,所以,最好自己动手……不过在写脚本之前,自己首先要能熟练使用才是,这样写出来的工具杀伤力才能更大些,当然,关于这类web搜索引擎所能产生的渗透效果的强弱,主要是还是看搜索引擎对目标收录的多少,如果目标站点建立的时间比较长,而且各大搜索引擎的收录量也比较好的话,这时候你利用谷歌固然成效显著,但如果一个站点刚建立不久,谷歌收录量也非常少,这时谷歌对你来讲也许就只是个摆设,这里说到的内容可能还只是各个搜索引擎利用的冰山一角,更多更强大的功能,还要靠大家一起来慢慢挖掘,对了,最后再说明一点,用这些搜索引擎的时候,最好全程挂上vpn,推荐美国的,原因大家应该都明白,自家人对自家人的限制几乎是最少的,不要问我为什么不介绍百度没办法,太不堪(原因大家都懂……)</p>
<p><br></p>
<h5 id="一点心得"><a href="#一点心得" class="headerlink" title="一点心得:"></a>一点心得:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;一般我们在搜索引擎上搜集目标信息的时候,首先,应该直奔一些比较高危的漏洞特征,比如能快速getshell的,比如,默认账号密码,进去以后就只可以直接传shell的,此外,如果目标有支持jsp脚本的机器,我们首先就应该从jsp开始入手,因为jsp程序的权限一般都非常高,几乎是服务器的管理员权限,所以我们平时在搜集信息过程中,也尽量先找一些最好能直取权限的信息,孰轻孰重,自己心里一定要有分寸,这样可以避免我们做太多的无用功,当然,如果你手上有个开源的web程序未公开的0day,然后配合类似的搜索引擎利用,那结果可想而知,反正我们利用各种搜索引擎的最终目的无非就是想尽快找个目标边界先进去……<br><br></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/14/search-hacking/">
                熟练利用google hacking 辅助我们快速渗透 [ 通常针对大中型目标 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-14</span>
            
            
            
                <span class="category">
                    <a href="/categories/google-hacking/">google hacking</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br></p>
<h5 id="关于google-hacking的几个基础过滤器-务必谨记-过滤器是死的-人是活的-把脑洞放开-极尽所能的想着法拼装-往往能达到超预期的效果"><a href="#关于google-hacking的几个基础过滤器-务必谨记-过滤器是死的-人是活的-把脑洞放开-极尽所能的想着法拼装-往往能达到超预期的效果" class="headerlink" title="关于google hacking的几个基础过滤器[务必谨记,过滤器是死的,人是活的,把脑洞放开,极尽所能的想着法拼装,往往能达到超预期的效果]:"></a>关于google hacking的几个基础过滤器[务必谨记,过滤器是死的,人是活的,把脑洞放开,极尽所能的想着法拼装,往往能达到超预期的效果]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intitle:</span>     从网页标题中搜索指定的关键字,可专门用来搜索指定版本名称的各类web程序,也可用allintitle</div><div class="line"><span class="symbol">inurl:</span> 		从url中搜索指定的关键字,可专门用来构造各种形式的漏洞url,也可用allinurl</div><div class="line"><span class="symbol">intext:</span> 	从网页中搜索指定的关键字,可专门用它来穿透到漏洞页面……也可用allintext</div><div class="line"><span class="symbol">filetype:</span>    搜索指定的文件后缀,例如<span class="symbol">:sql</span> mdb txt bak backup ini zip rar doc xls…… </div><div class="line"><span class="symbol">site:</span>        在某个特定的网站内中搜索指定的内容</div><div class="line"><span class="symbol">link:</span>        搜索和该链接有关联连接,比如<span class="symbol">:</span>友情链接</div><div class="line">index <span class="symbol">of:</span>    找目录遍历会用到</div></pre></td></tr></table></figure>
<h5 id="google所支持的一些通配符-建议选择性的用-因为越精确-就意味着结果越少-这样我们容易漏掉一些目标-毕竟不是正则-我们的最终目的还是希望能尽快找到有漏洞的站先进去再说"><a href="#google所支持的一些通配符-建议选择性的用-因为越精确-就意味着结果越少-这样我们容易漏掉一些目标-毕竟不是正则-我们的最终目的还是希望能尽快找到有漏洞的站先进去再说" class="headerlink" title="google所支持的一些通配符(建议选择性的用,因为越精确,就意味着结果越少,这样我们容易漏掉一些目标,毕竟不是正则,我们的最终目的还是希望能尽快找到有漏洞的站先进去再说):"></a>google所支持的一些通配符(建议选择性的用,因为越精确,就意味着结果越少,这样我们容易漏掉一些目标,毕竟不是正则,我们的最终目的还是希望能尽快找到有漏洞的站先进去再说):</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">+   强制包含某个字符进行查询</div><div class="line">-   查询的时候忽略某个字符</div><div class="line"><span class="string">""</span>  查询的时候精确匹配双引号内的字符</div><div class="line">.   匹配某单个字符进行查询</div><div class="line">*   匹配任意字符进行查询</div><div class="line"><span class="params">|   或者,多个选择,只要有一个关键字匹配上即可</span></div></pre></td></tr></table></figure>
<h5 id="找各种web入口-当然-这里所指的web入口并非仅限于各种常规网站后台-说到网站后台-一定要手工多尝试几个路径"><a href="#找各种web入口-当然-这里所指的web入口并非仅限于各种常规网站后台-说到网站后台-一定要手工多尝试几个路径" class="headerlink" title="找各种web入口,当然,这里所指的web入口并非仅限于各种常规网站后台[说到网站后台,一定要手工多尝试几个路径]:"></a>找各种web入口,当然,这里所指的web入口并非仅限于各种常规网站后台[说到网站后台,一定要手工多尝试几个路径]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">例如<span class="symbol">:</span>一些疑似目标内网的各种web管理系统入口,web端的数据库管理入口,某些设备的web端配置入口,以及一些常见的java控制台入口等等……反正你觉得进去以后能上传脚本的地方全部都可以尝试,东西在你手里,可劲儿用就是了</div></pre></td></tr></table></figure>
<p><br></p>
<h5 id="搜集各版本tomcat入口-默认在8080端口上"><a href="#搜集各版本tomcat入口-默认在8080端口上" class="headerlink" title="搜集各版本tomcat入口[默认在8080端口上]:"></a>搜集各版本tomcat入口[默认在8080端口上]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>apache tomcat 		直接这样搜结果肯定会非常多</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">inurl:</span><span class="number">8080</span>/    			我们可以带指定端口号去搜,因为有些web并非在默认端口上,这样搜的话,可以尽量防止有漏网之鱼</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>Apache Tomcat/<span class="number">5.5</span>.<span class="number">27</span> <span class="symbol">site:</span>*.hk      针对特定版本特定国家去搜,比如爆出某个版本有远程执行类的漏洞就可以利用这种方式来批量进行</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>Apache Tomcat/<span class="number">7.0</span>.<span class="number">32</span> <span class="symbol">site:</span>*.gov.br</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>Apache Tomcat/<span class="number">5.0</span>.<span class="number">12</span> <span class="symbol">site:</span>*.cn</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>Apache Tomcat/<span class="number">6.0</span>.<span class="number">24</span> <span class="symbol">site:</span>*.com</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>apache tomcat <span class="symbol">site:</span>*.edu.*</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>apache tomcat <span class="symbol">site:</span>*.gov.*		搜特定类型的目标站点,如,学校一般都是edu,各种民间组织一般都是org,政府机构一般都是gov……</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>apache tomcat <span class="symbol">site:</span>*.org.*</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>Apache Tomcat/<span class="number">7.0</span> <span class="symbol">site:</span>*.org.*</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>apache tomcat <span class="symbol">site:</span>*.jp</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>apache tomcat <span class="symbol">site:</span>*.vn</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>apache tomcat <span class="symbol">site:</span>*.ph</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>Apache Tomcat <span class="symbol">site:</span>*.uk</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>apache tomcat <span class="symbol">site:</span>baidu.com	无意发现百度的某个子域,竟然是个博彩站</div><div class="line"><span class="symbol">intext:</span>$CATALINA_HOME/webapps/ROOT/ <span class="symbol">intitle:</span>apache tomcat <span class="symbol">site:</span>org.tw</div></pre></td></tr></table></figure>
<p><img src="/img/google tomcat.png" alt=""><br></p>
<h5 id="搜集weblogic入口"><a href="#搜集weblogic入口" class="headerlink" title="搜集weblogic入口:"></a>搜集weblogic入口:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>/console/login/LoginForm.jsp  	这样范围太大,可根据上面的示例随意变形</div><div class="line"><span class="symbol">inurl:</span>/console/login/LoginForm.jsp <span class="symbol">intitle:</span>Oracle WebLogic Server</div><div class="line"><span class="symbol">inurl:</span>/console/login/ <span class="symbol">intitle:</span><span class="string">"Oracle WebLogic Server 管理控制台"</span></div></pre></td></tr></table></figure>
<p><img src="/img/google weblogic.png" alt=""><br></p>
<h5 id="搜集jboss入口"><a href="#搜集jboss入口" class="headerlink" title="搜集jboss入口:"></a>搜集jboss入口:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>/jmx-console/htmladaptor</div><div class="line"><span class="symbol">inurl:</span>/jmx-console/htmladaptor <span class="symbol">site:</span>*.edu.*</div><div class="line"><span class="symbol">inurl:</span>/jmx-console/htmladaptor <span class="symbol">site:</span>*.org.*</div><div class="line"><span class="symbol">inurl:</span>/jmx-console/htmladaptor <span class="symbol">site:</span>*.tw</div></pre></td></tr></table></figure>
<p><img src="/img/google jboss.png" alt=""><br></p>
<h5 id="搜集websphere入口"><a href="#搜集websphere入口" class="headerlink" title="搜集websphere入口:"></a>搜集websphere入口:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>/ibm/console/logon.jsp</div></pre></td></tr></table></figure>
<p><img src="/img/google websphere.png" alt=""><br></p>
<h5 id="搜集phpmyadmin入口"><a href="#搜集phpmyadmin入口" class="headerlink" title="搜集phpmyadmin入口:"></a>搜集phpmyadmin入口:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>/phpMyAdmin/index.php </div><div class="line"><span class="symbol">inurl:</span>/phpMyAdmin/index.php db+information_schema   	指定命中数据</div><div class="line"><span class="symbol">inurl:</span>/phpMyAdmin/index.php <span class="symbol">intext:</span>phpMyAdmin <span class="number">2.7</span>.<span class="number">0</span> 	直接针对特定版本号去搜索,更加精准</div><div class="line"><span class="symbol">inurl:</span>/phpMyAdmin/index.php <span class="symbol">site:</span>*.tw</div><div class="line"><span class="symbol">inurl:</span>/phpMyAdmin/index.php <span class="symbol">site:</span>*.org</div><div class="line"><span class="symbol">inurl:</span>/phpMyAdmin/index.php <span class="symbol">site:</span>*.hk</div></pre></td></tr></table></figure>
<p><img src="/img/google phpmyadmin.png" alt=""><br></p>
<h5 id="批量搜集webmin入口-web版的linux系统管理工具-默认10000端口"><a href="#批量搜集webmin入口-web版的linux系统管理工具-默认10000端口" class="headerlink" title="批量搜集webmin入口[web版的linux系统管理工具,默认10000端口]:"></a>批量搜集webmin入口[web版的linux系统管理工具,默认10000端口]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intitle:</span>Login to Webmin <span class="symbol">intext:</span><span class="string">"login to the Webmin server on"</span></div></pre></td></tr></table></figure>
<p><img src="/img/google webmin.png" alt=""><br></p>
<h5 id="批量搜wordpress程序-关于wp的特征比较多-大家可自行构造"><a href="#批量搜wordpress程序-关于wp的特征比较多-大家可自行构造" class="headerlink" title="批量搜wordpress程序[关于wp的特征比较多,大家可自行构造]:"></a>批量搜wordpress程序[关于wp的特征比较多,大家可自行构造]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>/wp-login.php  <span class="symbol">site:</span>*.hk</div><div class="line">index of /wp-content/uploads <span class="symbol">inurl:</span>/wp-login.php</div><div class="line"><span class="symbol">inurl:</span>/wp-content/themes/theagency    上传漏洞</div></pre></td></tr></table></figure>
<p><img src="/img/google wp.png" alt=""><br></p>
<h5 id="批量搜joomla程序"><a href="#批量搜joomla程序" class="headerlink" title="批量搜joomla程序:"></a>批量搜joomla程序:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>/administrator/index.php</div><div class="line"><span class="symbol">inurl:</span>index.php?option=com_advertisementboard  找注入</div><div class="line"><span class="symbol">inurl:</span>index.php?option=com_carocci</div><div class="line"><span class="symbol">inurl:</span>index.php?option=com_product</div><div class="line"><span class="symbol">inurl:</span>/administrator/index.php <span class="symbol">site:</span>*.hk</div></pre></td></tr></table></figure>
<p><img src="/img/google joomla.png" alt=""><br></p>
<h5 id="批量搜drupal程序"><a href="#批量搜drupal程序" class="headerlink" title="批量搜drupal程序:"></a>批量搜drupal程序:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>CHANGELOG.txt <span class="symbol">intext:</span>drupal <span class="symbol">intext:</span><span class="string">"SA-CORE"</span> -<span class="symbol">site:</span>github.com -<span class="symbol">site:</span>drupal.org</div></pre></td></tr></table></figure>
<h5 id="批量搜discuz程序"><a href="#批量搜discuz程序" class="headerlink" title="批量搜discuz程序:"></a>批量搜discuz程序:</h5><h5 id="批量搜集opencart程序"><a href="#批量搜集opencart程序" class="headerlink" title="批量搜集opencart程序:"></a>批量搜集opencart程序:</h5><h5 id="批量搜集phpbb程序"><a href="#批量搜集phpbb程序" class="headerlink" title="批量搜集phpbb程序:"></a>批量搜集phpbb程序:</h5><h5 id="当然-你也可以根据下面的一些特征去找特定的开源程序-这种命中率显然没有直接用特征目录的命中率高"><a href="#当然-你也可以根据下面的一些特征去找特定的开源程序-这种命中率显然没有直接用特征目录的命中率高" class="headerlink" title="当然,你也可以根据下面的一些特征去找特定的开源程序[这种命中率显然没有直接用特征目录的命中率高]:"></a>当然,你也可以根据下面的一些特征去找特定的开源程序[这种命中率显然没有直接用特征目录的命中率高]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">power by wordpress                powered by discuz x3.<span class="number">2</span></div><div class="line">powered by phpcms <span class="number">2008</span>            powered by drupal <span class="number">7</span></div><div class="line">powered by dedecmsv57_gbk         powered by CubeCart <span class="number">3.0</span>.<span class="number">6</span></div><div class="line">Powered by phpBB <span class="number">2.0</span>.<span class="number">6</span>            powered by paBugs <span class="number">2.0</span> Beta <span class="number">3</span></div><div class="line"><span class="symbol">inurl:</span>wp-login.php                <span class="symbol">inurl:</span>/administrator/index.php    </div><div class="line"><span class="symbol">inurl:</span>/admina.php</div></pre></td></tr></table></figure>
<h5 id="批量搜集目标是否用了一些存在漏洞的邮件程序-不一定有-多尝试-反正是搜集-找到东西价值越高越好"><a href="#批量搜集目标是否用了一些存在漏洞的邮件程序-不一定有-多尝试-反正是搜集-找到东西价值越高越好" class="headerlink" title="批量搜集目标是否用了一些存在漏洞的邮件程序[不一定有,多尝试,反正是搜集,找到东西价值越高越好]:"></a>批量搜集目标是否用了一些存在漏洞的邮件程序[不一定有,多尝试,反正是搜集,找到东西价值越高越好]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">owa:</span></div><div class="line"><span class="symbol">inurl:</span>/owa/auth/logon.aspx </div><div class="line"><span class="symbol">inurl:</span>/owa/auth/logon.aspx <span class="symbol">site:</span>*.org.*</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mirapoint(ShellShock):</div><div class="line"><span class="symbol">inurl:</span>/cgi-bin/search.cgi <span class="symbol">site:</span>*.org.*</div><div class="line"><span class="symbol">inurl:</span>/cgi-bin/madmin.cgi</div></pre></td></tr></table></figure>
<p><img src="/img/google mirapoint.png" alt=""><br></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Zimbra(本地包含):</div><div class="line"><span class="string">inurl:</span><span class="number">7071</span><span class="regexp">/zimbraAdmin/</span></div><div class="line"><span class="string">inurl:</span><span class="regexp">/help/</span>en_US<span class="regexp">/standard/</span>version.htm</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Atmail(用于连接数据库的配置文件泄露):</div><div class="line"></div><div class="line">TurboMail(配置错误,进入任意邮箱):</div><div class="line"></div><div class="line">U-mail(注入&amp;getshell):</div><div class="line"></div><div class="line">Lotus Domino Webmail(越权访问)<span class="symbol">:</span></div></pre></td></tr></table></figure>
<h5 id="批量找常规网站后台-下面的php也可以换成asp-aspx-jsp-多次尝试-因为每个国家对后台的命名习惯各有特色-所以-这里只列举了一些相对命中率比较高的-找到后台以后-记得习惯性多尝试几个弱口令-万能密码未授权之类的东西"><a href="#批量找常规网站后台-下面的php也可以换成asp-aspx-jsp-多次尝试-因为每个国家对后台的命名习惯各有特色-所以-这里只列举了一些相对命中率比较高的-找到后台以后-记得习惯性多尝试几个弱口令-万能密码未授权之类的东西" class="headerlink" title="批量找常规网站后台[下面的php也可以换成asp,aspx,jsp 多次尝试,因为每个国家对后台的命名习惯各有特色,所以,这里只列举了一些相对命中率比较高的,找到后台以后,记得习惯性多尝试几个弱口令,万能密码未授权之类的东西]:"></a>批量找常规网站后台[下面的php也可以换成asp,aspx,jsp 多次尝试,因为每个国家对后台的命名习惯各有特色,所以,这里只列举了一些相对命中率比较高的,找到后台以后,记得习惯性多尝试几个弱口令,万能密码未授权之类的东西]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>/manager/login.php <span class="symbol">site:</span>*.jp</div><div class="line"><span class="symbol">inurl:</span>/cms/login.php <span class="symbol">site:</span>*.jp</div><div class="line"><span class="symbol">inurl:</span>/manage/index.php <span class="symbol">site:</span>*.jp</div><div class="line"><span class="symbol">inurl:</span>/system/login.php <span class="symbol">site:</span>*.jp</div><div class="line"><span class="symbol">inurl:</span>/webadmin/login.php <span class="symbol">site:</span>*.tw</div><div class="line"><span class="symbol">inurl:</span>admin_login.php <span class="symbol">intitle:</span>admin login</div><div class="line"><span class="symbol">inurl:</span>admin_login.php <span class="symbol">intitle:</span>admin page</div><div class="line"><span class="symbol">inurl:</span>/admin/login.php <span class="symbol">site:</span>*.tw</div><div class="line"><span class="symbol">inurl:</span>/admin/index.php <span class="symbol">site:</span>*.tw</div><div class="line"><span class="symbol">inurl:</span>/system/adminlogin.asp  <span class="symbol">site:</span>*.tw</div><div class="line"><span class="symbol">inurl:</span>/manage/login.aspx  <span class="symbol">site:</span>*.tw</div><div class="line"><span class="symbol">inurl:</span>/sysadm/index.php  <span class="symbol">site:</span>*.com</div><div class="line">……</div></pre></td></tr></table></figure>
<p><img src="/img/google manager.png" alt=""><br></p>
<h5 id="找svn泄露-运气好说不定能碰到密码"><a href="#找svn泄露-运气好说不定能碰到密码" class="headerlink" title="找svn泄露[运气好说不定能碰到密码]:"></a>找svn泄露[运气好说不定能碰到密码]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>/.svn/entries </div><div class="line"><span class="symbol">inurl:</span>/.svn/entries <span class="symbol">site:</span>*.org.*</div><div class="line"><span class="symbol">inurl:</span>/.svn/entries <span class="symbol">site:</span>*.gov.br</div><div class="line"><span class="symbol">inurl:</span>/.svn/entries <span class="symbol">site:</span>*.hk</div></pre></td></tr></table></figure>
<p><img src="/img/google svn.png" alt=""><br></p>
<h5 id="批量找目标的后台未授权访问"><a href="#批量找目标的后台未授权访问" class="headerlink" title="批量找目标的后台未授权访问:"></a>批量找目标的后台未授权访问:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intext:</span><span class="string">"Website Design &amp; Developed By : WebSay"</span>  默认后台/admin</div><div class="line"><span class="symbol">intext:</span><span class="string">"Powered by ENS Consultants"</span>  默认后台/admin/login.php</div><div class="line"><span class="symbol">intext:</span><span class="string">"Desenvolvimento - MW Way"</span>    默认后台/admin/index.php</div><div class="line"><span class="symbol">inurl:</span>.php?id= <span class="symbol">intext:</span><span class="string">"Web realizada por Soma Estudio"</span> </div><div class="line"><span class="symbol">inurl:</span>/_mycps/login.php</div></pre></td></tr></table></figure>
<h5 id="批量找弱口令"><a href="#批量找弱口令" class="headerlink" title="批量找弱口令:"></a>批量找弱口令:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intext:</span><span class="string">"design by weli"</span>   默认后台: <span class="regexp">/adm/login</span>.php 除了弱口令还有注入</div><div class="line">username : linjizen@gmail.com</div><div class="line">password : lin719192</div></pre></td></tr></table></figure>
<h5 id="尽可能多的找到能够利用的各种上传点-比如-各种典型的漏洞编辑器地址-ck-kindeditor-fck-ewebeditor……"><a href="#尽可能多的找到能够利用的各种上传点-比如-各种典型的漏洞编辑器地址-ck-kindeditor-fck-ewebeditor……" class="headerlink" title="尽可能多的找到能够利用的各种上传点[比如:各种典型的漏洞编辑器地址,ck,kindeditor,fck,ewebeditor……]:"></a>尽可能多的找到能够利用的各种上传点[比如:各种典型的漏洞编辑器地址,ck,kindeditor,fck,ewebeditor……]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intext:</span><span class="string">" Powered by JADBM "</span>   JADBM Cms upload shell 注册后登陆上传即可</div><div class="line"><span class="symbol">inurl:</span><span class="string">"/index.php/frontend/login/en"</span>  Estate cms upload shell 注册后登陆上传即可</div><div class="line"><span class="symbol">inurl:</span>/Content/Roxy_Fileman/   该路径下直接就是上传点</div><div class="line">index <span class="symbol">of:</span><span class="string">"filemanager/dialog.php"</span>  该脚本就是上传脚本直接上传即可</div><div class="line"><span class="symbol">intext:</span><span class="string">"Desenvolvido por Webnet Soluções Tecnológicas."</span> fck上传</div><div class="line"><span class="symbol">inurl:</span><span class="string">"subir_foto.php"</span> 上传点</div><div class="line"><span class="symbol">inrul:</span><span class="string">"/imce?dir="</span> <span class="symbol">intitle:</span><span class="string">"File Browser"</span></div><div class="line"><span class="symbol">inurl:</span><span class="string">"Powered by Vision Helpdesk 3.9.10 Stable"</span> 注册后登陆进去编辑个人配置上传</div><div class="line">index of /admin/fckeditor <span class="symbol">site:</span>*.tw</div><div class="line"><span class="symbol">inurl:</span>/ewebeditor/  <span class="symbol">site:</span>*.tw</div><div class="line"><span class="symbol">inurl:</span>/admin/upload_file.php</div><div class="line"><span class="symbol">inurl:</span>/admin/upfile.php </div><div class="line"><span class="symbol">inurl:</span>/admin/upload.asp</div></pre></td></tr></table></figure>
<h5 id="找到可能存在包含和命令执行类的漏洞的一些典型参数"><a href="#找到可能存在包含和命令执行类的漏洞的一些典型参数" class="headerlink" title="找到可能存在包含和命令执行类的漏洞的一些典型参数:"></a>找到可能存在包含和命令执行类的漏洞的一些典型参数:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>footer.inc.php?settings=</div><div class="line"><span class="symbol">inurl:</span>/pb_inc/admincenter/index.php?page=</div><div class="line"><span class="symbol">inurl:</span>/pnadmin/categories.inc.php?subpage=</div><div class="line"><span class="symbol">inurl:</span>/index.php??view=src/sistema/vistas/</div><div class="line"><span class="symbol">inurl:</span>/edit.php?em=file&amp;filename=</div><div class="line"><span class="symbol">inurl:</span>/path_to_athena/athena.php?athena_dir= 远程包含</div><div class="line"><span class="symbol">inurl:</span>/path_to_qnews/q-news.php?id=  远程包含</div><div class="line"><span class="symbol">inurl:</span>/inc/backend_settings.php?cmd=</div><div class="line"><span class="symbol">inurl:</span>login.action strus2系列执行漏洞利用</div><div class="line"><span class="symbol">inurl:</span>php?x=                 <span class="symbol">inurl:</span>php?open=</div><div class="line"><span class="symbol">inurl:</span>php?visualizar=        <span class="symbol">inurl:</span>php?pagina=</div><div class="line"><span class="symbol">inurl:</span>php?inc=               <span class="symbol">inurl:</span>php?include_file=</div><div class="line"><span class="symbol">inurl:</span>php?page=              <span class="symbol">inurl:</span>php?pg=</div><div class="line"><span class="symbol">inurl:</span>php?show=              <span class="symbol">inurl:</span>php?cat=</div><div class="line"><span class="symbol">inurl:</span>php?file=              <span class="symbol">inurl:</span>php?path_local=</div><div class="line"><span class="symbol">inurl:</span>php?filnavn=           <span class="symbol">inurl:</span>php?HCL_path=</div><div class="line"><span class="symbol">inurl:</span>php?doc=               <span class="symbol">inurl:</span>php?appdir=</div><div class="line"><span class="symbol">inurl:</span>php?phpbb_root_dir=    <span class="symbol">inurl:</span>php?phpc_root_path=</div><div class="line"><span class="symbol">inurl:</span>php?path_pre=          <span class="symbol">inurl:</span>php?nic=</div><div class="line"><span class="symbol">inurl:</span>php?sec=               <span class="symbol">inurl:</span>php?content=</div><div class="line"><span class="symbol">inurl:</span>php?link=              <span class="symbol">inurl:</span>php?filename=</div><div class="line"><span class="symbol">inurl:</span>php?dir=               <span class="symbol">inurl:</span>php?document=</div><div class="line"><span class="symbol">inurl:</span>index.php?view=        <span class="symbol">inurl:</span>*.php?locate=</div><div class="line"><span class="symbol">inurl:</span>*.php?place=           <span class="symbol">inurl:</span>*.php?layout=</div><div class="line"><span class="symbol">inurl:</span>*.php?go=              <span class="symbol">inurl:</span>*.php?catch=</div><div class="line"><span class="symbol">inurl:</span>*.php?mode=            <span class="symbol">inurl:</span>*.php?name=</div><div class="line"><span class="symbol">inurl:</span>*.php?loc=             <span class="symbol">inurl:</span>*.php?f=</div><div class="line"><span class="symbol">inurl:</span>*.php?inf=             <span class="symbol">inurl:</span>*.php?pg=</div><div class="line"><span class="symbol">inurl:</span>*.php?load=            <span class="symbol">inurl:</span>*.php?naam=</div><div class="line"><span class="symbol">allinurl:</span>php?page=           <span class="symbol">allinurl:</span>php?file= </div><div class="line"><span class="symbol">inurl:</span>php?x=                 <span class="symbol">inurl:</span>admin.php?cal_dir=</div><div class="line"><span class="symbol">inurl:</span>php?<span class="keyword">include</span>=           <span class="symbol">inurl:</span>php?nav=</div><div class="line"><span class="symbol">inurl:</span>*.php?sel=             <span class="symbol">inurl:</span>php?p=</div><div class="line"><span class="symbol">inurl:</span>php?conf=              <span class="symbol">inurl:</span>php?prefix=</div><div class="line"><span class="symbol">inurl:</span>theme.php?THEME_DIR= </div><div class="line"><span class="symbol">inurl:</span>php?lvc_include_dir=  </div><div class="line"><span class="symbol">inurl:</span>php?basepath=          <span class="symbol">inurl:</span>php?pm_path=</div><div class="line"><span class="symbol">inurl:</span>php?user_inc=          <span class="symbol">inurl:</span>php?cutepath=</div><div class="line"><span class="symbol">inurl:</span>php?fil_config=        <span class="symbol">inurl:</span>php?libpach=</div><div class="line"><span class="symbol">inurl:</span>php?pivot_path=        <span class="symbol">inurl:</span>php?rep=</div><div class="line"><span class="symbol">inurl:</span>php?conteudo=          <span class="symbol">inurl:</span>php?root=</div><div class="line"><span class="symbol">inurl:</span>php?configFile         <span class="symbol">inurl:</span>php?pageurl</div><div class="line"><span class="symbol">inurl:</span>php?inter_url          <span class="symbol">inurl:</span>php?url=</div><div class="line"><span class="symbol">inurl:</span>php?cmd=               <span class="symbol">inurl:</span>path.php?my=</div><div class="line"><span class="symbol">inurl:</span>php?xlink=             <span class="symbol">inurl:</span>php?to=</div><div class="line"><span class="symbol">inurl:</span>file.php?disp=</div></pre></td></tr></table></figure>
<h5 id="找可能存在数据库注入各种参数"><a href="#找可能存在数据库注入各种参数" class="headerlink" title="找可能存在数据库注入各种参数:"></a>找可能存在数据库注入各种参数:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>categorysearch.php?indus=</div><div class="line"><span class="symbol">intext:</span><span class="string">"樂天台東民宿網"</span> <span class="symbol">inurl:</span>news_board.php</div></pre></td></tr></table></figure>
<h5 id="小商城类"><a href="#小商城类" class="headerlink" title="小商城类:"></a>小商城类:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span><span class="string">".php?catid="</span> <span class="symbol">intext:</span><span class="string">"View cart"</span></div><div class="line"><span class="symbol">inurl:</span><span class="string">".php?catid="</span> <span class="symbol">intext:</span><span class="string">"Buy Now"</span></div><div class="line"><span class="symbol">inurl:</span><span class="string">".php?catid="</span> <span class="symbol">intext:</span><span class="string">"add to cart"</span></div><div class="line"><span class="symbol">inurl:</span><span class="string">".php?catid="</span> <span class="symbol">intext:</span><span class="string">"shopping"</span></div><div class="line"><span class="symbol">inurl:</span><span class="string">".php?catid="</span> <span class="symbol">intext:</span><span class="string">"boutique"</span></div><div class="line"><span class="symbol">inurl:</span><span class="string">".php?catid="</span> <span class="symbol">intext:</span><span class="string">"/store/"</span></div><div class="line"><span class="symbol">inurl:</span><span class="string">".php?catid="</span> <span class="symbol">intext:</span><span class="string">"/shop/"</span></div><div class="line"><span class="symbol">inurl:</span><span class="string">".php?catid="</span> <span class="symbol">intext:</span><span class="string">"Toys"</span></div><div class="line"><span class="symbol">inurl:</span>details.php?BookID=</div><div class="line"><span class="symbol">inurl:</span>shop.php?<span class="keyword">do</span>=part&amp;id=</div></pre></td></tr></table></figure>
<h5 id="普通cms类"><a href="#普通cms类" class="headerlink" title="普通cms类:"></a>普通cms类:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>article.php?ID=        <span class="symbol">inurl:</span>newsDetail.php?id=</div><div class="line"><span class="symbol">inurl:</span>show.php?id=           <span class="symbol">inurl:</span>newsone.php?id=</div><div class="line"><span class="symbol">inurl:</span>news.php?id=           <span class="symbol">inurl:</span>event.php?id=</div><div class="line"><span class="symbol">inurl:</span>preview.php?id=        <span class="symbol">inurl:</span>pages.php?id=</div><div class="line"><span class="symbol">inurl:</span>main.php?id=           <span class="symbol">inurl:</span>prod_detail.php?id=</div><div class="line"><span class="symbol">inurl:</span>view.php?id=           <span class="symbol">inurl:</span>product.php?id=</div><div class="line"><span class="symbol">inurl:</span>contact.php?Id=        <span class="symbol">inurl:</span>display_item.php?id=</div><div class="line"><span class="symbol">inurl:</span>item.php?id=           <span class="symbol">inurl:</span>view_items.php?id=</div><div class="line"><span class="symbol">inurl:</span>details.asp?id=        <span class="symbol">inurl:</span>profile.asp?id=</div><div class="line"><span class="symbol">inurl:</span>content.asp?id=        <span class="symbol">inurl:</span>display_item.asp?id=</div><div class="line"><span class="symbol">inurl:</span>view_detail.asp?ID=    <span class="symbol">inurl:</span>section.php?id=</div><div class="line"><span class="symbol">inurl:</span>theme.php?id=          <span class="symbol">inurl:</span>produit.php?id=</div><div class="line"><span class="symbol">inurl:</span>chappies.php?id=       <span class="symbol">inurl:</span>readnews.php?id=</div><div class="line"><span class="symbol">inurl:</span>rub.php?idr=           <span class="symbol">inurl:</span>pop.php?id=</div><div class="line"><span class="symbol">inurl:</span>person.php?id=         <span class="symbol">inurl:</span>read.php?id=</div><div class="line"><span class="symbol">inurl:</span>reagir.php?num=        <span class="symbol">inurl:</span>staff_id=</div><div class="line"><span class="symbol">inurl:</span>gallery.php?id=        <span class="symbol">inurl:</span>humor.php?id=</div><div class="line"><span class="symbol">inurl:</span>spr.php?id=            <span class="symbol">inurl:</span>gery.php?id=</div><div class="line"><span class="symbol">inurl:</span>profile_view.php?id=</div><div class="line"><span class="symbol">inurl:</span>fellows.php?id=        <span class="symbol">inurl:</span>ray.php?id=</div><div class="line"><span class="symbol">inurl:</span>productinfo.php?id=</div><div class="line"><span class="symbol">inurl:</span>file.php?cont=         <span class="symbol">inurl:</span><span class="keyword">include</span>.php?chapter=</div><div class="line"><span class="symbol">inurl:</span>principal.php?param=</div><div class="line"><span class="symbol">inurl:</span>general.php?menue=     <span class="symbol">inurl:</span>php?pref=</div><div class="line"><span class="symbol">inurl:</span>nota.php?chapter=      <span class="symbol">inurl:</span>php?str=</div><div class="line"><span class="symbol">inurl:</span>php?corpo=             <span class="symbol">inurl:</span>press.php?*[*]*=</div></pre></td></tr></table></figure>
<h5 id="除了上面这些常规找注入的方式-你不妨还可以像下面这样-直接在网页标题中搜SQL语句-说不定也会有收获哦-web万能的谷歌"><a href="#除了上面这些常规找注入的方式-你不妨还可以像下面这样-直接在网页标题中搜SQL语句-说不定也会有收获哦-web万能的谷歌" class="headerlink" title="除了上面这些常规找注入的方式,你不妨还可以像下面这样,直接在网页标题中搜SQL语句,说不定也会有收获哦,web万能的谷歌:"></a>除了上面这些常规找注入的方式,你不妨还可以像下面这样,直接在网页标题中搜SQL语句,说不定也会有收获哦,web万能的谷歌:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intitle:</span>注入常用的一些sql语句,比如<span class="symbol">:</span>常用的union,substr(),select等等……</div></pre></td></tr></table></figure>
<h5 id="批量搜集万能密码-属于注入的一种"><a href="#批量搜集万能密码-属于注入的一种" class="headerlink" title="批量搜集万能密码(属于注入的一种):"></a>批量搜集万能密码(属于注入的一种):</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span><span class="string">"wladmin/login.asp"</span>  </div><div class="line">Username : <span class="string">'='</span> <span class="string">'or'</span></div><div class="line">Password : <span class="string">'='</span> <span class="string">'or'</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intext:</span>POWERED BY Versatile Software Services       默认后台/alogin.aspx</div><div class="line">User ==&gt; <span class="string">'or'</span><span class="string">'='</span></div><div class="line">Pass ==&gt; <span class="string">'or'</span><span class="string">'='</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>/media.php?hal=login</div><div class="line"><span class="symbol">Email:</span> <span class="string">'='</span><span class="string">'or'</span>@gmail.com</div><div class="line"><span class="symbol">Pass:</span> <span class="string">'='</span><span class="string">'or'</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intext:</span><span class="string">"Powered by : Best Webmasterz."</span> 默认后台/admin</div><div class="line">User : <span class="string">'='</span> <span class="string">'OR'</span></div><div class="line">Pass : <span class="string">'='</span> <span class="string">'OR'</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intext:</span><span class="string">"Web Design and Maintenance by Cloud 5 Solutions"</span> 默认后台/admin/login.php</div><div class="line">User : <span class="string">'='</span> <span class="string">'OR'</span></div><div class="line">Pass : <span class="string">'='</span> <span class="string">'OR'</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intext:</span><span class="string">"网站设计：火龙科技"</span> 默认后台/maintain/login.php</div><div class="line">Username : <span class="string">'='</span> <span class="string">'or'</span></div><div class="line">Password : <span class="string">'='</span> <span class="string">'or'</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intext:</span><span class="string">"Powered by Moodyworld"</span> 默认后台/admin/</div><div class="line">Username : <span class="string">'='</span> <span class="string">'or'</span></div><div class="line">Password : <span class="string">'='</span> <span class="string">'or'</span></div></pre></td></tr></table></figure>
<h5 id="找遗留的各种数据库报错-物理路径-数据库版本-服务器探针类文件等等……"><a href="#找遗留的各种数据库报错-物理路径-数据库版本-服务器探针类文件等等……" class="headerlink" title="找遗留的各种数据库报错,物理路径,数据库版本,服务器探针类文件等等……"></a>找遗留的各种数据库报错,物理路径,数据库版本,服务器探针类文件等等……</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">site:</span>*.tw  <span class="symbol">inurl:</span>/phpinfo.php</div><div class="line"><span class="symbol">filetype:</span>log <span class="string">"PHP Parse error"</span><span class="params">| "PHP Warning"</span></div><div class="line">site:*.tw  "id=" &amp; intext:"Warning: mysql_fetch_array()</div><div class="line">site:*.jp  "id=" &amp; intext:"Warning: getimagesize()</div><div class="line">site:*.br  "id=" &amp; intext:"Warning: array_merge()</div><div class="line">site:*.tw  "id=" &amp; intext:"Warning: mysql_fetch_assoc()</div><div class="line">site:*.tw  "id=" &amp; intext:"Warning: mysql_result()</div><div class="line">site:*.jp  "id=" &amp; intext:"Warning: pg_exec()</div><div class="line">site:*.tw  "id=" &amp; intext:"Warning: <span class="keyword">require</span>()</div><div class="line">inurl:/robots.txt site:*.*</div></pre></td></tr></table></figure>
<p><img src="/img/google mysql error.png" alt=""><br></p>
<h5 id="搜集各种账号密码-比如-数据库密码-ftp-vpn-htpasswd-telnet等等……"><a href="#搜集各种账号密码-比如-数据库密码-ftp-vpn-htpasswd-telnet等等……" class="headerlink" title="搜集各种账号密码,比如,数据库密码,ftp,vpn,htpasswd,telnet等等……:"></a>搜集各种账号密码,比如,数据库密码,ftp,vpn,htpasswd,telnet等等……:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">可能会遗留的密码文件:</div><div class="line"></div><div class="line"><span class="symbol">inurl:</span>passlist.txt</div><div class="line"><span class="symbol">inurl:</span>password.txt</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">重要配置文件泄露:</div><div class="line"></div><div class="line"><span class="symbol">inurl:</span>/application/configs/  配置文件名为/application/configs/application.ini</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">htpasswd:</span></div><div class="line"></div><div class="line">htpasswd.bak <span class="symbol">filetype:</span>htpasswd</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vpn(cisco)[捅内网,非常有用]:</div><div class="line"></div><div class="line"><span class="symbol">filetype:</span>pcf  <span class="string">"GroupPwd"</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">##### cisco在线密码解密网站:</span></div><div class="line"><span class="symbol">https:</span>/<span class="regexp">/www.unix-ag.uni-kl.de/</span>~massar/bin/cisco-decode</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ftp 账号密码:</div><div class="line"></div><div class="line"><span class="string">"index of/"</span> <span class="string">"ws_ftp.ini"</span> <span class="string">"parent directory"</span></div><div class="line"><span class="string">"your password is"</span> <span class="symbol">filetype:</span>log</div><div class="line"><span class="symbol">filetype:</span>ini <span class="symbol">inurl:</span><span class="string">"serv-u.ini"</span></div><div class="line"><span class="symbol">filetype:</span>ini <span class="symbol">inurl:</span>flashFXP.ini</div><div class="line"><span class="symbol">filetype:</span>ini ServUDaemon</div><div class="line"><span class="symbol">filetype:</span>ini wcx_ftp</div><div class="line"><span class="symbol">filetype:</span>ini ws_ftp pwd</div><div class="line"><span class="symbol">ext:</span>inc <span class="string">"pwd="</span> <span class="string">"UID="</span></div><div class="line">auth_user_file.txt</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">例如:</div><div class="line"></div><div class="line">http://www.cryptoman.com/ftp/</div><div class="line">http://www.cryptoman.com/ftp/WS_FTP.ini</div></pre></td></tr></table></figure>
<h5 id="其他密码"><a href="#其他密码" class="headerlink" title="其他密码:"></a>其他密码:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">admin account info<span class="string">" filetype:log</span></div></pre></td></tr></table></figure>
<h5 id="找目录遍历-上传点-数据库文件下载-phpmyadmin-网站后台及各种网站备份-源代码泄露等-同样也可以用这种方式慢慢找"><a href="#找目录遍历-上传点-数据库文件下载-phpmyadmin-网站后台及各种网站备份-源代码泄露等-同样也可以用这种方式慢慢找" class="headerlink" title="找目录遍历[上传点,数据库文件下载,phpmyadmin,网站后台及各种网站备份,源代码泄露等,同样也可以用这种方式慢慢找]:"></a>找目录遍历[上传点,数据库文件下载,phpmyadmin,网站后台及各种网站备份,源代码泄露等,同样也可以用这种方式慢慢找]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">site:</span>*.hk index of /admin</div><div class="line"><span class="symbol">site:</span>*.hk index of /upfiles</div><div class="line"><span class="symbol">site:</span>*.hk index of /fckeditor/editor/</div><div class="line"><span class="symbol">site:</span>*.tw index of /admin/uploadfile</div><div class="line"><span class="symbol">site:</span>*.tw index of /admin/file</div><div class="line"><span class="symbol">site:</span>*.tw index of /system/file</div><div class="line"><span class="symbol">site:</span>*.tw index of /phpmyadmin</div><div class="line"><span class="symbol">site:</span>*.tw index of /web/backup/</div><div class="line"><span class="symbol">inurl:</span>/phpmyadmin/index.php <span class="symbol">site:</span>*.tw</div></pre></td></tr></table></figure>
<h5 id="搜同行们的各种工具脚本"><a href="#搜同行们的各种工具脚本" class="headerlink" title="搜同行们的各种工具脚本:"></a>搜同行们的各种工具脚本:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">绝大部分人在用别人东西的时候,基本是很少看里面代码的[即使开源],更不要说去除特征及后门,没办法现状如此,大家都很懒,既是如此,就不免要把自己的成果也被迫的共享给别人一份,所以养成良好的读代码习惯,是非常有必要的</div></pre></td></tr></table></figure>
<h5 id="搜同行的脱裤脚本"><a href="#搜同行的脱裤脚本" class="headerlink" title="搜同行的脱裤脚本:"></a>搜同行的脱裤脚本:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">intitle:</span>登录 - Adminer    这里只是随便举个例子,你可以自己平时多搜集一些境内外常用的脱裤脚本的标题,文件名什么的,慢慢尝试,root空密码也很正常</div></pre></td></tr></table></figure>
<h5 id="同样-你也可以用上面这种方式来找下别人的aspx嗅探脚本-例如"><a href="#同样-你也可以用上面这种方式来找下别人的aspx嗅探脚本-例如" class="headerlink" title="同样,你也可以用上面这种方式来找下别人的aspx嗅探脚本,例如:"></a>同样,你也可以用上面这种方式来找下别人的aspx嗅探脚本,例如:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">websniff</div></pre></td></tr></table></figure>
<h5 id="找别人遗留的各种webshell-平时注意多搜集一些镜内外常用的大马特征-这里只是随便举几个例子-你可以随意组装自己的"><a href="#找别人遗留的各种webshell-平时注意多搜集一些镜内外常用的大马特征-这里只是随便举几个例子-你可以随意组装自己的" class="headerlink" title="找别人遗留的各种webshell,平时注意多搜集一些镜内外常用的大马特征,这里只是随便举几个例子,你可以随意组装自己的:"></a>找别人遗留的各种webshell,平时注意多搜集一些镜内外常用的大马特征,这里只是随便举几个例子,你可以随意组装自己的:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">inurl:</span>b374k.php <span class="symbol">filetype:</span>php</div><div class="line"><span class="symbol">inurl:</span>c99.php</div><div class="line"><span class="symbol">inurl:</span>c10<span class="number">0</span>.php Generation <span class="symbol">time:</span></div><div class="line"><span class="symbol">inurl:</span>itsecteam_shell.php</div><div class="line"><span class="symbol">intext:</span>x230<span class="number">0</span> Locus7Shell v. <span class="number">1.0</span>a beta Modded by</div><div class="line"><span class="symbol">intext:</span>c99shell <span class="symbol">inurl:</span>c99.php</div><div class="line">powered by Captain Crunch Security Team</div><div class="line"><span class="string">"inurl:c99.php"</span> + <span class="string">"intext:safe"</span></div><div class="line"><span class="symbol">intitle:</span>r57shell</div><div class="line"><span class="symbol">intitle:</span>c99shell +uname</div><div class="line"><span class="symbol">inurl:</span>c99.php uid=<span class="number">0</span>(root)</div><div class="line"><span class="symbol">intitle:</span>c99shell+<span class="symbol">filetype:</span>php</div><div class="line"><span class="symbol">intitle:</span>ly0kha shell</div><div class="line"><span class="symbol">inurl:</span>.php <span class="string">"cURL: ON MySQL: ON MSSQL: OFF"</span></div><div class="line"><span class="string">"Shell"</span> filetypehp <span class="symbol">intext:</span><span class="string">"uname -a:"</span> <span class="string">"EDT 2010"</span></div><div class="line"><span class="symbol">intitle:</span><span class="string">"intitle:r57shell"</span></div><div class="line"><span class="symbol">inurl:</span><span class="string">"c99.php"</span> &amp; <span class="symbol">intext:</span>Encoder Tools Proc. </div><div class="line"><span class="symbol">inurl:</span><span class="string">"c100.php"</span> &amp; <span class="symbol">intext:</span>Encoder Tools Proc. </div><div class="line"><span class="symbol">intitle:</span><span class="string">"Shell"</span> <span class="symbol">inurl:</span><span class="string">".php"</span> &amp; <span class="symbol">intext:</span>Encoder Tools Proc.</div></pre></td></tr></table></figure>
<p><img src="/img/google webshell.png" alt=""><br></p>
<h5 id="还有其他的更多工具特征-就留给大家自己去整理了"><a href="#还有其他的更多工具特征-就留给大家自己去整理了" class="headerlink" title="还有其他的更多工具特征,就留给大家自己去整理了"></a>还有其他的更多工具特征,就留给大家自己去整理了</h5><p><br></p>
<h5 id="找到目标的owa和vpn入口-内网入口"><a href="#找到目标的owa和vpn入口-内网入口" class="headerlink" title="找到目标的owa和vpn入口[内网入口]:"></a>找到目标的owa和vpn入口[内网入口]:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">owa入口:</div><div class="line">  <span class="symbol">inurl:</span>/owa/auth/logon <span class="symbol">intitle:</span>outlook</div><div class="line">  <span class="symbol">inurl:</span>/owa/auth/logon <span class="symbol">intext:</span>outlook</div><div class="line">   </div><div class="line">vpn入口:</div><div class="line">  <span class="symbol">inurl:</span>/sslvpn <span class="symbol">site:</span>hk</div></pre></td></tr></table></figure>
<h5 id="找些好下手的目标子域"><a href="#找些好下手的目标子域" class="headerlink" title="找些好下手的目标子域:"></a>找些好下手的目标子域:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">site:</span>polyu.edu.hk <span class="symbol">inurl:</span>asp?pid=</div><div class="line"><span class="symbol">site:</span>polyu.edu.hk <span class="symbol">inurl:</span>aspx?id=</div><div class="line"><span class="symbol">site:</span>polyu.edu.hk <span class="symbol">inurl:</span>php?id=</div><div class="line"><span class="symbol">site:</span>polyu.edu.hk <span class="symbol">inurl:</span>jsp?id=</div><div class="line"><span class="symbol">site:</span>polyu.edu.hk <span class="symbol">inurl:</span><span class="keyword">do</span>?id=</div><div class="line"><span class="symbol">site:</span>polyu.edu.hk <span class="symbol">inurl:</span>cgi?id=</div></pre></td></tr></table></figure>
<h5 id="找目标的数据库备份及其他敏感文件目录-后缀一般为-sql-mdb-txt……-像数据库和网站备份这种东西-还是建议直接用工具跑比较好-前提是字典务必要精心制作"><a href="#找目标的数据库备份及其他敏感文件目录-后缀一般为-sql-mdb-txt……-像数据库和网站备份这种东西-还是建议直接用工具跑比较好-前提是字典务必要精心制作" class="headerlink" title="找目标的数据库备份及其他敏感文件目录[后缀一般为 sql,mdb,txt……],像数据库和网站备份这种东西,还是建议直接用工具跑比较好,前提是字典务必要精心制作:"></a>找目标的数据库备份及其他敏感文件目录[后缀一般为 sql,mdb,txt……],像数据库和网站备份这种东西,还是建议直接用工具跑比较好,前提是字典务必要精心制作:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">filetype:</span>sql <span class="symbol">inurl:</span>backup <span class="symbol">inurl:</span>wp-content</div><div class="line"><span class="symbol">inurl:</span>/eWebEditor/db/ <span class="symbol">site:</span>*.com</div></pre></td></tr></table></figure>
<h5 id="从目标网站上搜集目标邮箱-目标网站上的邮箱价值一般不是特别大"><a href="#从目标网站上搜集目标邮箱-目标网站上的邮箱价值一般不是特别大" class="headerlink" title="从目标网站上搜集目标邮箱,目标网站上的邮箱价值一般不是特别大:"></a>从目标网站上搜集目标邮箱,目标网站上的邮箱价值一般不是特别大:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">site:</span>*.gov.tw *@gov.tw</div></pre></td></tr></table></figure>
<h5 id="关于google-hacking的东西基本就到此为止了-最后再推荐一个不错的google-dorks站点-方便大家练习"><a href="#关于google-hacking的东西基本就到此为止了-最后再推荐一个不错的google-dorks站点-方便大家练习" class="headerlink" title="关于google hacking的东西基本就到此为止了,最后再推荐一个不错的google dorks站点,方便大家练习:"></a>关于google hacking的东西基本就到此为止了,最后再推荐一个不错的google dorks站点,方便大家练习:</h5><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">https://cxsecurity.com/exploit/  非常推荐</div><div class="line">https://www.exploit-db.com/google-hacking-database/ 并不推荐,exp不错,但这方面比较废</div></pre></td></tr></table></figure>
<h5 id="关于谷歌的一些好玩的小玩具-无聊的时候可以自己玩玩-方法很简单-直接在谷歌里面搜下面的关键字就行了-说实话比百度人性多了"><a href="#关于谷歌的一些好玩的小玩具-无聊的时候可以自己玩玩-方法很简单-直接在谷歌里面搜下面的关键字就行了-说实话比百度人性多了" class="headerlink" title="关于谷歌的一些好玩的小玩具,无聊的时候可以自己玩玩,方法很简单,直接在谷歌里面搜下面的关键字就行了(说实话比百度人性多了):"></a>关于谷歌的一些好玩的小玩具,无聊的时候可以自己玩玩,方法很简单,直接在谷歌里面搜下面的关键字就行了(说实话比百度人性多了):</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">do</span> a barrel roll</div><div class="line">Askew </div><div class="line">zerg rush</div><div class="line">google sphere</div><div class="line">atari breakout 图片碰碰球</div><div class="line">google gravity 碎片</div><div class="line">google sky</div><div class="line">blink html 抖动</div></pre></td></tr></table></figure>
<h5 id="想必说大这里-你已经可以发现google到底是有多么的强大了"><a href="#想必说大这里-你已经可以发现google到底是有多么的强大了" class="headerlink" title="想必说大这里,你已经可以发现google到底是有多么的强大了:"></a>想必说大这里,你已经可以发现google到底是有多么的强大了:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">错误配置,敏感文件目录,各种信息泄露(源码泄露,重要配置文件泄露,密码泄露等),批量漏洞利用,最强大的社工库资源等等……你在web上所能利用到的一切,无死角尝试就可以了</div></pre></td></tr></table></figure>
<h5 id="其他的一些小恶作剧-也不小了-不要瞎弄-做错了事始终要承担责任的"><a href="#其他的一些小恶作剧-也不小了-不要瞎弄-做错了事始终要承担责任的" class="headerlink" title="其他的一些小恶作剧,也不小了,不要瞎弄,做错了事始终要承担责任的:"></a>其他的一些小恶作剧,也不小了,不要瞎弄,做错了事始终要承担责任的:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">搜集个人身份证信息</div><div class="line"><span class="symbol">filetype:</span>xls 身份证 <span class="symbol">site:</span>cn</div><div class="line"></div><div class="line">搜集被盗QQ号什么的</div><div class="line">搜集别人还在有效期的信用卡,千万不要干坏事儿哦,不然后果你懂的……</div><div class="line"></div><div class="line">另外,还有图片识别,位置识别,谷歌为我提供了很多很强大的功能,有必要的话可以去深入学习下如何使用谷歌的这些api</div></pre></td></tr></table></figure>
<p><br></p>
<h5 id="关于robots-txt文件的作用"><a href="#关于robots-txt文件的作用" class="headerlink" title="关于robots.txt文件的作用:"></a>关于robots.txt文件的作用:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;此文件一般位于网站根目录下,规定了搜索引擎不能爬行的一些目录,一般都是一些敏感目录,比如:后台,数据库连接配置文件,安装目录等等……一般我们在试了几个常用的后台目录都不行的情况,习惯性的就会直接去访问下目标的robots.txt文件,很可能这文件里面就存的有后台路径但,那只是有可能,不尝试,连可能都没有<br><br></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/13/bypasscdn/">
                web渗透第一步之信息搜集 [ 透过cdn找目标真实ip ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-13</span>
            
            
            
                <span class="category">
                    <a href="/categories/bypasscdn/">bypasscdn</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br>1,在了解cdn之前,有必要先来科普下什么是负载均衡以及反向/正向代理,既然选择了做渗透,有些基础概念不熟悉肯定是不行的<br><br><br> 什么是正向代理[ForwardProxy]:<br>&nbsp;&nbsp;&nbsp;&nbsp;其实,大家默认说的代理都是正向代理,不管是正向还是反向,理解数据的流向很重要,要理解这种比较抽象的东西,最好的方式就是画图,比如下图就是一个正向代理的简易流程,要表达的意思,已经很清晰了,就是说当客户端要去请求远程server上的资源时,并非直接通过本地路由网关到达远程server,而是先经过代理服务器,由代理服务器去帮我们请求,之后远程服务器会把请求的结果返回给代理服务器再由代理服务器返回给客户端,这么一个过程就叫做正向代理,其实你还可以理解的更粗暴一点,它有点儿类似我们常说的 ‘翻墙’,正常情况我自己是不能直接上谷歌的,但我找了一个能上谷歌的代理,然后我们请求谷歌的时候可以让代理服务器去帮我们请求,最后,再通过代理服务器把响应的数据返回到我本地,这么一个过程,包括我们常用的vpn其实也有点儿类似的功能(当然,这里只是粗略的类似,但vpn本质[隧道]上是什么,在前面已经有相关说明),不过现在正向代理可能用的比较少了,以前用代理服务器只是为了提高访问速度[因为缓存的原因],可以节省带宽,也可以在代理服务器上做些访问限制……<br><br><br>
        </div>
        <a href="/2014/12/13/bypasscdn/" class="read-more">Read More</a>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/12/subdomain-info-serarch/">
                web渗透第一步之信息搜集 [搜集目标子域,旁站及C段信息]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-12</span>
            
            
            
                <span class="category">
                    <a href="/categories/search-info/">search info</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br>1,如果一个目标比较大,直接从目标主域开始[因为防的比较好],可能不太好下手,这时从目标的某个子域先进去,然后再想办法迂回接近我们的目标,无疑是个比较好的选择[所以说,安全是一个全面立体的概念,仅仅是边界几个点的安全,还是远远不够的]<br><br><br>2,那么,现在问题来了,怎么尽可能多的搜集目标子域呢<br><br><br>3,出于习惯性的反应,你应该首先去查下目标的ns服务器是否允许区域传送,如果允许,直接把目标的整个子域都备份过来即可,后面接下来要说的所有步骤就可以直接全省了,关于dig和nslookup的使用,请自行看命令帮助或谷歌之,实际测试中,个人更推荐dig:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">查目标的ns记录,然后挨个尝试目标ns服务器[务必是目标自己的ns服务器,第三方的不算]是否允许传送,虽然说,可能性不太大,但运气好也不一定呢,总之,多尝试就是了:</div><div class="line"><span class="comment"># dig +short @8.8.8.8 cityu.edu.hk ns</span></div><div class="line">vax.cityu.edu.hk.</div><div class="line">cpccspc.cityu.edu.hk.</div><div class="line">cpccux<span class="number">0</span>.cityu.edu.hk.</div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">通过上面的查询,我们确定了目标自己的三个dns服务器,下面就来尝试逐个传送[这里一定要注意,必须用目标自己的ns服务器来解析它自己的子域,如果还没搞清楚传送的具体原理,请务必先自行谷歌理解漏洞原理在来操作]:</div><div class="line"><span class="comment"># dig +nocmd <span class="doctag">@vax</span>.cityu.edu.hk cityu.edu.hk axfr</span></div><div class="line"><span class="comment"># dig +nocmd <span class="doctag">@cpccspc</span>.cityu.edu.hk cityu.edu.hk axfr</span></div><div class="line"><span class="comment"># dig +nocmd <span class="doctag">@cpccux</span>0.cityu.edu.hk cityu.edu.hk axfr</span></div></pre></td></tr></table></figure>
<p><img src="/img/dig ns cityue.edu.hk axfr.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">很显然,上面的这些ns服务器都不允许传送,这里就给大家一个可以传送的实例,看看实际的传送效果是什么样子的</div><div class="line"><span class="comment"># dig +nocmd <span class="doctag">@dns</span>2.communilink.net i-software.com.hk axfr</span></div></pre></td></tr></table></figure>
<p><img src="/img/dig axfr scuued.png" alt=""><br></p>
<p>4,如果目标ns服务器实在不允许传送,我们就要开始后面的步骤了,查记录,因为从这里也能获取一些目标子域,虽然想借此直接下手的可能性不太大,但对我们来讲同样有用<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">查目标的mx记录:</div><div class="line"><span class="comment"># dig +short cityu.edu.hk @8.8.8.8 mx</span></div><div class="line">smtp.cityu.edu.hk</div></pre></td></tr></table></figure></p>
<p><br></p>
<p>5,不让传送,其实也没什么特别好的办法,爆破呗,对于这类的子域爆破脚本,质量也是参差不齐,既然有成品,我们不妨就直接拿过来改吧改吧用,像这种小脚本,没必要非花那个时间去自己写(当然,如果你想练练代码还是很有必要的),不过,还是要先说明下,既然是个人写的小脚本,报错,不稳定,程序异常,是常有的事,毕竟,没有经过很多人长时间的测试,但我们的要求是能用,结果正确,相对稳定可靠即可,效率可暂时不做过多考虑<br><br><br>6,介绍两款自己常用的perl脚本,功能强大,且较稳定,不出意外的情况下,一般都是自己的首选<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dnsenum 	常用选项[信息规整,相对比较全面,ns,mx,a记录,尝试传送,从搜索引擎上抓取目标子域[谷歌,不太好使],自动爆破,最后把获取目标的所有的ip段以CIDR格式列出来,工具的整个执行流程跟我们之前手工的几乎是一模一样的]:</div><div class="line">-t 		指定爆破线程</div><div class="line">--dnsserver 	指定用于查询的dns服务器地址</div><div class="line">-f 		指定子域字典</div><div class="line">--enum		三个选项的集合 --threads <span class="number">5</span> -s <span class="number">15</span> -w</div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dnsenum--dnsserver 8.8.8.8 --enum -f /usr/share/dnsenum/dns.txt cityu.edu.hk</span></div></pre></td></tr></table></figure>
<p><img src="/img/dnsenum record.png" alt=""><br><br><img src="/img/dnsenum translate.png" alt=""><br><br><img src="/img/dnsenum domain.png" alt=""><br><br><img src="/img/dnsenum class c.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fierce 		常用选项[功能基本同dnsenum,推荐,实际测试中,效果会更好一些,速度很快,结果相对比较准]:</div><div class="line">-dns		指定要爆破的目标子域</div><div class="line">-dnsserver 	指定用域查询的dns服务器</div><div class="line">-threads	指定爆破线程</div><div class="line">-wordlist	指定域名字典</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># fierce -dns cityu.edu.hk -dnsserver 8.8.8.8 -threads 20 -wordlist /usr/share/dnsenum/dns.txt</span></div></pre></td></tr></table></figure>
<p><img src="/img/fierce res.png" alt=""><br><br><img src="/img/fierce class c.png" alt=""><br></p>
<p>7,其它的一些子域爆破脚本:<br>后面的几个工具基本都要依赖dnspython库,所以,需要事先安装下,不过,在最新版的kali,默认就已经装了:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># apt-get install python-dnspython</span></div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">subbrute(说实话,并不怎么好用,速度慢,而且不太准):</div><div class="line">关于此脚本库依赖,配置详情,请自行参考 <span class="symbol">https:</span>/<span class="regexp">/github.com/</span>TheRook/subbrute </div><div class="line">names.txt		子域字典</div><div class="line">resolvers.txt 		用于请求的dns服务器地址</div><div class="line">target.txt		准备好目标域名文件</div><div class="line">-s 			指定自己的子域字典,默认会使用当前目录下的names.txt</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># python subbrute.py -t target_domain.txt -c 16 -s /usr/share/dnsenum/dns.txt</span></div></pre></td></tr></table></figure>
<p><img src="/img/subbrute.png" alt=""><br></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">subDomainsBrute[效果很一般,用的很少]:</div><div class="line">关于此脚本依赖及配置,请参考 https://github.com/lijiejie/subDomainsBrute</div><div class="line">dns_servers.txt 	存放用于请求的dns服务器地址,里面最好加上谷歌的8.8.8.8</div><div class="line">-t 	指定扫描线程</div><div class="line">-f 	指定用于爆破的域名字典</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># pip install dnspython gevent</span></div><div class="line"><span class="comment"># python subDomainsBrute.py -t 200 -f /usr/share/dnsenum/dns.txt cityu.edu.hk</span></div></pre></td></tr></table></figure>
<p><img src="/img/subDomainBrute.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Sublist3r(跟上面的纯字典爆破不同的是,该脚本是从各类搜索引擎中抓取目标子域,谷歌抓取一直都有问题[验证改的贼快,尼玛,不付费看来是不太好使了],顺带的端口探测还是蛮不错的,较实用,对了,使用该脚本务必挂上vpn,你应该懂的):</div><div class="line">在最新版的kali中,所依赖的各种py库已安装,更多脚本详情请参考 <span class="symbol">https:</span>/<span class="regexp">/github.com/aboul</span>3la/Sublist3r</div><div class="line">-d 	指定要爆破的目标子域</div><div class="line">-p 	扫描那些已经爆出来的子域所开放的端口</div><div class="line">-t 	指定爆破线程</div><div class="line">-e 	指定要爬取的搜索引擎,默认是从所有搜索引擎上抓取</div><div class="line">-b 	启用暴力破解模块</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># pip install -r requirements.txt</span></div><div class="line"><span class="comment"># python sublist3r.py -d cityu.edu.hk -p 80,443,8080 端口不宜太多,不然速度会很慢</span></div></pre></td></tr></table></figure>
<p><img src="/img/sublist3r.png" alt=""><br><br><img src="/img/sublist3r res.png" alt=""><br></p>
<p>8,前面基本都是一些在终端下跑的py小脚本,下面再来介绍一款纯图形化的信息搜集工具(它本身的功能还是非常实用的,抓取目标子域只是它的一个辅助小功能而已)foca[对于大目标非常好使],它最开始是用来搜集目标站点的各种元数据的[至于元数据是什么,里面包括哪些东西,请自行谷歌],但现在包括常规的web漏洞扫描,错误配置扫描,自定义谷歌dorks,支持外部插件等等……,功能已经非常完善了,而且纯图形化,配置选项[可使用google或者bing api]也是一目了然,相信大家一上手就会了,关键是能用它爬到我们想要的东西,最好再提醒一句,务必挂上vpn,谷歌可能有时还是用不了,尼玛<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">工具官方站点, <span class="symbol">https:</span>/<span class="regexp">/www.elevenpaths.com/labstools</span><span class="regexp">/foca/</span>   	请自行下载</div></pre></td></tr></table></figure></p>
<p><img src="/img/foca.png" alt=""><br></p>
<p>9,相信国内不少人对seay的Layer 比较熟悉,说实话,我自己用的比较少,工具总体上来讲,还算可以吧,除了爆破,顺便还会把http响应头中的各字段数据截取一下,使用非常简单,调好线程……给个目标子域,跑起来即可,字典文件和程序在同目录,如果你觉得它的字典质量不高,可以自己往里面加一些子域名,或者干脆用自己的字典,说实话,实际测试效果很一般<br><img src="/img/layer.png" alt=""><br></p>
<p>10,目标大的话,找下C端网站也未尝不可,有机会还是能跨过去的<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># masscan -p 80,81,82,443,8080,8081 144.214.2.0/24 --rate=100</span></div></pre></td></tr></table></figure></p>
<p>11,如果你真的不太相信这类工具的话,也可以自己手工在google上一个个的翻,逐个分析判断,说不定可以找到很多工具发现不到的更有价值的子域,这绝逼不是开玩笑,工具可能由于各种各样的原因,很多时候并不那么靠谱,这都很正常,手工虽然会累点,但我们可以根据目标的实际价值做适当的取舍,总之,主要是看你要的是精准率还是图简单方便:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">site:</span>*.cityu.edu.hk谷歌找子域</div><div class="line"><span class="symbol">hostname:</span><span class="string">"cityu.edu.hk"</span>shodan可能效果会更好一点</div></pre></td></tr></table></figure></p>
<h5 id="小结"><a href="#小结" class="headerlink" title="小结:"></a>小结:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;关于子域的查找办法,基本就这些了,不管是硬破还是从各种搜索引擎上抓取,我们最终目的只是为了想法设法接近我们的目标或者拿到一个边界入口,为我们后续方便进入目标内部先铺好路,工具仅仅只是为了辅助我们快速完成这一目的,并非决定性因素,所以也大可不必在这类的工具上花太多时间,知道你自己想要的是什么极好了,还是那句话,你所搜集的每一个信息都有它存在的价值和意义,切记不要盲目<br><br><br></p>
<h5 id="搜集目标的C段旁站信息-针对某些小型单个目标站点"><a href="#搜集目标的C段旁站信息-针对某些小型单个目标站点" class="headerlink" title="搜集目标的C段旁站信息[针对某些小型单个目标站点]:"></a>搜集目标的C段旁站信息[针对某些小型单个目标站点]:</h5><p>1,什么是旁站<br>在实际渗透过程中,我们可能经常会遇到这样的情况,我们的目标网站做的很到位,从目标网站本身基本上找不到什么比较好的入手点,这时候,如果想要快速拿下目标的话,一般都会先找个目标站点所在服务器上其他的比较好搞的网站下手,然后再想办法跨到目标的网站目录中,前提是有权限,如果实在跨不过去,就只能想办法先提权了,一般我们把这种渗透方式就叫旁站,至于渗透同服其它网站的方法,和常规的web渗透并没什不同,只是绕了个路进去而已,关于web渗透,后续还会有大量的篇幅专门来说明关于它的方方面面,这里先不用着急<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">旁站: 和目标网站在同一台服务器上的其它的网站</div></pre></td></tr></table></figure></p>
<p><br><br>2,什么是C段<br>和旁站差不多的是,旁站是通过同一台服器上的其它网站跨到目标站的目录里,而C段,则是通过目标所在C段的其他任意一台机器,想办法跨到我们的目标机器上,至于怎么跨,嗅探,社工,web……随你便,反正最终目的能跨过去即可,实战可能还会有个问题就是,目标的机器在内网里面,也就是它根本没有公网ip[代理进去的],这种方法可能就不太管用了,另外,如果是虚拟机,这种方式可能也不太好使,因为提权比较难,这只是其中一些问题,很多其它的问题,我们暂时先不说,后续碰到再详细说,这里先理解一下基础概念即可<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C段: 和目标机器ip处在同一个C段的其它机器,即都在同一个交换机下</div></pre></td></tr></table></figure></p>
<p><br><br>3,关于旁站/C段工具的基本编写原理<br>市面上这类的工具多如牛毛,但各有优劣(可能是用的接口质量的不同吧),但大多数都是通过bing的接口,把查询到的结果数据中的旁站链接提取出来,C段和旁站唯一不一样的地方,就是C段是把整个段的ip上的旁站都轮询一遍,不过在此之前你需要先申请一下bing的搜索api,其实我自己是不怎么用这类的工具的[不太准],基本都是手工直接在bing里面,ip:*慢慢分析找入手点的,因为工具本身可能会漏掉很多有价值的参考信息,反正我们的目的就是找个站能进去的站即可,怎么找,随意,你自己觉得怎么快就怎么来,渗透在乎更多的是结果和效率,过程几乎不会太在意<br><br><br>4,好了,这部分内容确实比较简单,工具也没太多技术含量,单纯只是为了理解一些基本概念而已,这里就不多说了<br><br></p>
<h5 id="一些提供类似功能的工具站-之前好用的-现在大多已经失效了-后期遇到好的再贴上来"><a href="#一些提供类似功能的工具站-之前好用的-现在大多已经失效了-后期遇到好的再贴上来" class="headerlink" title="一些提供类似功能的工具站,之前好用的,现在大多已经失效了,后期遇到好的再贴上来:"></a>一些提供类似功能的工具站,之前好用的,现在大多已经失效了,后期遇到好的再贴上来:</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">http:</span>/<span class="regexp">/www.sameip.org/</span></div></pre></td></tr></table></figure>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/11/search-ipinfo/">
                web渗透第一步 之 信息搜集 [ 搜集目标真实ip信息 ]
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-11</span>
            
            
            
                <span class="category">
                    <a href="/categories/信息搜集/">信息搜集</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br>1,在实际渗透中,给我们的目标可能仅仅就是一个域名或者某个组织名,那么该如何仅仅通过一个目标域名或者组织域名来确定目标所在的一些真实ip段呢,下面我们就开始整个信息搜集任务的第一步,搜集目标ip及域名信息,注意,这里我们暂且先不考虑目标是否用了CDN的问题,如何透过cdn找真实ip在后面会做单独说明,这里就先以正常的情况来说明<br><br></p>
<p>2,以 www.cityu.edu.hk 为例,拿到目标域名的第一反应,没别的,先ping下目标域名看看解析情况再说<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ping www.cityu.edu.hk</span></div><div class="line">www.cityu.edu.hk (<span class="number">144.214</span>.<span class="number">5.62</span>) ping 目标主域解析到的ip是这个</div></pre></td></tr></table></figure></p>
<p><br><br>3,虽然没ping通,但这并不影响我们看它解析到的ip,不通的原因,还要看它提示的是什么,如果是超时,多半是因为防火墙拦截了imcp请求,不过这并不是重点,重点是我们已经发现这个域名被解析到了这个ip上,而且被解析的这个域名依然是 www.cityu.edu.hk,其实,从这里基本就已经可以确定这个ip就是目标的真实ip段内的[搞多了,自然就会有感觉],不信的话,我们可以直接尝试在浏览器中访问下解析到的这个ip,看看是不是会自动跳转到www.cityu.edu.hk 这个域名上的网页上,但仅仅就这一个ip还是远远不够的,对一个这种规模的大学来讲,机器肯定不再少数,我们接着往下走……<br><img src="/img/www.cityu.edu.hk.png" alt=""><br></p>
<p>4,ping 完主域,顺手再来ping下子域,依然是没ping通,不过我们看到这个子域也被解析到了这个ip上[很可能是代理服务器或者负载均衡器什么的]<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ping cityu.edu.hk</span></div><div class="line">cityu.edu.hk (<span class="number">144.214</span>.<span class="number">5.62</span>)</div></pre></td></tr></table></figure></p>
<p><img src="/img/cityu.edu.hk.png" alt=""><br></p>
<p>5,通过上面简单的ping,我们已初步发现目标所在的其中一个真实ip段,但仅仅只有这一个段还是远远不够的[像这种规模的大学,几乎整个B段都可能是它的],接着我们可以从目标的mx,ns,a记录入手,至于这些记录具体都是干什么的,这里就不细说了,大家请自行谷歌,因为我们今天的重点并不在这些记录本身,而仅仅是想通过这些记录[子域]获取一些目标的真实ip段,如下,推荐dig,nslookup不太准[非权威查询]<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">查目标的mx记录:</div><div class="line"><span class="comment"># dig +short @8.8.8.8 cityu.edu.hk mx</span></div><div class="line">smtp.cityu.edu.hk (<span class="number">144.214</span>.<span class="number">4.72</span>)  很显然,这只是目标的一个子域,根据ping解析到的结果我们发现这个ip也确实是香港ip,跟ping主域返回的结果是<span class="number">144.214</span>.<span class="number">5.62</span>,貌似是差了一个<span class="string">'C'</span>段,不过,大致可以确定是目标的真实ip段</div></pre></td></tr></table></figure></p>
<p><img src="/img/cityu mx 1.png" alt=""><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cityu-edu-hk.mail.protection.outlook.com (<span class="number">65.55</span>.<span class="number">88.234</span>)  注意此域名,它并非目标子域,很显然是挂到outlook上的,ip也不是香港的,所以,此ip对我们实际的渗透意义并不大,可以忽略</div></pre></td></tr></table></figure></p>
<p><img src="/img/cityu mx 2.png" alt=""><br><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">查目标ns记录:</div><div class="line"><span class="comment"># dig +short @8.8.8.8 cityu.edu.hk ns</span></div><div class="line">cpccspc.cityu.edu.hk (<span class="number">144.214</span>.<span class="number">5.254</span>) 目标子域,ip和主域处在同一C段中,可以确定为目标真实ip</div></pre></td></tr></table></figure></p>
<p><img src="/img/cityu ns 1.png" alt=""></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vax.cityu.edu.hk (<span class="number">144.214</span>.<span class="number">2.1</span>) 目标子域,同处在B段中,初步确定为目标真实ip</div></pre></td></tr></table></figure>
<p><img src="/img/cityu ns 2.png" alt=""></p>
<p>cpccux0.cityu.edu.hk (144.214.5.253) 目标子域,ip和主域处在同一C段中,可以确定为目标真实ip<br><img src="/img/cityu ns 3.png" alt=""><br><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">查目标a记录:</div><div class="line"><span class="comment"># dig +short cityu.edu.hk a</span></div><div class="line"><span class="number">144.214</span>.<span class="number">5.62</span>   和直接ping的结果一致,确定为真实ip</div></pre></td></tr></table></figure>
<p><br></p>
<p>6,当然,你可以从一些第三方网站上获取到目标的一些ip及域名信息,下面就推荐几个自己常用的<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ip138的数据库还是蛮不错的,主要是更新频繁,只需提供一个目标ip或者域名[给子域就好了]即可定位ip所在地,如果你想把它写到脚本中批量查,它也提供查询接口,付点儿费,然后把接口写到你的脚本中即可</div><div class="line"></div><div class="line">www.ip138.com</div></pre></td></tr></table></figure></p>
<p><img src="/img/ip138 ip info res.png" alt=""> <img src="/img/ip138 ip info.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">这是个相对比较老的信息搜集站,直接给个目标子域,它会把目标的一些子域也都列出来,然后你可以挨个点到每个子域里面再去看该子域详情,域名详情包括这个域名ip变更的历史记录[比如,我们发现在www.cityu.edu.hk这个域名上曾经解析到过三个ip,尝试ping下以前的ip看看还在不在,说不定是个入手点呢],web服务器版本型号,操作系统类型[如果是一些低版本的操作系统,我们可以直接尝试比较经典的漏洞exp,比如iis(<span class="number">2000</span> <span class="number">2003</span>)写等等……],域名注册商[如果你想做域名劫持可能会用到],域名所在地等等……,从结果看到我们看到,主域其实是一台f5负载均衡设备[印证了前面的猜测],另外从别的子域里面我们又发现了很多其它的真实ip段</div><div class="line"></div><div class="line">www.netcraft.com</div></pre></td></tr></table></figure>
<p><img src="/img/netcraft.com.png" alt=""><br><img src="/img/netcraft.com res.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">最后再来查下目标域名的 whois 信息,里面的一些内容对我们渗透也是有一定帮助的,比如,注册时留下的各种联系信息,邮箱,电话,姓名等等……</div><div class="line"></div><div class="line">www.whois.com/whois</div></pre></td></tr></table></figure>
<p>whois里面对我们有用的信息可能也就下面这些:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">注册信息中的邮箱,名字,域名注册时间,过期时间以及当前注册状态</div></pre></td></tr></table></figure></p>
<p><img src="/img/Registrant Contact Information.png" alt=""><br><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">管理员各种联系信息,包括管理员邮箱电话,传真,各种名字[可以用来制作字典]</div></pre></td></tr></table></figure></p>
<p><img src="/img/Administrative Contact.png" alt=""><br><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">目标技术的联系方式,包括邮箱,电话,传真,名称</div></pre></td></tr></table></figure></p>
<p><img src="/img/Technical Contact.png" alt=""><br><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">用于解析该域名的所有ns服务器,从这里面我们发现了两个我们之前在ns记录没查到的域名,不过一看,这很显然就不是目标自己的ns服务器,所以,忽略</div></pre></td></tr></table></figure></p>
<p><img src="/img/Name Servers Information.png" alt=""><br></p>
<p>7,通过上面的初步搜集,我们大致整理出了下面的一些目标真实ip段,因为段比较多,这里并没有都写上去……,关键是大家的搜集思路清晰就好:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">144.214</span>.<span class="number">2.0</span>/<span class="number">24</span></div><div class="line"><span class="number">144.214</span>.<span class="number">4.0</span>/<span class="number">24</span></div><div class="line"><span class="number">144.214</span>.<span class="number">5.0</span>/<span class="number">24</span></div><div class="line"><span class="number">144.214</span>.<span class="number">236.0</span>/<span class="number">24</span></div><div class="line">……</div></pre></td></tr></table></figure></p>
<p><br><br>8,到这一步,初步的ip及域名信息搜集就基本算是完成了,内容确实比较简单,关于工具的使用也比较容易,实在不会,看看命令的相关帮助应该就能明白了,可能最需要注意的地方还是 ping 的时候最好多ping几次,有时候因为自己的网速或者目标的网络问题,也会导致超时,并非一定是防火墙的原因,所以,一般ping 个5,6次就差不多了,当然,这里只是大家告诉你怎么手工去找,相信这里的一点铺垫,到后面会更利于你去理解和使用这一类的信息搜集工具,因为它们的工作流程大致都是如此,只不过我们现在是在手工实现它,还是那句话,实际渗透中怎么快怎么来[以效率为重],后面会说到dnsenum,一个脚本基本就可以把上面说的东西全干了……<br><br><br>9,当然啦,这仅仅还是万里长征的第一步,拿到准确的目标ip段信息,也是为了方便我们后面,对目标机器大概的部署情况做一些简要判断,从中找到一些可能的突破口,这中间还会涉及到cdn的问题,不过不用太着急,后面会再专门针对cdn做单独的详细说明,至于拿到这些真实ip信息以后的事情,就自己随意了,旁站,C段,ddos,爆破…………,自己想怎么发挥都行…<br><br></p>
<h5 id="一点小结"><a href="#一点小结" class="headerlink" title="一点小结:"></a>一点小结:</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;没啥技术含量,方便加深对此类工具的深层理解,顺带留给有需要的朋友<br><br></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2014/12/09/hidsdesd-vpn/">
                CentOS 6.x 编译安装配置openvpn
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-09</span>
            
            
            
                <span class="category">
                    <a href="/categories/vpn-config/">vpn config</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><br><br>1,关于openvpn<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">OpenVPN是一个基于OpenSSL加密库的应用层开源VPN实现</div></pre></td></tr></table></figure></p>
<p>2,openvpn 可工作于两种模式：<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tun 一种是IP遂道路由模式,主要应用于点对点</div><div class="line">eth 一种是基于以太网的遂道桥模式,应用于点对多点,有多个分支机构</div></pre></td></tr></table></figure></p>
<p>3,openvpn 提供的两种安全模式：<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Static Key</div><div class="line">X509 PKI (Public Key Infrastructure)</div></pre></td></tr></table></figure></p>
<p>4,安装openvpn前的一些必要的环境准备,务必事先让所有机器时间都同步,这非常重要,客户端和服务器端时间要一致,否则容易出问题<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># /usr/sbin/ntpdate pool.ntp.org  可以把此命令加到定时任务中</span></div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">准备好两个软件包:</div><div class="line"><span class="comment"># wget http://www.oberhumer.com/opensource/lzo/download/lzo-2.06.tar.gz 数据压缩库源码包</span></div><div class="line"><span class="comment"># wget https://build.openvpn.net/downloads/releases/openvpn-2.2.2.tar.gzopenvpn的源码包</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">禁用<span class="symbol">selinux:</span></div><div class="line"><span class="comment"># setenforce 0 </span></div><div class="line"><span class="comment"># sed -i '/^SELINUX=/c\SELINUX=disabled' /etc/selinux/config</span></div><div class="line"><span class="comment"># shutdown -r now    关闭selinux以后一定要记得重启下系统</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">安装C编译器和openssl依赖库,因为openvpn依赖openssl进行数据加密</div><div class="line"><span class="comment"># yum install -y  gcc gcc-c++ openssl openssl-devel</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">编译安装LZO 它主要用于压缩通讯数据加快传输速度</div><div class="line"><span class="comment"># tar -zxf lzo-2.06.tar.gz</span></div><div class="line"><span class="comment"># cd lzo-2.06</span></div><div class="line"><span class="comment"># ./configure --prefix=/usr/local/lzo</span></div><div class="line"><span class="comment"># make &amp;&amp; make install</span></div><div class="line"><span class="comment"># echo $?</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tun/tap</div><div class="line">OpenVpn要使用TUN/TAP作为接口建立隧道,但需要内核支持,TUN 接口创建的是三层路由隧道,建立方便</div><div class="line">TAP 是二层网卡桥接隧道,即创建一个以太网桥接,相对复杂</div><div class="line">    TUN 接口下所有的客户端处于一个完全独立的子网内,与 VPN 服务器所在的子网没有关系</div><div class="line">    TAP 接口的好处相较之下则相当明显,客户端可以获得 VPN 服务器所处子网的 IP(即,忽略物理上的区别,可以完全将客户端看做是于 VPN 服务器处于同一子网的另一台机器)</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">检查内核是否支持TUN/TAP设备驱动,确定内核支持TUN/TAP模块之后,加载模块</div><div class="line"><span class="comment"># modinfo tun      # 加载,如果有正常的输出,则支持</span></div><div class="line"><span class="comment"># lsmod tun        # 检查</span></div><div class="line"><span class="comment"># ls /dev/net/tun  # 检查文件是否存在判断tun模块是否已经被加载</span></div></pre></td></tr></table></figure>
<p>5,编译安装OpenVPN<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># tar -zxf openvpn-2.2.2.tar.gz</span></div><div class="line"><span class="comment"># cd openvpn-2.2.2</span></div><div class="line"><span class="comment"># ./configure --with-lzo-headers=/usr/local/lzo/include --with-lzo-lib=/usr/local/lzo/lib</span></div><div class="line"><span class="comment"># make &amp;&amp; make install</span></div><div class="line"><span class="comment"># echo $?</span></div><div class="line"><span class="comment"># which openvpn  如果能看到路径,说明openvpn已经安装成功,默认是在/usr/local/sbin/openvpn目录下</span></div></pre></td></tr></table></figure></p>
<p>6,配置openvpn<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">修改证书变量 </div><div class="line"><span class="comment"># cd easy-rsa/2.0/</span></div><div class="line"><span class="comment"># cp -a vars vars.bak</span></div><div class="line"><span class="comment"># cat vars  # 自定义修改如下内容</span></div><div class="line"></div><div class="line"><span class="comment"># vi vars</span></div><div class="line">	export KEY_COUNTRY=<span class="string">"CN"</span></div><div class="line">	export KEY_PROVINCE=<span class="string">"BJ"</span></div><div class="line">	export KEY_CITY=<span class="string">"Beijing"</span></div><div class="line">	export KEY_ORG=<span class="string">"sec"</span></div><div class="line">	export KEY_EMAIL=<span class="string">"sec@gmail.com"</span></div><div class="line">	export KEY_EMAIL=sec@gmail.com</div><div class="line">	export KEY_CN=CN</div><div class="line">	export KEY_NAME=klionsec</div><div class="line">	export KEY_OU=klionsec</div><div class="line">	export PKCS11_MODULE_PATH=changeme</div><div class="line">	export PKCS11_PIN=<span class="number">1234</span></div></pre></td></tr></table></figure></p>
<p>初始化证书变量,并生成ca和服务端证书<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># source vars</span></div><div class="line"><span class="comment"># ./clean-all  	# 把原来的证书全部清空</span></div><div class="line"><span class="comment"># ./build-ca   	# 生成根证书ca.crt和根密钥ca.key(一路按回车即可),因为vars文件已经在上面定义好了默认的变量值,生成的时候会逐个读取里面的值</span></div><div class="line"><span class="comment"># ls keys/   	# 看下刚刚生成的ca证书在keys目录里有没有</span></div><div class="line"><span class="comment"># ./build-key-server server # 为服务端生成证书和密钥(中间会有两个让你输入密码的地方,注意两次的密码要保持一致,然后按照提示输入y即可,共两次)</span></div><div class="line"><span class="comment"># ls keys/</span></div></pre></td></tr></table></figure></p>
<p>每一个登陆的VPN客户端需要有一个证书,每个证书在同一时刻只能供一个客户端连接,下面开始生成客户端证书,注意这个是不带密码的<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ./build-key client  # 为客户端生成证书和密钥(中间也会有两个让你输入密码的地方,跟上面保持一致,然后按照提示输入y即可,共两次)</span></div><div class="line"><span class="comment"># ll keys/</span></div></pre></td></tr></table></figure></p>
<p>创建带密码的客户端证书<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ./build-key-pass ett  带密码的证书,即使你拿到了证书,如果没密码也不行</span></div><div class="line"><span class="comment"># ll keys/</span></div></pre></td></tr></table></figure></p>
<p>生成秘钥协议文件<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ./build-dh     # 创建迪菲·赫尔曼密钥,会生成dh2048.pem文件(生成过程可能会比较慢,在此期间不要去中断它)</span></div><div class="line"><span class="comment"># ll keys/</span></div><div class="line"><span class="comment"># openvpn --genkey --secret keys/ta.key  # 生成ta.key文件(防DDos攻击,UDP淹没等恶意攻击)</span></div></pre></td></tr></table></figure></p>
<p>7,创建并配置openvpn服务器端配置文件,将需要用到的openvpn证书和密钥复制一份到创建好的keys目录中<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># mkdir -pv /etc/openvpn</span></div><div class="line"><span class="comment"># cp -r keys/ /etc/openvpn/</span></div><div class="line"><span class="comment"># cd ../../</span></div><div class="line"><span class="comment"># cp sample-config-files/&#123;server.conf,client.conf&#125; /etc/openvpn/</span></div><div class="line"><span class="comment"># tree /etc/openvpn/</span></div><div class="line"><span class="comment"># cd  /etc/openvpn/</span></div><div class="line"><span class="comment"># cp -a server.conf server.conf.bak</span></div><div class="line"><span class="comment"># grep '^[^#;]' /etc/openvpn/server.conf</span></div><div class="line"><span class="comment"># grep '^[^#;]' /etc/openvpn/server.conf &gt;&gt; tmp.txt</span></div><div class="line"><span class="comment"># cat tmp.txt &gt; server.conf</span></div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 服务端完整配置</span></div><div class="line"></div><div class="line">local <span class="number">192.168</span>.<span class="number">3.30</span></div><div class="line">port <span class="number">1194</span></div><div class="line">proto tcp</div><div class="line">dev tun</div><div class="line">ca /etc/openvpn/keys/ca.crt</div><div class="line">cert /etc/openvpn/keys/server.crt</div><div class="line">key /etc/openvpn/keys/server.key </div><div class="line">dh /etc/openvpn/keys/dh1024.pem</div><div class="line">server <span class="number">10.8</span>.<span class="number">0</span>.<span class="number">0</span> <span class="number">255.255</span>.<span class="number">255.0</span></div><div class="line">push <span class="string">"redirect-gateway def1 bypass-dhcp"</span></div><div class="line">push <span class="string">"dhcp-option DNS 114.114.114.114"</span></div><div class="line">push <span class="string">"dhcp-option DNS 8.8.8.8"</span></div><div class="line">client-to-client</div><div class="line">ifconfig-pool-persist ipp.txt</div><div class="line">keepalive <span class="number">10</span> <span class="number">120</span></div><div class="line">comp-lzo</div><div class="line">duplicate-cn </div><div class="line">client-to-client</div><div class="line">persist-key</div><div class="line">persist-tun</div><div class="line">status openvpn-status.log</div><div class="line">log /etc/openvpn/openvpn.log</div><div class="line">verb <span class="number">3</span></div></pre></td></tr></table></figure>
<p>8,开始配置内核和防火墙(要允许openvpn),启动服务,并让其自启动<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">开启系统路由转发</div><div class="line"><span class="comment"># sed -i '/net.ipv4.ip_forward/s/0/1/' /etc/sysctl.conf</span></div><div class="line"><span class="comment"># sysctl -p  让其立马生效</span></div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">如果开启了iptables,记得把<span class="number">1194</span>端口允许一下</div><div class="line"><span class="comment"># iptables -A INPUT -p tcp --dport 1194 -j ACCEPT</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">启动openvpn</div><div class="line"><span class="comment"># /usr/local/sbin/openvpn --config /etc/openvpn/server.conf &amp;</span></div><div class="line"><span class="comment"># netstat -tulnp | grep vpn</span></div><div class="line"><span class="comment"># echo "/usr/local/sbin/openvpn --config /etc/openvpn/server.conf &amp;" &gt;&gt; /etc/rc.local</span></div><div class="line"><span class="comment"># tail -n 20 /etc/rc.local</span></div><div class="line"><span class="comment"># ifconfig  -a    openvpn一旦启动后就会多出一个tun0的网卡</span></div></pre></td></tr></table></figure>
<p><img src="/img/start openvpn.png" alt=""><br><br><img src="/img/centos ipaddr.png" alt=""><br><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">把openvpn脚本加入系统自启动,不一定非要这样做</div><div class="line"><span class="comment"># cp sample-scripts/openvpn.init /etc/init.d/openvpn</span></div><div class="line"><span class="comment"># chmod 700 /etc/init.d/openvpn</span></div><div class="line"><span class="comment"># chkconfig --level 2345 openvpn on</span></div><div class="line"><span class="comment"># chkconfig --list</span></div><div class="line"><span class="comment"># /etc/init.d/openvpn restart  会有报错</span></div><div class="line"><span class="comment"># vi /etc/init.d/openvpn     把148行的*.conf改成server.conf,这个目录下不能有多个.conf否则会被干扰到</span></div><div class="line"><span class="comment"># /etc/init.d/openvpn restart  正常启动</span></div><div class="line"><span class="comment"># lsof -i :1194</span></div></pre></td></tr></table></figure></p>
<p>9,创建客户端配置文件 client.ovpn<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">win openvpn客户端下载:</div><div class="line"><span class="symbol">http:</span>/<span class="regexp">/swupdate.openvpn.org/community</span><span class="regexp">/releases/openvpn</span>-<span class="number">2.2</span>.<span class="number">2</span>-install.exe</div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">将 ca.crt client.crt client.key client.ovpn 文件复制到<span class="symbol">C:</span>\Program Files\OpenVPN\config[这里是我自己的openvpn客户端的安装目录,你要换成你自己的]</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># client.ovpn[客户端]完整配置如下 </span></div><div class="line"></div><div class="line">client</div><div class="line">dev tun</div><div class="line">proto tcp</div><div class="line">remote <span class="number">192.168</span>.<span class="number">3.30</span> <span class="number">1194</span></div><div class="line">resolv-<span class="keyword">retry</span> infinite</div><div class="line">nobind</div><div class="line">persist-key</div><div class="line">persist-tun</div><div class="line">ca ca.crt</div><div class="line">cert client.crt</div><div class="line">key client.key</div><div class="line">ns-cert-type server</div><div class="line">comp-lzo</div><div class="line">verb <span class="number">3</span></div></pre></td></tr></table></figure>
<p><img src="/img/win openvpn.png" alt=""><br><br><img src="/img/win client.png" alt=""><br></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">之后,右键<span class="string">'管理员权限'</span>运行openvpn客户端,点击<span class="string">'connect'</span>,进行连接即可,这里虽然连上了,但还有些问题,细心的朋友可能也已经发现了,我的vpn网关貌似没了,也就是说我虽然连上了,但还是上不了网,查了可半天也没看到问题在哪儿,朋友们如果看到哪步配置里有错,麻烦也告知下本人,感激不尽</div></pre></td></tr></table></figure>
<p><img src="/img/win openvpn res.png" alt=""><br><br><img src="/img/win openvpn connect res.png" alt=""><br><br><img src="/img/openvpn ipconfig .png" alt=""><br></p>
<p>10,在linux下安装openvpn客户端<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">像上面安装openvpn一模一样,再到要连接vpn的服务器上安装一遍,把客户端证书和配置拷贝到相应(<span class="regexp">/etc/openvpn</span><span class="regexp">/)的目录下然后以上面启动openvpn服务的方式启动客户端,只不过这次要加载的配置文件不再是server.conf而是client.conf</span></div></pre></td></tr></table></figure></p>
<p>11,搭建openvpn过程中,容易出现的一些错误及解决办法:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">时区不统一造成的错误,</div><div class="line">连上了却不能上网,通常是网关或者路由转发的问题</div></pre></td></tr></table></figure></p>
<p><br></p>

        </div>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="" href="/page/9/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/11/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">

<center>如果有朋友需要优质vps,可以去<a href="http://www.laoxuehost.com/vps/" target="_blank">老薛</a>买,异常稳定,本人已自用多年,使用下面的优惠码,会有 <font color="red">25% </font>的折扣哦...</center><br>
至少,在同等质量的vps中,已经算是非常好的了,起码自己平时 youtube 1080 基本是没什么问题<br>
<br>
<a href="http://www.laoxuehost.com/vps/" target="_blank" > 购买老薛vps </a> &nbsp;&nbsp;&nbsp;&nbsp; 优惠码: <font color="red">nuddle123</font><br>
<br><a href="/img/laoxue.png" target="_blank">优惠码具体使用方法</a><br>
<br>
<span>另,有偿提供各类服务搭建,配置加固[lamp,lnmp,vpn...],服务器代维<font color="red"> &nbsp;&nbsp;QQ 742116745</span><br>
<br>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">博客累计访问共 <span id="busuanzi_value_site_pv"></span> 次</span>
<span id="busuanzi_container_site_uv">
访客数累计 <span id="busuanzi_value_site_uv"></span> 人
</span>
<span id="showDays"></span>
<script>
var birthDay = new Date("11/20/2014");
var now = new Date();
var duration = now.getTime() - birthDay.getTime(); 
var total= Math.floor(duration / (1000 * 60 * 60 * 24));
document.getElementById("showDays").innerHTML = " 其实博客已默默坚挺了 "+total+" 天";
</script>
<br>
<br>
有多年实战渗透经验积累[大中小型网络] + 娴熟的底层开发能力 + 熟练的协议分析能力 + 有多个大中型安全架构实际设计部署经验 + 良好的逆向分析能力[一定的0day挖掘能力] = 安全架构师
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klionsec">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:klionsec@gmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    <h2>blog by klion</h2>
                </div>
            </div>
        </div>
    </div>
		<audio autoplay="autoplay">
		<source src="/img/Jon YoungSoon.mp3" type="audio/mpeg" />
		</audio>
</footer>



<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>